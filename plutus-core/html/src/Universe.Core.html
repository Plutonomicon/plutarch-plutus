<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds          #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds                #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs                    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses    #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds                #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints    #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes               #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE StandaloneKindSignatures #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell          #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies             #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators            #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances     #-}</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- Required only by 'Permits0' for some reason.</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses  #-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Universe.Core</span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier">Esc</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier">SomeTypeIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier">Kinded</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier">ValueOf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#someValueOf"><span class="hs-identifier">someValueOf</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#someValue"><span class="hs-identifier">someValue</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#someValueType"><span class="hs-identifier">someValueType</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-identifier">Contains</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Includes"><span class="hs-identifier">Includes</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier">DecodeUniM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier">Closed</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#decodeKindedUni"><span class="hs-identifier">decodeKindedUni</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#peelUniTag"><span class="hs-identifier">peelUniTag</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier">Permits</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-identifier">EverywhereAll</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#%3C%3A"><span class="hs-operator">(&lt;:)</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier">HasUniApply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#checkStar"><span class="hs-identifier">checkStar</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#withApplicable"><span class="hs-identifier">withApplicable</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#knownUniOf"><span class="hs-identifier">knownUniOf</span></a></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">GShow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">gshow</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">GEq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/5hjxrlzplcds5090yqfcigiprvi59dj9-dependent-sum-template-lib-dependent-sum-template-0.1.1.1-haddock-doc/share/doc/dependent-sum-template/html/src"><span class="hs-identifier">deriveGEq</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/5hjxrlzplcds5090yqfcigiprvi59dj9-dependent-sum-template-lib-dependent-sum-template-0.1.1.1-haddock-doc/share/doc/dependent-sum-template/html/src"><span class="hs-identifier">deriveGCompare</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator">(:~:)</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Control.Applicative</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">Control.Monad.Trans.State.Strict</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Data.GADT.Compare</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/5hjxrlzplcds5090yqfcigiprvi59dj9-dependent-sum-template-lib-dependent-sum-template-0.1.1.1-haddock-doc/share/doc/dependent-sum-template/html/src"><span class="hs-identifier">Data.GADT.Compare.TH</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Data.GADT.DeepSeq</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Data.GADT.Show</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier">Data.Some.Newtype</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Type.Equality</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/da2hmxi6d15fyyy3w420iiw5djx3ra5n-deriving-compat-lib-deriving-compat-0.6.1-haddock-doc/share/doc/deriving-compat/html/src"><span class="hs-identifier">Text.Show.Deriving</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Type.Reflection</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-comment">{- Note [Universes]
A universe is a collection of tags for types. It can be finite like

    data U a where
        UUnit :: U ()
        UInt  :: U Int

(where 'UUnit' is a tag for '()' and 'UInt' is a tag for 'Int') or infinite like

    data U a where
        UBool :: U Bool
        UList :: !(U a) -&gt; U [a]

Here are some values of the latter 'U' / the types that they encode

        UBool               / Bool
        UList UBool         / [Bool]
        UList (UList UBool) / [[Bool]]

'U' being a GADT allows us to package a type from a universe together with a value of that type.
For example,

    Some (ValueOf UBool True) :: Some (ValueOf U)

We say that a type is in a universe whenever there is a tag for that type in the universe.
For example, 'Int' is in 'U', because there exists a tag for 'Int' in 'U' ('UInt').
-}</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">{- Note [Representing polymorphism]
Consider the following universe (in this example and the ones below bangs on arguments in universes
are omitted for clarity):

    data U a where
        UList :: U a -&gt; U [a]
        UInt  :: U Int

It has ints and polymorphic lists in it (including lists of lists etc).

This representation works perfectly at the value level, you can instantiate functions like

    foo :: (uni `Includes` [], uni `Includes` Int) =&gt; &lt;...&gt;
    foo = &lt;...&gt;

with 'U', it is straightforward to provide a meaninful 'Closed' instance etc. I.e. at the value
level polymorphic data types are entirely unproblematic, since they are always fully instantiated
there and so there's basically no difference compared to regular monomorphic types.

However if you also have the type level in your target language (i.e. it's not some form of an
untyped calculus) and the type language supports polymorphism and you have polymorphic built-in
functions, then the version of 'U' from the above does not fit as well. For example, you want
to be able to represent the following built-in function:

    idList :: forall a. [a] -&gt; [a]  -- In the source language (Haskell)
    idList : all a. [a] -&gt; [a]      -- In the target language

It's obvious how to implement the former, but for the latter you have to put a target language
variable (@a@) into a meta type (@[]@), which is not only awkward, but also requires a lot of extra
care in every part of the compiler that deals with types, for example in this setting type
substitution has to look inside built-in types (and for that reason you have to be able to store
not just type variables but full target language types in meta types, 'cause otherwise you can't
substitute a type for a type variable and so substitution is broken). So this is really tricky.

However instead of putting target language type variables into meta types we can instead have
type lambdas inside universes, or, even better, Agda-like operators sections
(see https://agda.readthedocs.io/en/v2.6.1.3/language/mixfix-operators.html#mixfix-operators).
For that we only need to add another constructor to 'U':

    data Hole  -- An empty data type.

    data U a where
        &lt;...&gt;
        UHole :: U Hole

That allows us to put @UList UHole@ into a target language type, which displays as @[_]@ and means
@\a -&gt; [a]@, which is a neutral (as in, irreducible) type-level function that we can apply via the
regular type-level function application constructor, which allows us not to put the argument into
the meta type, but instead keep it in the type AST. If we wanted to add pairs as built-in types,
we'd add the following constructor:

    data U a where
        &lt;...&gt;
        UPair :: U a -&gt; U b -&gt; U (a, b)

and here are some examples of meta types and what they'd mean in the target language:

    UPair UInt  (UList UInt)        (Int, [Int])
    UPair UInt  UHole               \b -&gt; (Int, b)
    UPair UHole (UList UInt)        \a -&gt; (a, [Int])
    UPair UHole UHole               \a b -&gt; (a, b)

Overall, we need to be careful not to end up using 'UHole' at the term level, and some rather
boilerplate-y infrastructure is required to connect the type and term levels of the target
language (as you need to manually check if an argument to a built-in function is a list/pair as
expected, because with this solution there's no general way (or at least I haven't found one)
to match types of arguments against arbitrary-kinded applied type operator sections), but otherwise
this solution does make it possible to apply meta types to target language types without infecting
the former with the latter.

Things however become more complex if you want to be polymorphic over universes in your target
language. You can no longer match against a handful of hardcoded type tags. You could introduce type
classes like @UniHasList@, @UniHasPair@ etc, but having a class per polymorphic built-in type is
clunky and boilerplate-y (and this is in addition to the existing boilerplate-y infrastructure
that was mentioned above). It would be nice if we could impose each universe to have a single
application constructor and not require polymorphic built-in types to be fully applied at all
times (&quot;fully applied&quot; includes &quot;applied to a hole&quot;).

So can we index the universe by types of arbitrary kinds and have a single application constructor?
Well, we can define

    data U (a :: k) where
        UProtoList :: U []
        UInt       :: U Int
        UApply     :: U f -&gt; U a -&gt; U (f a)

which allows us to recover the original 'UList' as

    pattern UList = UApply UProtoList

But 'U' is of kind @forall k. k -&gt; Type@, which is really hard to deal with. For one thing, we lose
pretty much any interop with the rest of the ecosystem, for example not only is it not possible to
derive 'GEq' or 'GShow' anymore, it's not even correct to say @GEq U@, because 'GEq' expects
something of type @k -&gt; Type@ for a particular @k@, while 'U' has a different kind.

Our problems with 'U' don't end here. Having a @forall@ in the kind destroys type inference.
For example, having

    type ISome :: (forall k. k -&gt; Type) -&gt; Type
    data ISome f = forall a (x :: a). ISome (f x)

    data U (a :: k)

we can check that

    newtype TypeIn uni a = TypeIn (uni a)

    type Test = ISome (TypeIn U)

type checks just fine when 'TypeIn' has the following kind signature:

    type TypeIn :: (forall k. k -&gt; Type) -&gt; forall l. l -&gt; Type

but fails to type check when the final @forall@ is moved to the left:

    type TypeIn :: forall l. (forall k. k -&gt; Type) -&gt; l -&gt; Type

We could fix it by defining

    type IType = forall k. k -&gt; Type

and using it everywhere instead of @forall k. k -&gt; Type@, but our problems just start here.
For another example, the following does not type check at all:

    type IType = forall k. k -&gt; Type

    type IValueOf :: IType -&gt; Type -&gt; Type
    data IValueOf uni a = IValueOf (uni a) a

    instance Eq (IValueOf (uni :: IType) a)

GHC does not seem to like that implicitly quantified @uni@ has a higher-rank kind.
And it's annoying that we'd need both @Some@ (for values) and @ISome@ (for types).

So basically this approach is unusable.

But there's another way to spell @forall k. k -&gt; Type@ and it's @(exists k. k) -&gt; Type@ or in
Haskell terms:

    data Esc = forall k. Esc k

    data U (a :: T) where
        UProtoList :: U ('Esc [])
        UInt       :: U ('Esc Int)
        UApply     :: U ('Esc f) -&gt; U ('Esc a) -&gt; U ('Esc (f a))

However this variant of 'U' has the disadvantage of not being of the @Type -&gt; Type@ kind
(it's @T -&gt; Type@ instead), which means that the user now needs to enable @DataKinds@ just to be
able to mention universes (even without actually doing anything with them) and also use those
annoying ticks. So instead we can think of @Type@ as a data type itself whose constructors
(an infinite amount of them) are things introduced via the @data@ keyword. This gives us

    data Esc (a :: k)

    data U (a :: Type) where
        UProtoList :: U (Esc [])
        UInt       :: U (Esc Int)
        UApply     :: U (Esc f) -&gt; U (Esc a) -&gt; U (Esc (f a))

(note that we haven't introduced any more &quot;openness&quot; with this trick as any kind in Haskell is
already weirdly open (including @T@): https://gist.github.com/ekmett/ac881f3dba3f89ec03f8fdb1d8bf0a40)

This is the encoding that we use, but unfortunately that required reworking the whole infrastructure
that we originally had. For example, 'ValueOf' had to change from

    data ValueOf uni a = ValueOf (uni a) a

to

    data ValueOf uni a = ValueOf (uni (Esc a)) a

It is annoying that if we want to talk about partially applied type constructors, then suddenly we
need a completely different encoding of universes (and of the whole infrastructure) than the one
that we used before we had type constructors (or cared about partially applying them), but I believe
it's worth the trouble.
-}</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-comment">{- Note [Decoding universes]
We have types of arbitrary kinds at the type level, but at the value level every constant must be of
kind star. I.e. we have to be able to parse/decode arbitrary types, but ensure that a decoded type
is of kind star whenever we expect to parse/decode a constant of that type next. This is one reason
why we have all these 'Typeable' constraints lying around.

Type-wise this is enforced via 'bring' expecting a @uni (Esc a)@ with @a@ being of kind @Type@.
I.e. there is no way one could parse a general type and then attempt to bring a constraint for
that type in scope via 'bring' without first ensuring that the type is of kind star.

Another reason for having the 'Typeable' constraints is that decoding a type application requires
checking that the expected kind of an argument matches the kind of the provided argument due to us
having an intrinsically-kinded reprensentation of types.
-}</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">{- Note [The TypeApp approach]
There's an alternative approach to representing universes supporting partial application of
type constructors. The idea is that we only &quot;shield&quot; those types that are of a non-star kind instead
of applying @T@ to every single type in the universe. I.e. we specifically embed into @Type@ only
(possibly partial) type applications and add one more constructor that allows for &quot;running&quot; such
applications:

    data TypeApp (a :: k)

    data U (a :: Type) where
        UProtoList  :: U (TypeApp [])
        UInt        :: U Int
        UApply      :: U (TypeApp f) -&gt; U a -&gt; U (TypeApp (f a))
        URunTypeApp :: U (TypeApp a) -&gt; U a

This representation has the advantage of allowing for sharing the universes infrastructure between
the monomorphic and polymorphic cases. I.e. we could use good old

    data ValueOf uni a = ValueOf (uni a) a

instead of having to use the slightly more awkward

    data ValueOf uni a = ValueOf (uni (Esc a)) a

One problem that this representation has is redundancy: there are two ways to represent the type
of lists of integers (for some definition of @SomeTypeIn@):

    SomeTypeIn (URunTypeApp (UProtoList `UApply` UInt))
    SomeTypeIn (UProtoList `UApply` UInt)

In practice it's not a big deal, we just need not to forget to strip the 'URunTypeApp' constructor
off whenever that is important (for example, during type normalization).

But a more serious problem with this representation is that we lose all the type safety discussed
in Note [Decoding universes], which makes it rather easy to shoot oneself in the foot with
@error &quot;not supposed to happen&quot;@ happening. I.e. we'd need to perform all the same checks
in client code but without the type checker forcing us to do so like it does now, so that's a huge
price to pay for some superficial syntactic nicety and hence we choose the safe approach,
even though that required reworking all the infrastructure in a backwards-incompatible manner.
-}</span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="hs-comment">-- See Note [Representing polymorphism].</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- | \&quot;Escapes\&quot; a type of an arbitrary kind to fit into 'Type'.</span><span>
</span><span id="line-326"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680988906"><span class="annot"><a href="#local-6989586621680988906"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680988906"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-327"></span><span class="hs-keyword">data</span><span> </span><span id="Esc"><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-var">Esc</span></a></span></span><span> </span><span id="local-6989586621680988905"><span class="annot"><a href="#local-6989586621680988905"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-comment">-- | A particular type from a universe.</span><span>
</span><span id="line-330"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-331"></span><span class="hs-keyword">data</span><span> </span><span id="SomeTypeIn"><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-var">SomeTypeIn</span></a></span></span><span> </span><span id="local-6989586621680989284"><span class="annot"><a href="#local-6989586621680989284"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680988904"><span class="annot"><a href="#local-6989586621680988904"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680988903"><span class="annot"><a href="#local-6989586621680988903"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680988904"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span id="SomeTypeIn"><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-var">SomeTypeIn</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989284"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988903"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">data</span><span> </span><span id="Kinded"><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-var">Kinded</span></a></span></span><span> </span><span id="local-6989586621680988901"><span class="annot"><a href="#local-6989586621680988901"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680988900"><span class="annot"><a href="#local-6989586621680988900"><span class="hs-identifier hs-type">ta</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621680988898"><span id="local-6989586621680988899"><span id="local-6989586621680989197"><span id="Kinded"><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-var">Kinded</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988899"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989197"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988898"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-type">Kinded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989197"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680988898"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680988899"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-comment">-- | A value of a particular type from a universe.</span><span>
</span><span id="line-337"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-338"></span><span class="hs-keyword">data</span><span> </span><span id="ValueOf"><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-var">ValueOf</span></a></span></span><span> </span><span id="local-6989586621680989298"><span class="annot"><a href="#local-6989586621680989298"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680989297"><span class="annot"><a href="#local-6989586621680989297"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ValueOf"><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-var">ValueOf</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989298"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989297"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621680989297"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">{- | A class for enumerating types and fully instantiated type formers that @uni@ contains.
For example, a particular @ExampleUni@ may have monomorphic types in it:

    instance ExampleUni `Contains` Integer where &lt;...&gt;
    instance ExampleUni `Contains` Bool    where &lt;...&gt;

as well as polymorphic ones:

    instance ExampleUni `Contains` [] where &lt;...&gt;
    instance ExampleUni `Contains` (,) where &lt;...&gt;

as well as their instantiations:

    instance ExampleUni `Contains` a =&gt; ExampleUni `Contains` [a] where &lt;...&gt;
    instance (ExampleUni `Contains` a, ExampleUni `Contains` b) =&gt; ExampleUni `Contains` (a, b) where &lt;...&gt;

(a universe can have any subset of the mentioned sorts of types, for example it's fine to have
instantiated polymorphic types and not have uninstantiated ones and vice versa)

Note that when used as a constraint of a function 'Contains' does not allow you to directly
express things like \&quot;@uni@ has the @Integer@, @Bool@ and @[]@ types and type formers\&quot;,
because @[]@ is not fully instantiated. So you can only say \&quot;@uni@ has @Integer@, @Bool@,
@[Integer]@, @[Bool]@, @[[Integer]]@, @[[Bool]]@ etc\&quot; and such manual enumeration is annoying,
so we'd really like to be able to say that @uni@ has lists of arbitrary built-in types
(including lists of lists etc). 'Contains' does not allow that, but 'Includes' does.
For example, in the body of the following definition:

    foo :: (uni `Includes` Integer, uni `Includes` Bool, uni `Includes` []) =&gt; &lt;...&gt;
    foo = &lt;...&gt;

you can make use of the fact that @uni@ has lists of arbitrary included types (integers,
booleans and lists).

Hence most of the time opt for using the more flexible 'Includes'.

'Includes' is defined in terms of 'Contains', so you only need to provide a 'Contains' instance
per type from the universe and you'll get 'Includes' for free.
-}</span><span>
</span><span id="line-378"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-identifier hs-type">Contains</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989312"><span class="annot"><a href="#local-6989586621680989312"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989312"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-379"></span><span class="hs-keyword">class</span><span> </span><span id="local-6989586621680989311"><span class="annot"><a href="#local-6989586621680989311"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="Contains"><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-operator hs-var">`Contains`</span></a></span></span><span> </span><span id="local-6989586621680989310"><span class="annot"><a href="#local-6989586621680989310"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>    </span><span id="knownUni"><span class="annot"><a href="Universe.Core.html#knownUni"><span class="hs-identifier hs-type">knownUni</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989311"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989310"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-comment">{- Note [The definition of Includes]
We need to be able to partially apply 'Includes' (required in the definition of '&lt;:' for example),
however if we define 'Includes' as a class alias like that:

    class    Contains uni `Permits` a =&gt; uni `Includes` a
    instance Contains uni `Permits` a =&gt; uni `Includes` a

we get this extra annoying warning:

    &#8226; The constraint &#8216;Includes uni ()&#8217; matches
        instance forall k (uni :: * -&gt; *) (a :: k).
                 Permits (Contains uni) a =&gt;
                 Includes uni a
      This makes type inference for inner bindings fragile;
        either use MonoLocalBinds, or simplify it using the instance

at the use site, so instead we define 'Includes' as a type alias of one argument (i.e. 'Includes'
has to be immediately applied only to a @uni@ at the use site).
-}</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- See Note [The definition of Includes].</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- | @uni `Includes` a@ reads as \&quot;@a@ is in the @uni@\&quot;. @a@ can be of a higher-kind,</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- see the docs of 'Contains' on why you might want that.</span><span>
</span><span id="line-405"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Includes"><span class="hs-identifier hs-type">Includes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680988894"><span class="annot"><a href="#local-6989586621680988894"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988894"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-406"></span><span class="hs-keyword">type</span><span> </span><span id="Includes"><span class="annot"><a href="Universe.Core.html#Includes"><span class="hs-identifier hs-var">Includes</span></a></span></span><span> </span><span id="local-6989586621680988893"><span class="annot"><a href="#local-6989586621680988893"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-type">Permits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-identifier hs-type">Contains</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988893"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span class="hs-comment">-- | Same as 'knownUni', but receives a @proxy@.</span><span>
</span><span id="line-409"></span><span id="local-6989586621680989318"><span id="local-6989586621680989320"><span id="local-6989586621680989321"><span class="annot"><a href="Universe.Core.html#knownUniOf"><span class="hs-identifier hs-type">knownUniOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989321"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-operator hs-type">`Contains`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989320"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989318"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989320"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989321"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989320"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-410"></span><span id="knownUniOf"><span class="annot"><span class="annottext">knownUniOf :: forall {k} (uni :: * -&gt; *) (a :: k) (proxy :: k -&gt; *).
Contains uni a =&gt;
proxy a -&gt; uni (Esc a)
</span><a href="Universe.Core.html#knownUniOf"><span class="hs-identifier hs-var hs-var">knownUniOf</span></a></span></span><span> </span><span class="annot"><span class="annottext">proxy a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
forall k (uni :: * -&gt; *) (a :: k). Contains uni a =&gt; uni (Esc a)
</span><a href="Universe.Core.html#knownUni"><span class="hs-identifier hs-var">knownUni</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-comment">-- | Wrap a value into @Some (ValueOf uni)@, given its explicit type tag.</span><span>
</span><span id="line-413"></span><span class="annot"><a href="Universe.Core.html#someValueOf"><span class="hs-identifier hs-type">someValueOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989308"><span class="annot"><a href="#local-6989586621680989308"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989309"><span class="annot"><a href="#local-6989586621680989309"><span class="hs-identifier hs-type">uni</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680989309"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989308"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989308"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989309"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span id="someValueOf"><span class="annot"><span class="annottext">someValueOf :: forall a (uni :: * -&gt; *). uni (Esc a) -&gt; a -&gt; Some (ValueOf uni)
</span><a href="Universe.Core.html#someValueOf"><span class="hs-identifier hs-var hs-var">someValueOf</span></a></span></span><span> </span><span id="local-6989586621680988890"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988890"><span class="hs-identifier hs-var">uni</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValueOf uni a -&gt; Some (ValueOf uni)
forall {k} (tag :: k -&gt; *) (a :: k). tag a -&gt; Some tag
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">Some</span></a></span><span> </span><span class="annot"><span class="annottext">(ValueOf uni a -&gt; Some (ValueOf uni))
-&gt; (a -&gt; ValueOf uni a) -&gt; a -&gt; Some (ValueOf uni)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; a -&gt; ValueOf uni a
forall (uni :: * -&gt; *) a. uni (Esc a) -&gt; a -&gt; ValueOf uni a
</span><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-var">ValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988890"><span class="hs-identifier hs-var">uni</span></a></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="hs-comment">-- | Wrap a value into @Some (ValueOf uni)@, provided its type is in the universe.</span><span>
</span><span id="line-417"></span><span class="annot"><a href="Universe.Core.html#someValue"><span class="hs-identifier hs-type">someValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989295"><span class="annot"><a href="#local-6989586621680989295"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989296"><span class="annot"><a href="#local-6989586621680989296"><span class="hs-identifier hs-type">uni</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680989296"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Includes"><span class="hs-operator hs-type">`Includes`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989295"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989295"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989296"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span id="someValue"><span class="annot"><span class="annottext">someValue :: forall a (uni :: * -&gt; *). Includes uni a =&gt; a -&gt; Some (ValueOf uni)
</span><a href="Universe.Core.html#someValue"><span class="hs-identifier hs-var hs-var">someValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; a -&gt; Some (ValueOf uni)
forall a (uni :: * -&gt; *). uni (Esc a) -&gt; a -&gt; Some (ValueOf uni)
</span><a href="Universe.Core.html#someValueOf"><span class="hs-identifier hs-var">someValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
forall k (uni :: * -&gt; *) (a :: k). Contains uni a =&gt; uni (Esc a)
</span><a href="Universe.Core.html#knownUni"><span class="hs-identifier hs-var">knownUni</span></a></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span id="local-6989586621680989288"><span class="annot"><a href="Universe.Core.html#someValueType"><span class="hs-identifier hs-type">someValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989288"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989288"><span class="hs-identifier hs-type">uni</span></a></span></span><span>
</span><span id="line-421"></span><span id="someValueType"><span class="annot"><span class="annottext">someValueType :: forall (uni :: * -&gt; *). Some (ValueOf uni) -&gt; SomeTypeIn uni
</span><a href="Universe.Core.html#someValueType"><span class="hs-identifier hs-var hs-var">someValueType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988882"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988882"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; SomeTypeIn uni
forall (uni :: * -&gt; *) k (a :: k). uni (Esc a) -&gt; SomeTypeIn uni
</span><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-var">SomeTypeIn</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988882"><span class="hs-identifier hs-var">tag</span></a></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-comment">-- | A monad to decode types from a universe in.</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- We use a monad for decoding, because parsing arguments of polymorphic built-in types can peel off</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- an arbitrary amount of type tags from the input list of tags and so we have state, which is</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- convenient to handle with, well, 'StateT'.</span><span>
</span><span id="line-427"></span><span class="hs-keyword">newtype</span><span> </span><span id="DecodeUniM"><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-var">DecodeUniM</span></a></span></span><span> </span><span id="local-6989586621680989282"><span class="annot"><a href="#local-6989586621680989282"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DecodeUniM"><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-var">DecodeUniM</span></a></span></span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unDecodeUniM"><span class="annot"><span class="annottext">forall a. DecodeUniM a -&gt; StateT [Int] Maybe a
</span><a href="Universe.Core.html#unDecodeUniM"><span class="hs-identifier hs-var hs-var">unDecodeUniM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989282"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-429"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680988874"><span id="local-6989586621680988878"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b)
-&gt; (forall a b. a -&gt; DecodeUniM b -&gt; DecodeUniM a)
-&gt; Functor DecodeUniM
forall a b. a -&gt; DecodeUniM b -&gt; DecodeUniM a
forall a b. (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; DecodeUniM b -&gt; DecodeUniM a
$c&lt;$ :: forall a b. a -&gt; DecodeUniM b -&gt; DecodeUniM a
fmap :: forall a b. (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
$cfmap :: forall a b. (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680988849"><span id="local-6989586621680988853"><span id="local-6989586621680988857"><span id="local-6989586621680988861"><span id="local-6989586621680988866"><span class="annot"><span class="annottext">Functor DecodeUniM
Functor DecodeUniM
-&gt; (forall a. a -&gt; DecodeUniM a)
-&gt; (forall a b.
    DecodeUniM (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM c)
-&gt; (forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b)
-&gt; (forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM a)
-&gt; Applicative DecodeUniM
forall a. a -&gt; DecodeUniM a
forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM a
forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
forall a b. DecodeUniM (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
forall a b c.
(a -&gt; b -&gt; c) -&gt; DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM a
$c&lt;* :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM a
*&gt; :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
$c*&gt; :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM c
&lt;*&gt; :: forall a b. DecodeUniM (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
$c&lt;*&gt; :: forall a b. DecodeUniM (a -&gt; b) -&gt; DecodeUniM a -&gt; DecodeUniM b
pure :: forall a. a -&gt; DecodeUniM a
$cpure :: forall a. a -&gt; DecodeUniM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680988825"><span id="local-6989586621680988830"><span id="local-6989586621680988835"><span id="local-6989586621680988841"><span class="annot"><span class="annottext">Applicative DecodeUniM
Applicative DecodeUniM
-&gt; (forall a. DecodeUniM a)
-&gt; (forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a)
-&gt; (forall a. DecodeUniM a -&gt; DecodeUniM [a])
-&gt; (forall a. DecodeUniM a -&gt; DecodeUniM [a])
-&gt; Alternative DecodeUniM
forall a. DecodeUniM a
forall a. DecodeUniM a -&gt; DecodeUniM [a]
forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
forall (f :: * -&gt; *).
Applicative f
-&gt; (forall a. f a)
-&gt; (forall a. f a -&gt; f a -&gt; f a)
-&gt; (forall a. f a -&gt; f [a])
-&gt; (forall a. f a -&gt; f [a])
-&gt; Alternative f
many :: forall a. DecodeUniM a -&gt; DecodeUniM [a]
$cmany :: forall a. DecodeUniM a -&gt; DecodeUniM [a]
some :: forall a. DecodeUniM a -&gt; DecodeUniM [a]
$csome :: forall a. DecodeUniM a -&gt; DecodeUniM [a]
&lt;|&gt; :: forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
$c&lt;|&gt; :: forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
empty :: forall a. DecodeUniM a
$cempty :: forall a. DecodeUniM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Alternative</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680988807"><span id="local-6989586621680988811"><span id="local-6989586621680988815"><span class="annot"><span class="annottext">Applicative DecodeUniM
Applicative DecodeUniM
-&gt; (forall a b.
    DecodeUniM a -&gt; (a -&gt; DecodeUniM b) -&gt; DecodeUniM b)
-&gt; (forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b)
-&gt; (forall a. a -&gt; DecodeUniM a)
-&gt; Monad DecodeUniM
forall a. a -&gt; DecodeUniM a
forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
forall a b. DecodeUniM a -&gt; (a -&gt; DecodeUniM b) -&gt; DecodeUniM b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; DecodeUniM a
$creturn :: forall a. a -&gt; DecodeUniM a
&gt;&gt; :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
$c&gt;&gt; :: forall a b. DecodeUniM a -&gt; DecodeUniM b -&gt; DecodeUniM b
&gt;&gt;= :: forall a b. DecodeUniM a -&gt; (a -&gt; DecodeUniM b) -&gt; DecodeUniM b
$c&gt;&gt;= :: forall a b. DecodeUniM a -&gt; (a -&gt; DecodeUniM b) -&gt; DecodeUniM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680988791"><span id="local-6989586621680988797"><span class="annot"><span class="annottext">Monad DecodeUniM
Alternative DecodeUniM
Alternative DecodeUniM
-&gt; Monad DecodeUniM
-&gt; (forall a. DecodeUniM a)
-&gt; (forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a)
-&gt; MonadPlus DecodeUniM
forall a. DecodeUniM a
forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
forall (m :: * -&gt; *).
Alternative m
-&gt; Monad m
-&gt; (forall a. m a)
-&gt; (forall a. m a -&gt; m a -&gt; m a)
-&gt; MonadPlus m
mplus :: forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
$cmplus :: forall a. DecodeUniM a -&gt; DecodeUniM a -&gt; DecodeUniM a
mzero :: forall a. DecodeUniM a
$cmzero :: forall a. DecodeUniM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadPlus</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680988782"><span class="annot"><span class="annottext">Monad DecodeUniM
Monad DecodeUniM
-&gt; (forall a. String -&gt; DecodeUniM a) -&gt; MonadFail DecodeUniM
forall a. String -&gt; DecodeUniM a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. String -&gt; m a) -&gt; MonadFail m
fail :: forall a. String -&gt; DecodeUniM a
$cfail :: forall a. String -&gt; DecodeUniM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadFail</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span id="local-6989586621680989214"><span class="annot"><a href="Universe.Core.html#runDecodeUniM"><span class="hs-identifier hs-type">runDecodeUniM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-type">DecodeUniM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989214"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989214"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-432"></span><span id="runDecodeUniM"><span class="annot"><span class="annottext">runDecodeUniM :: forall a. [Int] -&gt; DecodeUniM a -&gt; Maybe (a, [Int])
</span><a href="Universe.Core.html#runDecodeUniM"><span class="hs-identifier hs-var hs-var">runDecodeUniM</span></a></span></span><span> </span><span id="local-6989586621680988776"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988776"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-type">DecodeUniM</span></a></span><span> </span><span id="local-6989586621680988775"><span class="annot"><span class="annottext">StateT [Int] Maybe a
</span><a href="#local-6989586621680988775"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT [Int] Maybe a -&gt; [Int] -&gt; Maybe (a, [Int])
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runStateT</span></a></span><span> </span><span class="annot"><span class="annottext">StateT [Int] Maybe a
</span><a href="#local-6989586621680988775"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988776"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">-- | A universe is 'Closed', if it's known how to constrain every type from the universe and</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- every type can be encoded to / decoded from a sequence of integer tags.</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- The universe doesn't have to be finite and providing support for infinite universes is the</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- reason why we encode a type as a sequence of integer tags as opposed to a single integer tag.</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- For example, given</span><span>
</span><span id="line-439"></span><span class="hs-comment">--</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- &gt;   data U a where</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- &gt;       UList :: !(U a) -&gt; U [a]</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- &gt;       UInt  :: U Int</span><span>
</span><span id="line-443"></span><span class="hs-comment">--</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- @UList (UList UInt)@ can be encoded to @[0,0,1]@ where @0@ and @1@ are the integer tags of the</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- @UList@ and @UInt@ constructors, respectively.</span><span>
</span><span id="line-446"></span><span class="hs-keyword">class</span><span> </span><span id="Closed"><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-var">Closed</span></a></span></span><span> </span><span id="local-6989586621680989202"><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">-- | A constrant for \&quot;@constr a@ holds for any @a@ from @uni@\&quot;.</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-keyword">type</span><span> </span><span id="Everywhere"><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-identifier hs-var">Everywhere</span></a></span></span><span> </span><span id="local-6989586621680989202"><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680988773"><span class="annot"><a href="#local-6989586621680988773"><span class="hs-identifier hs-type">constr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-comment">-- | Encode a type as a sequence of 'Int' tags.</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">-- The opposite of 'decodeUni'.</span><span>
</span><span id="line-452"></span><span>    </span><span id="encodeUni"><span class="annot"><a href="Universe.Core.html#encodeUni"><span class="hs-identifier hs-type">encodeUni</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680989003"><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989003"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- | Decode a type and feed it to the continuation.</span><span>
</span><span id="line-455"></span><span>    </span><span id="withDecodedUni"><span class="annot"><a href="Universe.Core.html#withDecodedUni"><span class="hs-identifier hs-type">withDecodedUni</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680989201"><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989204"><span class="annot"><a href="#local-6989586621680989204"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680989203"><span class="annot"><a href="#local-6989586621680989203"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989204"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989204"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989203"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-type">DecodeUniM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989201"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-type">DecodeUniM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989201"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">-- | Bring a @constr a@ instance in scope, provided @a@ is a type from the universe and</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- @constr@ holds for any type from the universe.</span><span>
</span><span id="line-459"></span><span>    </span><span id="bring"><span class="annot"><a href="Universe.Core.html#bring"><span class="hs-identifier hs-type">bring</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680989067"><span id="local-6989586621680989068"><span id="local-6989586621680989069"><span id="local-6989586621680989070"><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989070"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989069"><span class="hs-identifier hs-type">proxy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989070"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989202"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989068"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989070"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989068"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989067"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989067"><span class="hs-identifier hs-type">r</span></a></span></span></span></span></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-comment">-- | Decode a type from a sequence of 'Int' tags.</span><span>
</span><span id="line-462"></span><span class="hs-comment">-- The opposite of 'encodeUni' (modulo invalid input).</span><span>
</span><span id="line-463"></span><span id="local-6989586621680989209"><span class="annot"><a href="Universe.Core.html#decodeKindedUni"><span class="hs-identifier hs-type">decodeKindedUni</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989209"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-type">Kinded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989209"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-464"></span><span id="decodeKindedUni"><span class="annot"><span class="annottext">decodeKindedUni :: forall (uni :: * -&gt; *).
Closed uni =&gt;
[Int] -&gt; Maybe (SomeTypeIn (Kinded uni))
</span><a href="Universe.Core.html#decodeKindedUni"><span class="hs-identifier hs-var hs-var">decodeKindedUni</span></a></span></span><span> </span><span id="local-6989586621680988763"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988763"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-465"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621680988762"><span class="annot"><span class="annottext">SomeTypeIn (Kinded uni)
</span><a href="#local-6989586621680988762"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Int]
-&gt; DecodeUniM (SomeTypeIn (Kinded uni))
-&gt; Maybe (SomeTypeIn (Kinded uni), [Int])
forall a. [Int] -&gt; DecodeUniM a -&gt; Maybe (a, [Int])
</span><a href="Universe.Core.html#runDecodeUniM"><span class="hs-identifier hs-var">runDecodeUniM</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988763"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="annot"><span class="annottext">(DecodeUniM (SomeTypeIn (Kinded uni))
 -&gt; Maybe (SomeTypeIn (Kinded uni), [Int]))
-&gt; DecodeUniM (SomeTypeIn (Kinded uni))
-&gt; Maybe (SomeTypeIn (Kinded uni), [Int])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall k (a :: k).
 Typeable k =&gt;
 uni (Esc a) -&gt; DecodeUniM (SomeTypeIn (Kinded uni)))
-&gt; DecodeUniM (SomeTypeIn (Kinded uni))
forall (uni :: * -&gt; *) r.
Closed uni =&gt;
(forall k (a :: k). Typeable k =&gt; uni (Esc a) -&gt; DecodeUniM r)
-&gt; DecodeUniM r
</span><a href="Universe.Core.html#withDecodedUni"><span class="hs-identifier hs-var">withDecodedUni</span></a></span><span> </span><span class="annot"><span class="annottext">((forall k (a :: k).
  Typeable k =&gt;
  uni (Esc a) -&gt; DecodeUniM (SomeTypeIn (Kinded uni)))
 -&gt; DecodeUniM (SomeTypeIn (Kinded uni)))
-&gt; (forall k (a :: k).
    Typeable k =&gt;
    uni (Esc a) -&gt; DecodeUniM (SomeTypeIn (Kinded uni)))
-&gt; DecodeUniM (SomeTypeIn (Kinded uni))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SomeTypeIn (Kinded uni) -&gt; DecodeUniM (SomeTypeIn (Kinded uni))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(SomeTypeIn (Kinded uni) -&gt; DecodeUniM (SomeTypeIn (Kinded uni)))
-&gt; (uni (Esc a) -&gt; SomeTypeIn (Kinded uni))
-&gt; uni (Esc a)
-&gt; DecodeUniM (SomeTypeIn (Kinded uni))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Kinded uni (Esc a) -&gt; SomeTypeIn (Kinded uni)
forall (uni :: * -&gt; *) k (a :: k). uni (Esc a) -&gt; SomeTypeIn uni
</span><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-var">SomeTypeIn</span></a></span><span> </span><span class="annot"><span class="annottext">(Kinded uni (Esc a) -&gt; SomeTypeIn (Kinded uni))
-&gt; (uni (Esc a) -&gt; Kinded uni (Esc a))
-&gt; uni (Esc a)
-&gt; SomeTypeIn (Kinded uni)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; Kinded uni (Esc a)
forall k (uni :: * -&gt; *) (a :: k).
Typeable k =&gt;
uni (Esc a) -&gt; Kinded uni (Esc a)
</span><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-var">Kinded</span></a></span><span>
</span><span id="line-466"></span><span>    </span><span class="annot"><span class="annottext">SomeTypeIn (Kinded uni) -&gt; Maybe (SomeTypeIn (Kinded uni))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">SomeTypeIn (Kinded uni)
</span><a href="#local-6989586621680988762"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="hs-comment">-- &gt;&gt;&gt; runDecodeUniM [1,2,3] peelUniTag</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- Just (1,[2,3])</span><span>
</span><span id="line-470"></span><span class="hs-comment">-- &gt;&gt;&gt; runDecodeUniM [] peelUniTag</span><span>
</span><span id="line-471"></span><span class="hs-comment">-- Nothing</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- | Peel off a tag from the input list of type tags.</span><span>
</span><span id="line-473"></span><span class="annot"><a href="Universe.Core.html#peelUniTag"><span class="hs-identifier hs-type">peelUniTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-type">DecodeUniM</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-474"></span><span id="peelUniTag"><span class="annot"><span class="annottext">peelUniTag :: DecodeUniM Int
</span><a href="Universe.Core.html#peelUniTag"><span class="hs-identifier hs-var hs-var">peelUniTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StateT [Int] Maybe Int -&gt; DecodeUniM Int
forall a. StateT [Int] Maybe a -&gt; DecodeUniM a
</span><a href="Universe.Core.html#DecodeUniM"><span class="hs-identifier hs-var">DecodeUniM</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT [Int] Maybe Int -&gt; DecodeUniM Int)
-&gt; StateT [Int] Maybe Int -&gt; DecodeUniM Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621680988758"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988758"><span class="hs-identifier hs-var">i</span></a></span></span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621680988757"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988757"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [Int] Maybe [Int]
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988758"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; StateT [Int] Maybe () -&gt; StateT [Int] Maybe Int
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; StateT [Int] Maybe ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">put</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621680988757"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-comment">-- It's not possible to return a @forall@ from a type family, let alone compute a proper</span><span>
</span><span id="line-479"></span><span class="hs-comment">-- quantified context, hence the boilerplate and a finite number of supported cases.</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits0"><span class="hs-identifier hs-type">Permits0</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-482"></span><span class="hs-keyword">class</span><span>    </span><span class="annot"><a href="#local-6989586621680989290"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989289"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="local-6989586621680989290"><span class="annot"><a href="#local-6989586621680989290"><span class="hs-identifier hs-type">constr</span></a></span></span><span> </span><span id="Permits0"><span class="annot"><a href="Universe.Core.html#Permits0"><span class="hs-operator hs-var">`Permits0`</span></a></span></span><span> </span><span id="local-6989586621680989289"><span class="annot"><a href="#local-6989586621680989289"><span class="hs-identifier hs-type">x</span></a></span></span><span>
</span><span id="line-483"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989188"><span id="local-6989586621680989189"><span class="annot"><a href="#local-6989586621680989189"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989188"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989189"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Permits0"><span class="hs-operator hs-type">`Permits0`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989188"><span class="hs-identifier hs-type">x</span></a></span></span></span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits1"><span class="hs-identifier hs-type">Permits1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-486"></span><span class="hs-keyword">class</span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989184"><span class="annot"><a href="#local-6989586621680989184"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680989187"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989184"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989187"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989186"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989184"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="local-6989586621680989187"><span class="annot"><a href="#local-6989586621680989187"><span class="hs-identifier hs-type">constr</span></a></span></span><span> </span><span id="Permits1"><span class="annot"><a href="Universe.Core.html#Permits1"><span class="hs-operator hs-var">`Permits1`</span></a></span></span><span> </span><span id="local-6989586621680989186"><span class="annot"><a href="#local-6989586621680989186"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-487"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989179"><span id="local-6989586621680989181"><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989180"><span class="annot"><a href="#local-6989586621680989180"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680989181"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989180"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989181"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989179"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989180"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989181"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Permits1"><span class="hs-operator hs-type">`Permits1`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989179"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits2"><span class="hs-identifier hs-type">Permits2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-490"></span><span class="hs-keyword">class</span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989175"><span class="annot"><a href="#local-6989586621680989175"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989174"><span class="annot"><a href="#local-6989586621680989174"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989178"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989175"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989178"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989174"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989178"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989177"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989175"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989174"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="local-6989586621680989178"><span class="annot"><a href="#local-6989586621680989178"><span class="hs-identifier hs-type">constr</span></a></span></span><span> </span><span id="Permits2"><span class="annot"><a href="Universe.Core.html#Permits2"><span class="hs-operator hs-var">`Permits2`</span></a></span></span><span> </span><span id="local-6989586621680989177"><span class="annot"><a href="#local-6989586621680989177"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-491"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989168"><span id="local-6989586621680989171"><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989170"><span class="annot"><a href="#local-6989586621680989170"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989169"><span class="annot"><a href="#local-6989586621680989169"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989171"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989170"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989171"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989169"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989171"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989168"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989170"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989169"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989171"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Permits2"><span class="hs-operator hs-type">`Permits2`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989168"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits3"><span class="hs-identifier hs-type">Permits3</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-494"></span><span class="hs-keyword">class</span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989164"><span class="annot"><a href="#local-6989586621680989164"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989163"><span class="annot"><a href="#local-6989586621680989163"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680989162"><span class="annot"><a href="#local-6989586621680989162"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989167"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989164"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989167"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989163"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989167"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989162"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989167"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989166"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989164"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989163"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989162"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="local-6989586621680989167"><span class="annot"><a href="#local-6989586621680989167"><span class="hs-identifier hs-type">constr</span></a></span></span><span> </span><span id="Permits3"><span class="annot"><a href="Universe.Core.html#Permits3"><span class="hs-operator hs-var">`Permits3`</span></a></span></span><span> </span><span id="local-6989586621680989166"><span class="annot"><a href="#local-6989586621680989166"><span class="hs-identifier hs-type">f</span></a></span></span><span>
</span><span id="line-495"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989155"><span id="local-6989586621680989159"><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989158"><span class="annot"><a href="#local-6989586621680989158"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680989157"><span class="annot"><a href="#local-6989586621680989157"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621680989156"><span class="annot"><a href="#local-6989586621680989156"><span class="hs-identifier hs-type">c</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989159"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989158"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989159"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989157"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989159"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989156"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989159"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989155"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989158"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989157"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989156"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989159"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Permits3"><span class="hs-operator hs-type">`Permits3`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989155"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-496"></span><span>
</span><span id="line-497"></span><span class="hs-comment">-- I tried defining 'Permits' as a class but that didn't have the right inference properties</span><span>
</span><span id="line-498"></span><span class="hs-comment">-- (i.e. I was getting errors in existing code). That probably requires bidirectional instances</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- to work, but who cares given that the type family version works alright and can even be</span><span>
</span><span id="line-500"></span><span class="hs-comment">-- partially applied (the kind has to be provided immediately though, but that's fine).</span><span>
</span><span id="line-501"></span><span class="hs-comment">{- | @constr `Permits` f@ elaborates to one of
-
    constr f
    forall a. constr a =&gt; constr (f a)
    forall a b. (constr a, constr b) =&gt; constr (f a b)
    forall a b c. (constr a, constr b, constr c) =&gt; constr (f a b c)

depending on the kind of @f@. This allows us to say things like

   ( constr `Permits` Integer
   , constr `Permits` []
   , constr `Permits` (,)
   )

and thus constraint every type from the universe (including polymorphic ones) to satisfy
@constr@, which is how we provide an implementation of 'Everywhere' for universes with
polymorphic types.

'Permits' is an open type family, so you can provide type instances for @f@s expecting
more type arguments than 3 if you need that.

Note that, say, @constr `Permits` []@ elaborates to

    forall a. constr a =&gt; constr [a]

and for certain type classes that does not make sense (e.g. the 'Generic' instance of @[]@
does not require the type of elements to be 'Generic'), however it's not a problem because
we use 'Permit' to constrain the whole universe and so we know that arguments of polymorphic
built-in types are builtins themselves are hence do satisfy the constraint and the fact that
these constraints on arguments do not get used in the polymorphic case only means that they
get ignored.
-}</span><span>
</span><span id="line-533"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-type">Permits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680988730"><span class="annot"><a href="#local-6989586621680988730"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988730"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-534"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="Permits"><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-var">Permits</span></a></span></span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span class="hs-comment">-- Implicit pattern matching on the kind.</span><span>
</span><span id="line-537"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Permits"><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-var">Permits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits0"><span class="hs-identifier hs-type">Permits0</span></a></span><span>
</span><span id="line-538"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Permits"><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-var">Permits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits1"><span class="hs-identifier hs-type">Permits1</span></a></span><span>
</span><span id="line-539"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Permits"><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-var">Permits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits2"><span class="hs-identifier hs-type">Permits2</span></a></span><span>
</span><span id="line-540"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="Permits"><span class="annot"><a href="Universe.Core.html#Permits"><span class="hs-identifier hs-var">Permits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Universe.Core.html#Permits3"><span class="hs-identifier hs-type">Permits3</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-comment">-- We can't use @All (Everywhere uni) constrs@, because 'Everywhere' is an associated type family</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- and can't be partially applied, so we have to inline the definition here.</span><span>
</span><span id="line-544"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-identifier hs-type">EverywhereAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-545"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="local-6989586621680988729"><span class="annot"><a href="#local-6989586621680988729"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="EverywhereAll"><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-operator hs-var">`EverywhereAll`</span></a></span></span><span> </span><span id="local-6989586621680988728"><span class="annot"><a href="#local-6989586621680988728"><span class="hs-identifier hs-type">constrs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-546"></span><span>    </span><span id="local-6989586621680988727"><span class="annot"><a href="#local-6989586621680988727"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span id="EverywhereAll"><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-operator hs-var">`EverywhereAll`</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>    </span><span id="local-6989586621680988724"><span id="local-6989586621680988725"><span id="local-6989586621680988726"><span class="annot"><a href="#local-6989586621680988726"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span id="EverywhereAll"><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-operator hs-var">`EverywhereAll`</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680988725"><span class="hs-identifier hs-type">constr</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621680988724"><span class="hs-identifier hs-type">constrs</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680988726"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988725"><span class="hs-identifier hs-type">constr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680988726"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#EverywhereAll"><span class="hs-operator hs-type">`EverywhereAll`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988724"><span class="hs-identifier hs-type">constrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span class="hs-comment">-- | A constraint for \&quot;@uni1@ is a subuniverse of @uni2@\&quot;.</span><span>
</span><span id="line-550"></span><span class="hs-keyword">type</span><span> </span><span id="local-6989586621680988723"><span class="annot"><a href="#local-6989586621680988723"><span class="hs-identifier hs-type">uni1</span></a></span></span><span> </span><span id="%3C%3A"><span class="annot"><a href="Universe.Core.html#%3C%3A"><span class="hs-operator hs-var">&lt;:</span></a></span></span><span> </span><span id="local-6989586621680988722"><span class="annot"><a href="#local-6989586621680988722"><span class="hs-identifier hs-type">uni2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621680988723"><span class="hs-identifier hs-type">uni1</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Includes"><span class="hs-identifier hs-type">Includes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988722"><span class="hs-identifier hs-type">uni2</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-comment">-- | A class for \&quot;@uni@ has general type application\&quot;.</span><span>
</span><span id="line-553"></span><span class="hs-keyword">class</span><span> </span><span id="HasUniApply"><span class="annot"><a href="Universe.Core.html#HasUniApply"><span class="hs-identifier hs-var">HasUniApply</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680988721"><span class="annot"><a href="#local-6989586621680988721"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-554"></span><span>    </span><span class="hs-comment">-- | Deconstruct a type application into the function and the argument and feed them to the</span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-comment">-- continuation. If the type is not an application, then return the default value.</span><span>
</span><span id="line-556"></span><span>    </span><span id="matchUniApply"><span class="annot"><a href="Universe.Core.html#matchUniApply"><span class="hs-identifier hs-type">matchUniApply</span></a></span></span><span>
</span><span id="line-557"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621680988718"><span id="local-6989586621680988719"><span class="annot"><a href="#local-6989586621680988721"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988719"><span class="hs-identifier hs-type">tb</span></a></span><span>  </span><span class="hs-comment">-- ^ The type.</span><span>
</span><span id="line-558"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988718"><span class="hs-identifier hs-type">r</span></a></span><span>       </span><span class="hs-comment">-- ^ What to return if the type is not an application.</span><span>
</span><span id="line-559"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680988717"><span class="annot"><a href="#local-6989586621680988717"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621680988716"><span class="annot"><a href="#local-6989586621680988716"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680988715"><span class="annot"><a href="#local-6989586621680988715"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680988717"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988716"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680988714"><span class="annot"><a href="#local-6989586621680988714"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621680988719"><span class="hs-identifier hs-type">tb</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680988715"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988714"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988721"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988715"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988721"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988714"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988718"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>                   </span><span class="hs-comment">-- ^ The continuation taking a function and an argument.</span><span>
</span><span id="line-561"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680988718"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span class="hs-comment">-- See Note [Decoding universes].</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- You might think @uni@ is inferrable from the explicitly given argument. Nope, in most cases it's</span><span>
</span><span id="line-565"></span><span class="hs-comment">-- not. It seems, kind equalities mess up inference.</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- | Check if the kind of the given type from the universe is 'Type'.</span><span>
</span><span id="line-567"></span><span class="annot"><a href="Universe.Core.html#checkStar"><span class="hs-identifier hs-type">checkStar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680989153"><span class="annot"><a href="#local-6989586621680989153"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680989154"><span class="annot"><a href="#local-6989586621680989154"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680989152"><span class="annot"><a href="#local-6989586621680989152"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989154"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989154"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989153"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989152"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989154"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-type">:~:</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span id="checkStar"><span class="annot"><span class="annottext">checkStar :: forall (uni :: * -&gt; *) a (x :: a).
Typeable a =&gt;
uni (Esc x) -&gt; Maybe (a :~: *)
</span><a href="Universe.Core.html#checkStar"><span class="hs-identifier hs-var hs-var">checkStar</span></a></span></span><span> </span><span class="annot"><span class="annottext">uni (Esc x)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680989154"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep a -&gt; TypeRep (*) -&gt; Maybe (a :~: *)
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">`testEquality`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span id="local-6989586621680989138"><span id="local-6989586621680989139"><span class="annot"><a href="Universe.Core.html#fromJustM"><span class="hs-identifier hs-type">fromJustM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">MonadPlus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989139"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989138"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989139"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989138"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-571"></span><span id="fromJustM"><span class="annot"><span class="annottext">fromJustM :: forall (f :: * -&gt; *) a. MonadPlus f =&gt; Maybe a -&gt; f a
</span><a href="Universe.Core.html#fromJustM"><span class="hs-identifier hs-var hs-var">fromJustM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f a -&gt; (a -&gt; f a) -&gt; Maybe a -&gt; f a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">f a
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">mzero</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-comment">-- See Note [Decoding universes].</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- | Check if one type from the universe can be applied to another (i.e. check that the expected</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- kind of the argument matches the actual one) and call the continuation in the refined context.</span><span>
</span><span id="line-576"></span><span class="hs-comment">-- Fail with 'mzero' otherwise.</span><span>
</span><span id="line-577"></span><span class="annot"><a href="Universe.Core.html#withApplicable"><span class="hs-identifier hs-type">withApplicable</span></a></span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680989132"><span class="annot"><a href="#local-6989586621680989132"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680989133"><span class="annot"><a href="#local-6989586621680989133"><span class="hs-identifier hs-type">ab</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680989129"><span class="annot"><a href="#local-6989586621680989129"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680989128"><span class="annot"><a href="#local-6989586621680989128"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span id="local-6989586621680989130"><span class="annot"><a href="#local-6989586621680989130"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621680989131"><span class="annot"><a href="#local-6989586621680989131"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680989126"><span class="annot"><a href="#local-6989586621680989126"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989133"><span class="hs-identifier hs-type">ab</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989132"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">MonadPlus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989131"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989130"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989129"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989133"><span class="hs-identifier hs-type">ab</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-580"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989130"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989128"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680989132"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680989127"><span class="annot"><a href="#local-6989586621680989127"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989127"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989133"><span class="hs-identifier hs-type">ab</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989132"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989127"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989131"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989126"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680989131"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989126"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-583"></span><span id="withApplicable"><span class="annot"><span class="annottext">withApplicable :: forall a ab (f :: ab) (x :: a) (uni :: * -&gt; *) (m :: * -&gt; *) r.
(Typeable ab, Typeable a, MonadPlus m) =&gt;
uni (Esc f)
-&gt; uni (Esc x)
-&gt; (forall b. (Typeable b, ab ~ (a -&gt; b)) =&gt; m r)
-&gt; m r
</span><a href="Universe.Core.html#withApplicable"><span class="hs-identifier hs-var hs-var">withApplicable</span></a></span></span><span> </span><span class="annot"><span class="annottext">uni (Esc f)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">uni (Esc x)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680988685"><span class="annot"><span class="annottext">forall b. (Typeable b, ab ~ (a -&gt; b)) =&gt; m r
</span><a href="#local-6989586621680988685"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680989133"><span class="hs-identifier hs-type">ab</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-585"></span><span>        </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Fun</span></a></span><span> </span><span id="local-6989586621680988677"><span class="annot"><span class="annottext">TypeRep arg
</span><a href="#local-6989586621680988677"><span class="hs-identifier hs-var">repA</span></a></span></span><span> </span><span id="local-6989586621680988676"><span class="annot"><span class="annottext">TypeRep res
</span><a href="#local-6989586621680988676"><span class="hs-identifier hs-var">repB</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-586"></span><span>            </span><span class="hs-comment">-- The type of @(-&gt;)@ is</span><span>
</span><span id="line-587"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-588"></span><span>            </span><span class="hs-comment">--     forall {r1} {r2} (a :: TYPE r1) (b :: TYPE r2). a -&gt; b -&gt; Type</span><span>
</span><span id="line-589"></span><span>            </span><span class="hs-comment">--</span><span>
</span><span id="line-590"></span><span>            </span><span class="hs-comment">-- so we need to demonstrate that both @a@ and @b@ are of kind @Type@. We get the former</span><span>
</span><span id="line-591"></span><span>            </span><span class="hs-comment">-- from checking that the type representation of 'withApplicable'-bound @a@ equals @a@</span><span>
</span><span id="line-592"></span><span>            </span><span class="hs-comment">-- from @a -&gt; b@, but for the latter we need an explicit check.</span><span>
</span><span id="line-593"></span><span>            </span><span class="annot"><span class="annottext">a :~~: arg
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">HRefl</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (a :~~: arg) -&gt; m (a :~~: arg)
forall (f :: * -&gt; *) a. MonadPlus f =&gt; Maybe a -&gt; f a
</span><a href="Universe.Core.html#fromJustM"><span class="hs-identifier hs-var">fromJustM</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (a :~~: arg) -&gt; m (a :~~: arg))
-&gt; Maybe (a :~~: arg) -&gt; m (a :~~: arg)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680989132"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep a -&gt; TypeRep arg -&gt; Maybe (a :~~: arg)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">`eqTypeRep`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep arg
</span><a href="#local-6989586621680988677"><span class="hs-identifier hs-var">repA</span></a></span><span>
</span><span id="line-594"></span><span>            </span><span class="annot"><span class="annottext">TYPE r2 :~: *
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (TYPE r2 :~: *) -&gt; m (TYPE r2 :~: *)
forall (f :: * -&gt; *) a. MonadPlus f =&gt; Maybe a -&gt; f a
</span><a href="Universe.Core.html#fromJustM"><span class="hs-identifier hs-var">fromJustM</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (TYPE r2 :~: *) -&gt; m (TYPE r2 :~: *))
-&gt; Maybe (TYPE r2 :~: *) -&gt; m (TYPE r2 :~: *)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep res -&gt; TypeRep (TYPE r2)
forall k (a :: k). TypeRep a -&gt; TypeRep k
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRepKind</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep res
</span><a href="#local-6989586621680988676"><span class="hs-identifier hs-var">repB</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep (TYPE r2) -&gt; TypeRep (*) -&gt; Maybe (TYPE r2 :~: *)
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
TestEquality f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">`testEquality`</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">typeRep</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-595"></span><span>            </span><span class="annot"><span class="annottext">TypeRep res -&gt; (Typeable res =&gt; m r) -&gt; m r
forall k (a :: k) r. TypeRep a -&gt; (Typeable a =&gt; r) -&gt; r
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">withTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep res
</span><a href="#local-6989586621680988676"><span class="hs-identifier hs-var">repB</span></a></span><span> </span><span class="annot"><span class="annottext">Typeable res =&gt; m r
forall b. (Typeable b, ab ~ (a -&gt; b)) =&gt; m r
</span><a href="#local-6989586621680988685"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-596"></span><span>        </span><span class="annot"><span class="annottext">TypeRep ab
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m r
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">mzero</span></a></span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span class="hs-comment">{- Note [The G, the Tag and the Auto]
Providing instances for

    data Some f = forall a. Some (f a)

is tricky. There are several things to consider here:

1. the G: for some type classes we can provide an instance for @Some f@ for any @f@ generically.
Take for example @Show (Some f)@, we could implement it as

    instance (forall a. Show (f a)) =&gt; Show (Some f) where
        show (Some a) = &quot;Some &quot; ++ show a

(with `-XQuantifiedConstraints`). Unfortunately, that breaks @deriving stock (Show)@ for every data type
that has @Some f@ somewhere inside it and forces you to use a standalone deriving declaration for
each such data type, which is rather annoying, because instance contexts tend to get huge,
so it takes time to come up with them or to remember where to copy them from and they also occupy
a lot of space (text-wise).

Luckily, &quot;Data.GADT.Show&quot; provides

    class GShow t where
        gshowsPrec :: Int -&gt; t a -&gt; ShowS

    gshow :: GShow t =&gt; t a -&gt; String

which allows us to define a 'Show' instance for 'Some' as

    instance GShow f =&gt; Show (Some f) where
        show (Some a) = &quot;Some &quot; ++ gshow a

so @GShow f@ is basically an encoding of @forall a. Show (f a)@.

2. the Tag: for some type classes we can get away without providing the G version of a type class,
e.g. 'Hashable' is handled like that:

    instance Closed uni =&gt; Hashable (TypeIn uni a) where
        hashWithSalt salt (TypeIn uni) = hashWithSalt salt $ encodeUni uni

    instance Closed uni =&gt; Hashable (SomeTypeIn uni) where
        hashWithSalt salt (Some s) = hashWithSalt salt s

where

    class Closed uni where
        encodeUni :: uni a -&gt; [Int]
        &lt;...&gt;

So as long as for each type of a universe you know its encoding as a sequence of integer tags,
you can hash any type from the universe via that sequence. 'Flat' is handled in a similar way.

The 'Hashable' type class is also interesting in that we do not provide a generic instance for
any @Some f@. This is because @f@ can be anything of kind @* -&gt; *@ and we only have 'encodeUni' for
universes. In order to stress that the @f@ in this instance has to be a universe we use
the 'TypeIn' wrapper:

    instance Closed uni =&gt; Hashable (SomeTypeIn uni) where

This allows us to hash a type from a universe and a value of a type from a universe in different
ways. The latter instance looks like this:

    instance (Closed uni, uni `Everywhere` Hashable) =&gt; Hashable (ValueOf uni a) where
        hashWithSalt salt (ValueOf uni x) =
            bring (Proxy @Hashable) uni $ hashWithSalt salt (SomeTypeIn uni, x)

    instance (Closed uni, uni `Everywhere` Hashable) =&gt; Hashable (Some (ValueOf uni)) where
        hashWithSalt salt (Some s) = hashWithSalt salt s

Here we hash a 'ValueOf' value as a pair of a type from a universe and a value of that type.

Another type class for which a generic @Some f@ instance doesn't make sense is 'NFData'.
For universes we define

    instance NFData (TypeIn uni a) where
        rnf (TypeIn uni) = rnf $ encodeUni uni

    instance NFData (SomeTypeIn uni) where
        rnf (Some s) = rnf s

i.e. to fully force a type from a universe it's enough to encode the type as a sequence of integer
tags and fully force that sequence.

3. the Auto:

When we can manually provide an instance for a type class, the two previous approaches work nicely.
But for a type class like 'Lift' we really want to use the deriving mechanism in order not to mess
with the hairy internal representation ('Exp' and stuff). But 'deriveLift' (and 'makeLift') calls
'lift' under the hood while we want it to call 'glift'. So we define a newtype wrapper ('AG') that
implements 'Lift' in terms of 'GLift', insert the 'AG' constructor in the right place and invoke
'makeLift' which calls 'lift' on 'AG' internally, so the 'lift' gets elaborated to 'glift'
as we want it to.

And even though we can manually write 'Show' instances, they're handled in the same automated way
below, just because the derived instances handle precedence (and thus insert parentheses in right
places) out of the box.

We should be able to use the same strategy for every type class @X@ when a @makeX@ function
(analogous to 'makeLift') is available.
-}</span><span>
</span><span id="line-697"></span><span>
</span><span id="line-698"></span><span class="hs-comment">-- WARNING: DO NOT EXPORT THIS, IT HAS AN UNSOUND 'Lift' INSTANCE USED FOR INTERNAL PURPOSES.</span><span>
</span><span id="line-699"></span><span class="hs-comment">-- | A wrapper that allows to provide an instance for a non-general class (e.g. 'Lift' or 'Show')</span><span>
</span><span id="line-700"></span><span class="hs-comment">-- for any @f@ implementing a general class (e.g. 'GLift' or 'GShow').</span><span>
</span><span id="line-701"></span><span class="hs-keyword">newtype</span><span> </span><span id="AG"><span class="annot"><a href="Universe.Core.html#AG"><span class="hs-identifier hs-var">AG</span></a></span></span><span> </span><span id="local-6989586621680989087"><span class="annot"><a href="#local-6989586621680989087"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621680989086"><span class="annot"><a href="#local-6989586621680989086"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AG"><span class="annot"><a href="Universe.Core.html#AG"><span class="hs-identifier hs-var">AG</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680989087"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989086"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="hs-special">$</span><span class="hs-special">(</span><span class="hs-identifier">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Stage restriction, see https://gitlab.haskell.org/ghc/ghc/issues/9813</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="hs-comment">-------------------- 'Show' / 'GShow'</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988644"><span id="local-6989586621680988646"><span id="local-6989586621680989099"><span id="local-6989586621680989100"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989100"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#AG"><span class="hs-identifier hs-type">AG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989100"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989099"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-708"></span><span>    </span><span id="local-6989586621680988641"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; AG f a -&gt; ShowS
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span id="local-6989586621680988639"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988639"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#AG"><span class="hs-identifier hs-type">AG</span></a></span><span> </span><span id="local-6989586621680988638"><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621680988638"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; f a -&gt; ShowS
forall k (t :: k -&gt; *) (a :: k). GShow t =&gt; Int -&gt; t a -&gt; ShowS
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">gshowsPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988639"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="annot"><span class="annottext">f a
</span><a href="#local-6989586621680988638"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988632"><span id="local-6989586621680988634"><span id="local-6989586621680989095"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989095"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989095"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-711"></span><span>    </span><span id="local-6989586621680988631"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; SomeTypeIn uni -&gt; ShowS
</span><a href="#local-6989586621680988631"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span id="local-6989586621680988630"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988630"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988629"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988629"><span class="hs-identifier hs-var">uni</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">$</span><span class="hs-special">(</span><span class="hs-identifier">makeShowsPrec</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">SomeTypeIn</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988630"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AG uni (Esc a) -&gt; SomeTypeIn (AG uni)
forall (uni :: * -&gt; *) k (a :: k). uni (Esc a) -&gt; SomeTypeIn uni
</span><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-var">SomeTypeIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">uni (Esc a) -&gt; AG uni (Esc a)
forall {k} (f :: k -&gt; *) (a :: k). f a -&gt; AG f a
</span><a href="Universe.Core.html#AG"><span class="hs-identifier hs-var">AG</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988629"><span class="hs-identifier hs-var">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>
</span><span id="line-713"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988612"><span id="local-6989586621680988614"><span id="local-6989586621680989084"><span id="local-6989586621680989085"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989085"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-type">Kinded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989085"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989084"><span class="hs-identifier hs-type">ta</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-714"></span><span>    </span><span id="local-6989586621680988611"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; Kinded uni ta -&gt; ShowS
</span><a href="#local-6989586621680988611"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span id="local-6989586621680988610"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988610"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-type">Kinded</span></a></span><span> </span><span id="local-6989586621680988606"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988606"><span class="hs-identifier hs-var">uni</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">$</span><span class="hs-special">(</span><span class="hs-identifier">makeShowsPrec</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Kinded</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988610"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AG uni (Esc a) -&gt; Kinded (AG uni) (Esc a)
forall k (uni :: * -&gt; *) (a :: k).
Typeable k =&gt;
uni (Esc a) -&gt; Kinded uni (Esc a)
</span><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-var">Kinded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">uni (Esc a) -&gt; AG uni (Esc a)
forall {k} (f :: k -&gt; *) (a :: k). f a -&gt; AG f a
</span><a href="Universe.Core.html#AG"><span class="hs-identifier hs-var">AG</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988606"><span class="hs-identifier hs-var">uni</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989078"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989078"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Kinded"><span class="hs-identifier hs-type">Kinded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989078"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621680988584"><span class="annot"><span class="annottext">gshowsPrec :: forall a. Int -&gt; Kinded uni a -&gt; ShowS
</span><a href="#local-6989586621680988584"><span class="hs-identifier hs-var hs-var hs-var hs-var">gshowsPrec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Kinded uni a -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">showsPrec</span></a></span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989075"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989075"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989075"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989075"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989075"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-719"></span><span>    </span><span id="local-6989586621680988576"><span class="annot"><span class="annottext">gshowsPrec :: forall a. Int -&gt; ValueOf uni a -&gt; ShowS
</span><a href="#local-6989586621680988576"><span class="hs-identifier hs-var hs-var hs-var hs-var">gshowsPrec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ValueOf uni a -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">showsPrec</span></a></span><span>
</span><span id="line-720"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988571"><span id="local-6989586621680988573"><span id="local-6989586621680989072"><span id="local-6989586621680989073"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989073"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989073"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989073"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989073"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989072"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-721"></span><span>    </span><span id="local-6989586621680988568"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; ValueOf uni a -&gt; ShowS
</span><a href="#local-6989586621680988568"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span id="local-6989586621680988567"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988567"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988566"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988566"><span class="hs-identifier hs-var">uni</span></a></span></span><span> </span><span id="local-6989586621680988565"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988565"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-722"></span><span>        </span><span class="annot"><span class="annottext">Proxy Show -&gt; uni (Esc a) -&gt; (Show a =&gt; ShowS) -&gt; ShowS
forall (uni :: * -&gt; *) (constr :: * -&gt; Constraint)
       (proxy :: (* -&gt; Constraint) -&gt; *) a r.
(Closed uni, Everywhere uni constr) =&gt;
proxy constr -&gt; uni (Esc a) -&gt; (constr a =&gt; r) -&gt; r
</span><a href="Universe.Core.html#bring"><span class="hs-identifier hs-var">bring</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall {t :: * -&gt; Constraint}. Proxy t
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988566"><span class="hs-identifier hs-var">uni</span></a></span><span> </span><span class="annot"><span class="annottext">((Show a =&gt; ShowS) -&gt; ShowS) -&gt; (Show a =&gt; ShowS) -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">$</span><span class="hs-special">(</span><span class="hs-identifier">makeShowsPrec</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ValueOf</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680988567"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AG uni (Esc a) -&gt; a -&gt; ValueOf (AG uni) a
forall (uni :: * -&gt; *) a. uni (Esc a) -&gt; a -&gt; ValueOf uni a
</span><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-var">ValueOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">uni (Esc a) -&gt; AG uni (Esc a)
forall {k} (f :: k -&gt; *) (a :: k). f a -&gt; AG f a
</span><a href="Universe.Core.html#AG"><span class="hs-identifier hs-var">AG</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988566"><span class="hs-identifier hs-var">uni</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988565"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="hs-comment">-------------------- 'Eq' / 'GEq'</span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989059"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989059"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989059"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989059"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989059"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-727"></span><span>    </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988545"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988545"><span class="hs-identifier hs-var">uni1</span></a></span></span><span> </span><span id="local-6989586621680988544"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988544"><span class="hs-identifier hs-var">x1</span></a></span></span><span> </span><span id="local-6989586621680988543"><span class="annot"><span class="annottext">geq :: forall a b. ValueOf uni a -&gt; ValueOf uni b -&gt; Maybe (a :~: b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var hs-var hs-var hs-var">`geq`</span></a></span></span><span> </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988541"><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621680988541"><span class="hs-identifier hs-var">uni2</span></a></span></span><span> </span><span id="local-6989586621680988540"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680988540"><span class="hs-identifier hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-728"></span><span>        </span><span class="annot"><span class="annottext">Esc a :~: Esc b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988545"><span class="hs-identifier hs-var">uni1</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; uni (Esc b) -&gt; Maybe (Esc a :~: Esc b)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
GEq f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var">`geq`</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621680988541"><span class="hs-identifier hs-var">uni2</span></a></span><span>
</span><span id="line-729"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">guard</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Maybe ()) -&gt; Bool -&gt; Maybe ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy Eq -&gt; uni (Esc a) -&gt; (Eq a =&gt; Bool) -&gt; Bool
forall (uni :: * -&gt; *) (constr :: * -&gt; Constraint)
       (proxy :: (* -&gt; Constraint) -&gt; *) a r.
(Closed uni, Everywhere uni constr) =&gt;
proxy constr -&gt; uni (Esc a) -&gt; (constr a =&gt; r) -&gt; r
</span><a href="Universe.Core.html#bring"><span class="hs-identifier hs-var">bring</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall {t :: * -&gt; Constraint}. Proxy t
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988545"><span class="hs-identifier hs-var">uni1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988544"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
b
</span><a href="#local-6989586621680988540"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>        </span><span class="annot"><span class="annottext">(a :~: b) -&gt; Maybe (a :~: b)
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">a :~: b
forall {k} (a :: k). a :~: a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988528"><span id="local-6989586621680989051"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989051"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989051"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988526"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988526"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680988525"><span class="annot"><span class="annottext">== :: SomeTypeIn uni -&gt; SomeTypeIn uni -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988523"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988523"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988526"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; uni (Esc a) -&gt; Bool
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
GEq f =&gt;
f a -&gt; f b -&gt; Bool
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var">`defaultEq`</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988523"><span class="hs-identifier hs-var">a2</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988519"><span id="local-6989586621680989041"><span id="local-6989586621680989042"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989042"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989042"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989042"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989042"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989041"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-736"></span><span>    </span><span id="local-6989586621680988516"><span class="annot"><span class="annottext">== :: ValueOf uni a -&gt; ValueOf uni a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(==)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValueOf uni a -&gt; ValueOf uni a -&gt; Bool
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
GEq f =&gt;
f a -&gt; f b -&gt; Bool
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">defaultEq</span></a></span><span>
</span><span id="line-737"></span><span>
</span><span id="line-738"></span><span class="hs-comment">-------------------- 'Compare' / 'GCompare'</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989034"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GCompare</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989034"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989034"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989034"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989034"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-741"></span><span>            </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GCompare</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989034"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988503"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988503"><span class="hs-identifier hs-var">uni1</span></a></span></span><span> </span><span id="local-6989586621680988502"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988502"><span class="hs-identifier hs-var">x1</span></a></span></span><span> </span><span id="local-6989586621680988501"><span class="annot"><span class="annottext">gcompare :: forall a b. ValueOf uni a -&gt; ValueOf uni b -&gt; GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var hs-var hs-var hs-var">`gcompare`</span></a></span></span><span> </span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988499"><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621680988499"><span class="hs-identifier hs-var">uni2</span></a></span></span><span> </span><span id="local-6989586621680988498"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680988498"><span class="hs-identifier hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-743"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988503"><span class="hs-identifier hs-var">uni1</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; uni (Esc b) -&gt; GOrdering (Esc a) (Esc b)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
GCompare f =&gt;
f a -&gt; f b -&gt; GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var">`gcompare`</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621680988499"><span class="hs-identifier hs-var">uni2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-744"></span><span>            </span><span class="annot"><span class="annottext">GOrdering (Esc a) (Esc b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GLT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GLT</span></a></span><span>
</span><span id="line-745"></span><span>            </span><span class="annot"><span class="annottext">GOrdering (Esc a) (Esc b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GGT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GGT</span></a></span><span>
</span><span id="line-746"></span><span>            </span><span class="annot"><span class="annottext">GOrdering (Esc a) (Esc b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GEQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-747"></span><span>                </span><span class="annot"><span class="annottext">Proxy Ord
-&gt; uni (Esc a) -&gt; (Ord a =&gt; GOrdering a b) -&gt; GOrdering a b
forall (uni :: * -&gt; *) (constr :: * -&gt; Constraint)
       (proxy :: (* -&gt; Constraint) -&gt; *) a r.
(Closed uni, Everywhere uni constr) =&gt;
proxy constr -&gt; uni (Esc a) -&gt; (constr a =&gt; r) -&gt; r
</span><a href="Universe.Core.html#bring"><span class="hs-identifier hs-var">bring</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall {t :: * -&gt; Constraint}. Proxy t
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988503"><span class="hs-identifier hs-var">uni1</span></a></span><span> </span><span class="annot"><span class="annottext">((Ord a =&gt; GOrdering a b) -&gt; GOrdering a b)
-&gt; (Ord a =&gt; GOrdering a b) -&gt; GOrdering a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988502"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">`compare`</span></a></span><span> </span><span class="annot"><span class="annottext">a
b
</span><a href="#local-6989586621680988498"><span class="hs-identifier hs-var">x2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-748"></span><span>                    </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">EQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k). GOrdering a a
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GEQ</span></a></span><span>
</span><span id="line-749"></span><span>                    </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">LT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GLT</span></a></span><span>
</span><span id="line-750"></span><span>                    </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">GT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GOrdering a b
forall {k} (a :: k) (b :: k). GOrdering a b
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">GGT</span></a></span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988473"><span id="local-6989586621680988475"><span id="local-6989586621680988477"><span id="local-6989586621680988479"><span id="local-6989586621680988481"><span id="local-6989586621680988483"><span id="local-6989586621680989028"><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GCompare</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989028"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989028"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-753"></span><span>    </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988471"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988471"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621680988470"><span class="annot"><span class="annottext">compare :: SomeTypeIn uni -&gt; SomeTypeIn uni -&gt; Ordering
</span><a href="#local-6989586621680988470"><span class="hs-operator hs-var hs-var hs-var hs-var">`compare`</span></a></span></span><span> </span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988468"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988468"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988471"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; uni (Esc a) -&gt; Ordering
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
GCompare f =&gt;
f a -&gt; f b -&gt; Ordering
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var">`defaultCompare`</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988468"><span class="hs-identifier hs-var">a2</span></a></span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span class="hs-comment">-- We need the 'Eq' constraint in order for @Ord (ValueOf uni a)@ to imply @Eq (ValueOf uni a)@.</span><span>
</span><span id="line-756"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988451"><span id="local-6989586621680988453"><span id="local-6989586621680988455"><span id="local-6989586621680988457"><span id="local-6989586621680988459"><span id="local-6989586621680988461"><span id="local-6989586621680989018"><span id="local-6989586621680989019"><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GCompare</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989019"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989019"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989019"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989019"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-757"></span><span>            </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989019"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989018"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621680988447"><span class="annot"><span class="annottext">compare :: ValueOf uni a -&gt; ValueOf uni a -&gt; Ordering
</span><a href="#local-6989586621680988447"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValueOf uni a -&gt; ValueOf uni a -&gt; Ordering
forall {k} (f :: k -&gt; *) (a :: k) (b :: k).
GCompare f =&gt;
f a -&gt; f b -&gt; Ordering
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">defaultCompare</span></a></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span class="hs-comment">-------------------- 'NFData'</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989011"><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989011"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989011"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GNFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989011"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-763"></span><span>    </span><span id="local-6989586621680988439"><span class="annot"><span class="annottext">grnf :: forall a. ValueOf uni a -&gt; ()
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">grnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621680988437"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988437"><span class="hs-identifier hs-var">uni</span></a></span></span><span> </span><span id="local-6989586621680988436"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988436"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy NFData -&gt; uni (Esc a) -&gt; (NFData a =&gt; ()) -&gt; ()
forall (uni :: * -&gt; *) (constr :: * -&gt; Constraint)
       (proxy :: (* -&gt; Constraint) -&gt; *) a r.
(Closed uni, Everywhere uni constr) =&gt;
proxy constr -&gt; uni (Esc a) -&gt; (constr a =&gt; r) -&gt; r
</span><a href="Universe.Core.html#bring"><span class="hs-identifier hs-var">bring</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
forall {t :: * -&gt; Constraint}. Proxy t
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988437"><span class="hs-identifier hs-var">uni</span></a></span><span> </span><span class="annot"><span class="annottext">((NFData a =&gt; ()) -&gt; ()) -&gt; (NFData a =&gt; ()) -&gt; ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680988436"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680989007"><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989007"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989007"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-766"></span><span>    </span><span id="local-6989586621680988428"><span class="annot"><span class="annottext">rnf :: SomeTypeIn uni -&gt; ()
</span><a href="#local-6989586621680988428"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#SomeTypeIn"><span class="hs-identifier hs-type">SomeTypeIn</span></a></span><span> </span><span id="local-6989586621680988422"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988422"><span class="hs-identifier hs-var">uni</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; ()) -&gt; [Int] -&gt; ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; [Int]
forall (uni :: * -&gt; *) a. Closed uni =&gt; uni a -&gt; [Int]
</span><a href="Universe.Core.html#encodeUni"><span class="hs-identifier hs-var">encodeUni</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621680988422"><span class="hs-identifier hs-var">uni</span></a></span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680988999"><span id="local-6989586621680989000"><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Closed"><span class="hs-identifier hs-type">Closed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989000"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680989000"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Everywhere"><span class="hs-operator hs-type">`Everywhere`</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680989000"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680988999"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-769"></span><span>    </span><span id="local-6989586621680988415"><span class="annot"><span class="annottext">rnf :: ValueOf uni a -&gt; ()
</span><a href="#local-6989586621680988415"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValueOf uni a -&gt; ()
forall k (f :: k -&gt; *) (a :: k). GNFData f =&gt; f a -&gt; ()
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">grnf</span></a></span><span>
</span><span id="line-770"></span></pre></body></html>