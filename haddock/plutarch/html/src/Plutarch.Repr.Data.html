<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Repr.Data</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-6"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier">PDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier">PDataStruct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataStruct%3APDataStruct"><span class="hs-identifier">unPDataStruct</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier">PDataRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier">PDataRec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataRec%3APDataRec"><span class="hs-identifier">unPDataRec</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier">DeriveAsDataRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier">DeriveAsDataRec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#%24sel%3AunDeriveAsDataRec%3ADeriveAsDataRec"><span class="hs-identifier">unDeriveAsDataRec</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier">DeriveAsDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier">DeriveAsDataStruct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#%24sel%3AunDeriveAsDataStruct%3ADeriveAsDataStruct"><span class="hs-identifier">unDeriveAsDataStruct</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exts.html"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Generics.SOP</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-identifier">All</span></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><span class="hs-identifier">All2</span></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-identifier">Code</span></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><span class="hs-identifier">K</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">K</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-identifier">NP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Nil</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:*)</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><span class="hs-identifier">NS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Z</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><span class="hs-identifier">SListI</span></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-identifier">SListI2</span></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><span class="hs-identifier">SOP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SOP</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Generics.SOP</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SOP</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Generics.SOP.Constraint</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Head</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html"><span class="hs-identifier">Plutarch.Builtin.Data</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier">PBuiltinList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier">PData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#pasConstr"><span class="hs-identifier">pasConstr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#pconsBuiltin"><span class="hs-identifier">pconsBuiltin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#pconstrBuiltin"><span class="hs-identifier">pconstrBuiltin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#pfstBuiltin"><span class="hs-identifier">pfstBuiltin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Plutarch.Builtin.Data.html#psndBuiltin"><span class="hs-identifier">psndBuiltin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Eq.html"><span class="hs-identifier">Plutarch.Internal.Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Eq.html#PEq"><span class="hs-identifier">PEq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Eq.html#%23%3D%3D"><span class="hs-operator">(#==)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.IsData.html"><span class="hs-identifier">Plutarch.Internal.IsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.IsData.html#PInnermostIsData"><span class="hs-identifier">PInnermostIsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.IsData.html#PIsData"><span class="hs-identifier">PIsData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html"><span class="hs-identifier">Plutarch.Internal.Lift</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.ListLike.html"><span class="hs-identifier">Plutarch.Internal.ListLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ListLike.html#phead"><span class="hs-identifier">phead</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.ListLike.html#ptail"><span class="hs-identifier">ptail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Other.html"><span class="hs-identifier">Plutarch.Internal.Other</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Other.html#pto"><span class="hs-identifier">pto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.PLam.html"><span class="hs-identifier">Plutarch.Internal.PLam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.PLam.html#plam"><span class="hs-identifier">plam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html"><span class="hs-identifier">Plutarch.Internal.PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier">PContravariant'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27%27"><span class="hs-identifier">PContravariant''</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier">PCovariant'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27%27"><span class="hs-identifier">PCovariant''</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier">PInner</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier">PVariant'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27%27"><span class="hs-identifier">PVariant''</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier">PlutusType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier">pcon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier">pcon'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier">pmatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier">pmatch'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html"><span class="hs-identifier">Plutarch.Internal.Term</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#InternalConfig"><span class="hs-identifier">InternalConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier">S</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier">Term</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#pgetInternalConfig"><span class="hs-identifier">pgetInternalConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#phoistAcyclic"><span class="hs-identifier">phoistAcyclic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#plet"><span class="hs-identifier">plet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#pplaceholder"><span class="hs-identifier">pplaceholder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier">punsafeCoerce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#pwithInternalConfig"><span class="hs-identifier">pwithInternalConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator">(#)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#%23%24"><span class="hs-operator">(#$)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html"><span class="hs-identifier">Plutarch.Repr.Internal</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier">PRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier">PRec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#%24sel%3AunPRec%3APRec"><span class="hs-identifier">unPRec</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier">PStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier">PStruct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#%24sel%3AunPStruct%3APStruct"><span class="hs-identifier">unPStruct</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecAsHaskell"><span class="hs-identifier">RecAsHaskell</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecTypePrettyError"><span class="hs-identifier">RecTypePrettyError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#StructSameRepr"><span class="hs-identifier">StructSameRepr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermRec"><span class="hs-identifier">UnTermRec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermStruct"><span class="hs-identifier">UnTermStruct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#groupHandlers"><span class="hs-identifier">groupHandlers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.TermCont.html"><span class="hs-identifier">Plutarch.TermCont</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.TermCont.html#pfindAllPlaceholders"><span class="hs-identifier">pfindAllPlaceholders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.TermCont.html#pletC"><span class="hs-identifier">pletC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.TermCont.html#unTermCont"><span class="hs-identifier">unTermCont</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLA</span></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">type</span><span> </span><span id="PInnermostIsDataDataRepr"><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-var">PInnermostIsDataDataRepr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.IsData.html#PInnermostIsData"><span class="hs-identifier hs-type">PInnermostIsData</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Data representation can only hold types whose inner most representation is PData&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">newtype</span><span> </span><span id="PDataStruct"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-var">PDataStruct</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655698"><span class="annot"><a href="#local-6989586621679655698"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655699"><span class="annot"><a href="#local-6989586621679655699"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PDataStruct"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-var">PDataStruct</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPDataStruct%3APDataStruct"><span class="annot"><span class="annottext">forall (struct :: [[S -&gt; Type]]) (s :: S).
PDataStruct struct s -&gt; PStruct struct s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataStruct%3APDataStruct"><span class="hs-identifier hs-var hs-var">unPDataStruct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655698"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655699"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">newtype</span><span> </span><span id="PDataRec"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-var">PDataRec</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655704"><span class="annot"><a href="#local-6989586621679655704"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655705"><span class="annot"><a href="#local-6989586621679655705"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PDataRec"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-var">PDataRec</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPDataRec%3APDataRec"><span class="annot"><span class="annottext">forall (struct :: [S -&gt; Type]) (s :: S).
PDataRec struct s -&gt; PRec struct s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataRec%3APDataRec"><span class="hs-identifier hs-var hs-var">unPDataRec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655704"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655705"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655721"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SListI2</span></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier hs-var">PInner</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PCovariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-var">PCovariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27%27"><span class="hs-identifier hs-type">PCovariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PContravariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-var">PContravariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27%27"><span class="hs-identifier hs-type">PContravariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PVariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-var">PVariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27%27"><span class="hs-identifier hs-type">PVariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655721"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span id="local-6989586621679656229"><span class="annot"><span class="annottext">pcon' :: forall (s :: S).
PDataStruct struct s -&gt; Term s (PInner (PDataStruct struct))
</span><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pcon'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span id="local-6989586621679656230"><span class="annot"><span class="annottext">PStruct struct s
</span><a href="#local-6989586621679656230"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct) -&gt; Term s (PInner (PDataStruct struct))
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PDataStruct struct)
 -&gt; Term s (PInner (PDataStruct struct)))
-&gt; Term s (PDataStruct struct)
-&gt; Term s (PInner (PDataStruct struct))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct struct s -&gt; Term s (PDataStruct struct)
forall (struct :: [[S -&gt; Type]]) (s :: S).
(SListI2 @(S -&gt; Type) struct,
 All2 @(S -&gt; Type) PInnermostIsDataDataRepr struct) =&gt;
PStruct struct s -&gt; Term s (PDataStruct struct)
</span><a href="Plutarch.Repr.Data.html#pconDataStruct"><span class="hs-identifier hs-var">pconDataStruct</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct struct s
</span><a href="#local-6989586621679656230"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621679656233"><span class="annot"><span class="annottext">pmatch' :: forall (s :: S) (b :: S -&gt; Type).
Term s (PInner (PDataStruct struct))
-&gt; (PDataStruct struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pmatch'</span></a></span></span><span> </span><span id="local-6989586621679656234"><span class="annot"><span class="annottext">Term s (PInner (PDataStruct struct))
</span><a href="#local-6989586621679656234"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656235"><span class="annot"><span class="annottext">PDataStruct struct s -&gt; Term s b
</span><a href="#local-6989586621679656235"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct)
-&gt; (PStruct struct s -&gt; Term s b) -&gt; Term s b
forall (struct :: [[S -&gt; Type]]) (b :: S -&gt; Type) (s :: S).
All2 @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
Term s (PDataStruct struct)
-&gt; (PStruct struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Repr.Data.html#pmatchDataStruct"><span class="hs-identifier hs-var">pmatchDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PInner (PDataStruct struct)) -&gt; Term s (PDataStruct struct)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PDataStruct struct))
</span><a href="#local-6989586621679656234"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PDataStruct struct s -&gt; Term s b
</span><a href="#local-6989586621679656235"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(PDataStruct struct s -&gt; Term s b)
-&gt; (PStruct struct s -&gt; PDataStruct struct s)
-&gt; PStruct struct s
-&gt; Term s b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct struct s -&gt; PDataStruct struct s
forall (struct :: [[S -&gt; Type]]) (s :: S).
PStruct struct s -&gt; PDataStruct struct s
</span><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-var">PDataStruct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655742"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SListI</span></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier hs-var">PInner</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PCovariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-var">PCovariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27%27"><span class="hs-identifier hs-type">PCovariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PContravariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-var">PContravariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27%27"><span class="hs-identifier hs-type">PContravariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PVariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-var">PVariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27%27"><span class="hs-identifier hs-type">PVariant''</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655742"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621679656244"><span class="annot"><span class="annottext">pcon' :: forall (s :: S).
PDataRec struct s -&gt; Term s (PInner (PDataRec struct))
</span><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pcon'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span id="local-6989586621679656245"><span class="annot"><span class="annottext">PRec struct s
</span><a href="#local-6989586621679656245"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; Term s (PInner (PDataRec struct))
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PDataRec struct) -&gt; Term s (PInner (PDataRec struct)))
-&gt; Term s (PDataRec struct) -&gt; Term s (PInner (PDataRec struct))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; Term s (PDataRec struct)
forall (struct :: [S -&gt; Type]) (s :: S).
All @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
PRec struct s -&gt; Term s (PDataRec struct)
</span><a href="Plutarch.Repr.Data.html#pconDataRec"><span class="hs-identifier hs-var">pconDataRec</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s
</span><a href="#local-6989586621679656245"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621679656248"><span class="annot"><span class="annottext">pmatch' :: forall (s :: S) (b :: S -&gt; Type).
Term s (PInner (PDataRec struct))
-&gt; (PDataRec struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pmatch'</span></a></span></span><span> </span><span id="local-6989586621679656249"><span class="annot"><span class="annottext">Term s (PInner (PDataRec struct))
</span><a href="#local-6989586621679656249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656250"><span class="annot"><span class="annottext">PDataRec struct s -&gt; Term s b
</span><a href="#local-6989586621679656250"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; (PRec struct s -&gt; Term s b) -&gt; Term s b
forall (struct :: [S -&gt; Type]) (b :: S -&gt; Type) (s :: S).
All @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
Term s (PDataRec struct) -&gt; (PRec struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Repr.Data.html#pmatchDataRec"><span class="hs-identifier hs-var">pmatchDataRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PInner (PDataRec struct)) -&gt; Term s (PDataRec struct)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PDataRec struct))
</span><a href="#local-6989586621679656249"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PDataRec struct s -&gt; Term s b
</span><a href="#local-6989586621679656250"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(PDataRec struct s -&gt; Term s b)
-&gt; (PRec struct s -&gt; PDataRec struct s)
-&gt; PRec struct s
-&gt; Term s b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; PDataRec struct s
forall (struct :: [S -&gt; Type]) (s :: S).
PRec struct s -&gt; PDataRec struct s
</span><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-var">PDataRec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655756"><span class="annot"><a href="Plutarch.Internal.Eq.html#PEq"><span class="hs-identifier hs-type">PEq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655756"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621679656258"><span class="annot"><span class="annottext">Term s (PDataStruct struct)
</span><a href="#local-6989586621679656258"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679656259"><span class="annot"><span class="annottext">#== :: forall (s :: S).
Term s (PDataStruct struct)
-&gt; Term s (PDataStruct struct) -&gt; Term s PBool
</span><a href="Plutarch.Internal.Eq.html#%23%3D%3D"><span class="hs-operator hs-var hs-var hs-var hs-var">#==</span></a></span></span><span> </span><span id="local-6989586621679656260"><span class="annot"><span class="annottext">Term s (PDataStruct struct)
</span><a href="#local-6989586621679656260"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct) -&gt; Term s (PInner (PDataStruct struct))
forall (s :: S) (a :: S -&gt; Type). Term s a -&gt; Term s (PInner a)
</span><a href="Plutarch.Internal.Other.html#pto"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct)
</span><a href="#local-6989586621679656258"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PDataStruct struct))
-&gt; Term s (PInner (PDataStruct struct)) -&gt; Term s PBool
forall (s :: S).
Term s (PInner (PDataStruct struct))
-&gt; Term s (PInner (PDataStruct struct)) -&gt; Term s PBool
forall (t :: S -&gt; Type) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="Plutarch.Internal.Eq.html#%23%3D%3D"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct) -&gt; Term s (PInner (PDataStruct struct))
forall (s :: S) (a :: S -&gt; Type). Term s a -&gt; Term s (PInner a)
</span><a href="Plutarch.Internal.Other.html#pto"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataStruct struct)
</span><a href="#local-6989586621679656260"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-116"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655762"><span class="annot"><a href="Plutarch.Internal.Eq.html#PEq"><span class="hs-identifier hs-type">PEq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655762"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621679656280"><span class="annot"><span class="annottext">Term s (PDataRec struct)
</span><a href="#local-6989586621679656280"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679656281"><span class="annot"><span class="annottext">#== :: forall (s :: S).
Term s (PDataRec struct)
-&gt; Term s (PDataRec struct) -&gt; Term s PBool
</span><a href="Plutarch.Internal.Eq.html#%23%3D%3D"><span class="hs-operator hs-var hs-var hs-var hs-var">#==</span></a></span></span><span> </span><span id="local-6989586621679656282"><span class="annot"><span class="annottext">Term s (PDataRec struct)
</span><a href="#local-6989586621679656282"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; Term s (PInner (PDataRec struct))
forall (s :: S) (a :: S -&gt; Type). Term s a -&gt; Term s (PInner a)
</span><a href="Plutarch.Internal.Other.html#pto"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct)
</span><a href="#local-6989586621679656280"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PDataRec struct))
-&gt; Term s (PInner (PDataRec struct)) -&gt; Term s PBool
forall (s :: S).
Term s (PInner (PDataRec struct))
-&gt; Term s (PInner (PDataRec struct)) -&gt; Term s PBool
forall (t :: S -&gt; Type) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><a href="Plutarch.Internal.Eq.html#%23%3D%3D"><span class="hs-operator hs-var">#==</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; Term s (PInner (PDataRec struct))
forall (s :: S) (a :: S -&gt; Type). Term s a -&gt; Term s (PInner a)
</span><a href="Plutarch.Internal.Other.html#pto"><span class="hs-identifier hs-var">pto</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct)
</span><a href="#local-6989586621679656282"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655787"><span id="local-6989586621679656284"><span id="local-6989586621679656290"><span class="annot"><a href="Plutarch.Internal.IsData.html#PIsData"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655787"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-123"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679655789"><span id="local-6989586621679656312"><span id="local-6989586621679656318"><span class="annot"><a href="Plutarch.Internal.IsData.html#PIsData"><span class="hs-identifier hs-type">PIsData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655789"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><span class="hs-comment">{- |
@DeriveAsDataRec@ derives @PlutusType@ instances for given type as builtin list of Data. Unlike @PDataAsDataStruct@ above, this will
encode data as @List@. Similarly, only types with its innermost representation @PData@ is allowed for its fields.

One major difference is that @DeriveAsDataRec@ only allows single constructor as it does not encode the constructor index. When
attempted to use this strategy to a type with more than one constructor will result in type error with detailed explanation of the issue.

@PInner@ of defined type will be @PDataRec (struct :: [S -&gt; Type])@ where @struct@ is product type of its structure. @PInner@ of @PDataRec struct@
is @PBuiltinList PData@.

It is almost always better to use @DeriveAsDataRec@ over @DeriveAsDataStruct@ when data type only have one constructor as it is more efficient
to work with on-chain. However, Plith(previously PlutusTx), by default, derives every datatype to use @Constr@. So, if a Plutarch type needs to remain
compatible with type defined in Plith, one needs to use @DeriveAsDataStruct@. This is why many single-constructor types are derived using
@DeriveAsDataStruct@ on plutarch-ledger-api.

Consult example below for defining custom data-encoded datatype:
@@
data PBobData (a :: S -&gt; Type) (s :: S)
  = PBobData (Term s (PAsData a)) (Term s (PAsData PBool))
  deriving stock (Generic)
  deriving anyclass (SOP.Generic)
  deriving PlutusType via (DeriveAsDataRec (PBobData a))

pcon $ PBobData (pdata 10) (pdata pfalse) -- [#10, #false]
@@

 @since 1.10.0
-}</span></span><span>
</span><span id="line-153"></span><span class="hs-keyword">newtype</span><span> </span><span id="DeriveAsDataRec"><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-var">DeriveAsDataRec</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655790"><span class="annot"><a href="#local-6989586621679655790"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679655791"><span class="annot"><a href="#local-6989586621679655791"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeriveAsDataRec"><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-var">DeriveAsDataRec</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunDeriveAsDataRec%3ADeriveAsDataRec"><span class="annot"><span class="annottext">forall (a :: S -&gt; Type) (s :: S). DeriveAsDataRec a s -&gt; a s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunDeriveAsDataRec%3ADeriveAsDataRec"><span class="hs-identifier hs-var hs-var">unDeriveAsDataRec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679655790"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655791"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655804"><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655805"><span class="annot"><a href="#local-6989586621679655805"><span class="hs-identifier hs-type">struct'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655806"><span class="annot"><a href="#local-6989586621679655806"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.Generic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679655805"><span class="hs-identifier hs-type">struct'</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Code</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679655806"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermRec"><span class="hs-identifier hs-type">UnTermRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655805"><span class="hs-identifier hs-type">struct'</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655806"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SListI</span></span><span> </span><span class="annot"><a href="#local-6989586621679655806"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679655801"><span class="annot"><a href="#local-6989586621679655801"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#StructSameRepr"><span class="hs-identifier hs-type">StructSameRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655801"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679655806"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecTypePrettyError"><span class="hs-identifier hs-type">RecTypePrettyError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Code</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier hs-var">PInner</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermRec"><span class="hs-identifier hs-type">UnTermRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Head</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Code</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PCovariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-var">PCovariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-type">PCovariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PContravariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-var">PContravariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-type">PContravariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PVariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-var">PVariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-type">PVariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655804"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span id="local-6989586621679656352"><span class="annot"><span class="annottext">pcon' :: forall (s :: S).
DeriveAsDataRec a s -&gt; Term s (PInner (DeriveAsDataRec a))
</span><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pcon'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-type">DeriveAsDataRec</span></a></span><span> </span><span id="local-6989586621679656353"><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679656353"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">PInner (DeriveAsDataRec a) s -&gt; Term s (PInner (DeriveAsDataRec a))
forall (a :: S -&gt; Type) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">(PInner (DeriveAsDataRec a) s
 -&gt; Term s (PInner (DeriveAsDataRec a)))
-&gt; PInner (DeriveAsDataRec a) s
-&gt; Term s (PInner (DeriveAsDataRec a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; PDataRec struct s
forall (struct :: [S -&gt; Type]) (s :: S).
PRec struct s -&gt; PDataRec struct s
</span><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-var">PDataRec</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec struct s -&gt; PDataRec struct s)
-&gt; PRec struct s -&gt; PDataRec struct s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s)
-&gt; NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS
  @[S -&gt; Type]
  (NP @(S -&gt; Type) (Term s))
  ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; NP @(S -&gt; Type) (Term s) struct
forall {k} (f :: k -&gt; Type) (x :: k).
NS @k f ((':) @k x ('[] @k)) -&gt; f x
</span><span class="hs-identifier hs-var">SOP.unZ</span></span><span> </span><span class="annot"><span class="annottext">(NS
   @[S -&gt; Type]
   (NP @(S -&gt; Type) (Term s))
   ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
 -&gt; NP @(S -&gt; Type) (Term s) struct)
-&gt; NS
     @[S -&gt; Type]
     (NP @(S -&gt; Type) (Term s))
     ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; NP @(S -&gt; Type) (Term s) struct
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP
  @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; NS
     @[S -&gt; Type]
     (NP @(S -&gt; Type) (Term s))
     ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall {k} (f :: k -&gt; Type) (xss :: [[k]]).
SOP @k f xss -&gt; NS @[k] (NP @k f) xss
</span><span class="hs-identifier hs-var">SOP.unSOP</span></span><span> </span><span class="annot"><span class="annottext">(SOP
   @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
 -&gt; NS
      @[S -&gt; Type]
      (NP @(S -&gt; Type) (Term s))
      ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; SOP
     @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; NS
     @[S -&gt; Type]
     (NP @(S -&gt; Type) (Term s))
     ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @Type I (Code (a s))
-&gt; SOP
     @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall k1 l1 k2 l2 (h1 :: (k1 -&gt; Type) -&gt; l1 -&gt; Type)
       (h2 :: (k2 -&gt; Type) -&gt; l2 -&gt; Type) (f :: k1 -&gt; Type)
       (g :: k2 -&gt; Type) (xs :: l1) (ys :: l2).
(HTrans @k1 @l1 @k2 @l2 h1 h2,
 AllZipN
   @k1
   @l1
   @k1
   @k2
   @l1
   @l2
   (Prod @k1 @l1 h1)
   (LiftedCoercible @k1 @Type @k2 f g)
   xs
   ys) =&gt;
h1 f xs -&gt; h2 g ys
forall (f :: Type -&gt; Type) (g :: (S -&gt; Type) -&gt; Type)
       (xs :: [[Type]]) (ys :: [[S -&gt; Type]]).
AllZipN
  @Type
  @[[Type]]
  @Type
  @(S -&gt; Type)
  @[[Type]]
  @[[S -&gt; Type]]
  (Prod @Type @[[Type]] (SOP @Type))
  (LiftedCoercible @Type @Type @(S -&gt; Type) f g)
  xs
  ys =&gt;
SOP @Type f xs -&gt; SOP @(S -&gt; Type) g ys
</span><span class="hs-identifier hs-var">SOP.hcoerce</span></span><span> </span><span class="annot"><span class="annottext">(SOP @Type I (Code (a s))
 -&gt; SOP
      @(S -&gt; Type)
      (Term s)
      ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; SOP @Type I (Code (a s))
-&gt; SOP
     @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a s -&gt; SOP @Type I (Code (a s))
forall a. Generic a =&gt; a -&gt; Rep a
</span><span class="hs-identifier hs-var">SOP.from</span></span><span> </span><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679656353"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span id="local-6989586621679656364"><span class="annot"><span class="annottext">pmatch' :: forall (s :: S) (b :: S -&gt; Type).
Term s (PInner (DeriveAsDataRec a))
-&gt; (DeriveAsDataRec a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pmatch'</span></a></span></span><span> </span><span id="local-6989586621679656365"><span class="annot"><span class="annottext">Term s (PInner (DeriveAsDataRec a))
</span><a href="#local-6989586621679656365"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656366"><span class="annot"><span class="annottext">DeriveAsDataRec a s -&gt; Term s b
</span><a href="#local-6989586621679656366"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="annottext">Term s (PInner (DeriveAsDataRec a))
-&gt; (PInner (DeriveAsDataRec a) s -&gt; Term s b) -&gt; Term s b
forall (a :: S -&gt; Type) (s :: S) (b :: S -&gt; Type).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (DeriveAsDataRec a))
</span><a href="#local-6989586621679656365"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeriveAsDataRec a s -&gt; Term s b
</span><a href="#local-6989586621679656366"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(DeriveAsDataRec a s -&gt; Term s b)
-&gt; (PDataRec struct s -&gt; DeriveAsDataRec a s)
-&gt; PDataRec struct s
-&gt; Term s b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a s -&gt; DeriveAsDataRec a s
forall (a :: S -&gt; Type) (s :: S). a s -&gt; DeriveAsDataRec a s
</span><a href="Plutarch.Repr.Data.html#DeriveAsDataRec"><span class="hs-identifier hs-var">DeriveAsDataRec</span></a></span><span> </span><span class="annot"><span class="annottext">(a s -&gt; DeriveAsDataRec a s)
-&gt; (PDataRec struct s -&gt; a s)
-&gt; PDataRec struct s
-&gt; DeriveAsDataRec a s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Rep (a s) -&gt; a s
forall a. Generic a =&gt; Rep a -&gt; a
</span><span class="hs-identifier hs-var">SOP.to</span></span><span> </span><span class="annot"><span class="annottext">(Rep (a s) -&gt; a s)
-&gt; (PDataRec struct s -&gt; Rep (a s)) -&gt; PDataRec struct s -&gt; a s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SOP
  @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; Rep (a s)
forall k1 l1 k2 l2 (h1 :: (k1 -&gt; Type) -&gt; l1 -&gt; Type)
       (h2 :: (k2 -&gt; Type) -&gt; l2 -&gt; Type) (f :: k1 -&gt; Type)
       (g :: k2 -&gt; Type) (xs :: l1) (ys :: l2).
(HTrans @k1 @l1 @k2 @l2 h1 h2,
 AllZipN
   @k1
   @l1
   @k1
   @k2
   @l1
   @l2
   (Prod @k1 @l1 h1)
   (LiftedCoercible @k1 @Type @k2 f g)
   xs
   ys) =&gt;
h1 f xs -&gt; h2 g ys
forall (f :: (S -&gt; Type) -&gt; Type) (g :: Type -&gt; Type)
       (xs :: [[S -&gt; Type]]) (ys :: [[Type]]).
AllZipN
  @(S -&gt; Type)
  @[[S -&gt; Type]]
  @(S -&gt; Type)
  @Type
  @[[S -&gt; Type]]
  @[[Type]]
  (Prod @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)))
  (LiftedCoercible @(S -&gt; Type) @Type @Type f g)
  xs
  ys =&gt;
SOP @(S -&gt; Type) f xs -&gt; SOP @Type g ys
</span><span class="hs-identifier hs-var">SOP.hcoerce</span></span><span> </span><span class="annot"><span class="annottext">(SOP
   @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
 -&gt; Rep (a s))
-&gt; (PDataRec struct s
    -&gt; SOP
         @(S -&gt; Type)
         (Term s)
         ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; PDataRec struct s
-&gt; Rep (a s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NS
  @[S -&gt; Type]
  (NP @(S -&gt; Type) (Term s))
  ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; SOP
     @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><span class="hs-identifier hs-var">SOP</span></span><span> </span><span class="annot"><span class="annottext">(NS
   @[S -&gt; Type]
   (NP @(S -&gt; Type) (Term s))
   ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
 -&gt; SOP
      @(S -&gt; Type)
      (Term s)
      ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; (PDataRec struct s
    -&gt; NS
         @[S -&gt; Type]
         (NP @(S -&gt; Type) (Term s))
         ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; PDataRec struct s
-&gt; SOP
     @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NS @k a ((':) @k x xs)
forall (a :: [S -&gt; Type] -&gt; Type) (x :: [S -&gt; Type])
       (xs :: [[S -&gt; Type]]).
a x -&gt; NS @[S -&gt; Type] a ((':) @[S -&gt; Type] x xs)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (Term s) struct
 -&gt; NS
      @[S -&gt; Type]
      (NP @(S -&gt; Type) (Term s))
      ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type])))
-&gt; (PDataRec struct s -&gt; NP @(S -&gt; Type) (Term s) struct)
-&gt; PDataRec struct s
-&gt; NS
     @[S -&gt; Type]
     (NP @(S -&gt; Type) (Term s))
     ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; NP @(S -&gt; Type) (Term s) struct
forall (struct :: [S -&gt; Type]) (s :: S).
PRec struct s -&gt; NP @(S -&gt; Type) (Term s) struct
</span><a href="Plutarch.Repr.Internal.html#%24sel%3AunPRec%3APRec"><span class="hs-identifier hs-var">unPRec</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec struct s -&gt; NP @(S -&gt; Type) (Term s) struct)
-&gt; (PDataRec struct s -&gt; PRec struct s)
-&gt; PDataRec struct s
-&gt; NP @(S -&gt; Type) (Term s) struct
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PDataRec struct s -&gt; PRec struct s
forall (struct :: [S -&gt; Type]) (s :: S).
PDataRec struct s -&gt; PRec struct s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataRec%3APDataRec"><span class="hs-identifier hs-var">unPDataRec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><span class="hs-comment">{- |
@DeriveAsDataStruct@ derives @PlutusType@ instances for the given type as Data structure, namely, using @Constr@ constructor
of the @Data@ type. Each constructor of the given type will have matching constructor index in the order of its definition.

Also, it is important to note that each fields can only contain term that has innermost representation of Data. Hence,
@PInteger@ is not allowed but @PAsData PInteger@ is allowed. Failure to follow this requirement will result in type error
with detailed explanation of the issue.

@PInner@ of defined type will be @PDataStruct (struct :: [[S -&gt; Type]])@ where @struct@ is SOP type of its structure. Since @PInner@ of
@PDataStruct@ is @PData@, multiple data encoded structure can be nested without being wrapped in @PAsData@.

Consult example below for defining custom data-encoded datatype:
@@
data PBobData (a :: S -&gt; Type) (s :: S)
  = PBobData (Term s (PAsData a)) (Term s (PAsData PBool))
  | PRobData (Term s (PAsData PByteString))
  deriving stock (Generic)
  deriving anyclass (SOP.Generic)
  deriving PlutusType via (DeriveAsDataStruct (PBobData a))

pcon $ PBobData (pdata 10) (pdata pfalse) -- Constr 0 [#10, #false]
pcon $ PRobData &quot;hello&quot; -- Constr 1 [#&quot;hello&quot;]
@@

 @since 1.10.0
-}</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">newtype</span><span> </span><span id="DeriveAsDataStruct"><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-var">DeriveAsDataStruct</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655859"><span class="annot"><a href="#local-6989586621679655859"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679655860"><span class="annot"><a href="#local-6989586621679655860"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DeriveAsDataStruct"><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-var">DeriveAsDataStruct</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunDeriveAsDataStruct%3ADeriveAsDataStruct"><span class="annot"><span class="annottext">forall (a :: S -&gt; Type) (s :: S). DeriveAsDataStruct a s -&gt; a s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunDeriveAsDataStruct%3ADeriveAsDataStruct"><span class="hs-identifier hs-var hs-var">unDeriveAsDataStruct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679655859"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655860"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="annot"><span class="hs-comment">-- | @since 1.10.0</span></span><span>
</span><span id="line-206"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655868"><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655869"><span class="annot"><a href="#local-6989586621679655869"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.Generic</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679655869"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermStruct"><span class="hs-identifier hs-type">UnTermStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655869"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SListI2</span></span><span> </span><span class="annot"><a href="#local-6989586621679655869"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679655867"><span class="annot"><a href="#local-6989586621679655867"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#StructSameRepr"><span class="hs-identifier hs-type">StructSameRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655867"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655869"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier hs-var">PInner</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermStruct"><span class="hs-identifier hs-type">UnTermStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PCovariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-var">PCovariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PCovariant%27"><span class="hs-identifier hs-type">PCovariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PContravariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-var">PContravariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PContravariant%27"><span class="hs-identifier hs-type">PContravariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PVariant%27"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-var">PVariant'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PVariant%27"><span class="hs-identifier hs-type">PVariant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621679656389"><span class="annot"><span class="annottext">pcon' :: forall (s :: S).
DeriveAsDataStruct a s -&gt; Term s (PInner (DeriveAsDataStruct a))
</span><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pcon'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-type">DeriveAsDataStruct</span></a></span><span> </span><span id="local-6989586621679656390"><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679656390"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermStruct"><span class="hs-identifier hs-type">UnTermStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PDataStruct (UnTermStruct (a (Any @S))) s
 -&gt; Term s (PDataStruct (UnTermStruct (a (Any @S)))))
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; Term s (PDataStruct (UnTermStruct (a (Any @S))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct (UnTermStruct (a (Any @S))) s
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
forall (struct :: [[S -&gt; Type]]) (s :: S).
PStruct struct s -&gt; PDataStruct struct s
</span><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-var">PDataStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(PStruct (UnTermStruct (a (Any @S))) s
 -&gt; PDataStruct (UnTermStruct (a (Any @S))) s)
-&gt; PStruct (UnTermStruct (a (Any @S))) s
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
-&gt; PStruct (UnTermStruct (a (Any @S))) s
forall (struct :: [[S -&gt; Type]]) (s :: S).
SOP @(S -&gt; Type) (Term s) struct -&gt; PStruct struct s
</span><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-var">PStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
 -&gt; PStruct (UnTermStruct (a (Any @S))) s)
-&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
-&gt; PStruct (UnTermStruct (a (Any @S))) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @Type I (Code (a s))
-&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
forall k1 l1 k2 l2 (h1 :: (k1 -&gt; Type) -&gt; l1 -&gt; Type)
       (h2 :: (k2 -&gt; Type) -&gt; l2 -&gt; Type) (f :: k1 -&gt; Type)
       (g :: k2 -&gt; Type) (xs :: l1) (ys :: l2).
(HTrans @k1 @l1 @k2 @l2 h1 h2,
 AllZipN
   @k1
   @l1
   @k1
   @k2
   @l1
   @l2
   (Prod @k1 @l1 h1)
   (LiftedCoercible @k1 @Type @k2 f g)
   xs
   ys) =&gt;
h1 f xs -&gt; h2 g ys
forall (f :: Type -&gt; Type) (g :: (S -&gt; Type) -&gt; Type)
       (xs :: [[Type]]) (ys :: [[S -&gt; Type]]).
AllZipN
  @Type
  @[[Type]]
  @Type
  @(S -&gt; Type)
  @[[Type]]
  @[[S -&gt; Type]]
  (Prod @Type @[[Type]] (SOP @Type))
  (LiftedCoercible @Type @Type @(S -&gt; Type) f g)
  xs
  ys =&gt;
SOP @Type f xs -&gt; SOP @(S -&gt; Type) g ys
</span><span class="hs-identifier hs-var">SOP.hcoerce</span></span><span> </span><span class="annot"><span class="annottext">(SOP @Type I (Code (a s))
 -&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S))))
-&gt; SOP @Type I (Code (a s))
-&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a s -&gt; SOP @Type I (Code (a s))
forall a. Generic a =&gt; a -&gt; Rep a
</span><span class="hs-identifier hs-var">SOP.from</span></span><span> </span><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679656390"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621679656397"><span class="annot"><span class="annottext">pmatch' :: forall (s :: S) (b :: S -&gt; Type).
Term s (PInner (DeriveAsDataStruct a))
-&gt; (DeriveAsDataStruct a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">pmatch'</span></a></span></span><span> </span><span id="local-6989586621679656398"><span class="annot"><span class="annottext">Term s (PInner (DeriveAsDataStruct a))
</span><a href="#local-6989586621679656398"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656399"><span class="annot"><span class="annottext">DeriveAsDataStruct a s -&gt; Term s b
</span><a href="#local-6989586621679656399"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type) (s :: S) (b :: S -&gt; Type).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#UnTermStruct"><span class="hs-identifier hs-type">UnTermStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655868"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Any"><span class="hs-identifier hs-type">Any</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PInner (DeriveAsDataStruct a))
Term s (PDataStruct (UnTermStruct (a (Any @S))))
</span><a href="#local-6989586621679656398"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeriveAsDataStruct a s -&gt; Term s b
</span><a href="#local-6989586621679656399"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(DeriveAsDataStruct a s -&gt; Term s b)
-&gt; (PDataStruct (UnTermStruct (a (Any @S))) s
    -&gt; DeriveAsDataStruct a s)
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; Term s b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a s -&gt; DeriveAsDataStruct a s
forall (a :: S -&gt; Type) (s :: S). a s -&gt; DeriveAsDataStruct a s
</span><a href="Plutarch.Repr.Data.html#DeriveAsDataStruct"><span class="hs-identifier hs-var">DeriveAsDataStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(a s -&gt; DeriveAsDataStruct a s)
-&gt; (PDataStruct (UnTermStruct (a (Any @S))) s -&gt; a s)
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; DeriveAsDataStruct a s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Rep (a s) -&gt; a s
forall a. Generic a =&gt; Rep a -&gt; a
</span><span class="hs-identifier hs-var">SOP.to</span></span><span> </span><span class="annot"><span class="annottext">(Rep (a s) -&gt; a s)
-&gt; (PDataStruct (UnTermStruct (a (Any @S))) s -&gt; Rep (a s))
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; a s
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S))) -&gt; Rep (a s)
forall k1 l1 k2 l2 (h1 :: (k1 -&gt; Type) -&gt; l1 -&gt; Type)
       (h2 :: (k2 -&gt; Type) -&gt; l2 -&gt; Type) (f :: k1 -&gt; Type)
       (g :: k2 -&gt; Type) (xs :: l1) (ys :: l2).
(HTrans @k1 @l1 @k2 @l2 h1 h2,
 AllZipN
   @k1
   @l1
   @k1
   @k2
   @l1
   @l2
   (Prod @k1 @l1 h1)
   (LiftedCoercible @k1 @Type @k2 f g)
   xs
   ys) =&gt;
h1 f xs -&gt; h2 g ys
forall (f :: (S -&gt; Type) -&gt; Type) (g :: Type -&gt; Type)
       (xs :: [[S -&gt; Type]]) (ys :: [[Type]]).
AllZipN
  @(S -&gt; Type)
  @[[S -&gt; Type]]
  @(S -&gt; Type)
  @Type
  @[[S -&gt; Type]]
  @[[Type]]
  (Prod @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)))
  (LiftedCoercible @(S -&gt; Type) @Type @Type f g)
  xs
  ys =&gt;
SOP @(S -&gt; Type) f xs -&gt; SOP @Type g ys
</span><span class="hs-identifier hs-var">SOP.hcoerce</span></span><span> </span><span class="annot"><span class="annottext">(SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
 -&gt; Rep (a s))
-&gt; (PDataStruct (UnTermStruct (a (Any @S))) s
    -&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S))))
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; Rep (a s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct (UnTermStruct (a (Any @S))) s
-&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
forall (struct :: [[S -&gt; Type]]) (s :: S).
PStruct struct s -&gt; SOP @(S -&gt; Type) (Term s) struct
</span><a href="Plutarch.Repr.Internal.html#%24sel%3AunPStruct%3APStruct"><span class="hs-identifier hs-var">unPStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(PStruct (UnTermStruct (a (Any @S))) s
 -&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S))))
-&gt; (PDataStruct (UnTermStruct (a (Any @S))) s
    -&gt; PStruct (UnTermStruct (a (Any @S))) s)
-&gt; PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; SOP @(S -&gt; Type) (Term s) (UnTermStruct (a (Any @S)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PDataStruct (UnTermStruct (a (Any @S))) s
-&gt; PStruct (UnTermStruct (a (Any @S))) s
forall (struct :: [[S -&gt; Type]]) (s :: S).
PDataStruct struct s -&gt; PStruct struct s
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataStruct%3APDataStruct"><span class="hs-identifier hs-var">unPDataStruct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- Helpers</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- NOTE: I'm intentionally not providing default ordering instance here because ordering of</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- product and sum types can be handled in various ways:</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- https://en.wikipedia.org/wiki/Total_order#Orders_on_the_Cartesian_product_of_totally_ordered_sets</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- If anyone can make convincing argument to support one over another, it can be done easily</span><span>
</span><span id="line-231"></span><span class="hs-comment">-- instance (PlutusType (PDataRec struct), All PPartialOrd struct) =&gt; PPartialOrd (PDataRec struct) where</span><span>
</span><span id="line-232"></span><span class="hs-comment">--   x #&lt;= y = undefined</span><span>
</span><span id="line-233"></span><span class="hs-comment">--   a #&lt; b = undefined</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="annot"><a href="Plutarch.Repr.Data.html#pconDataRec"><span class="hs-identifier hs-type">pconDataRec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655744"><span class="annot"><a href="#local-6989586621679655744"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655745"><span class="annot"><a href="#local-6989586621679655745"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655744"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655744"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655745"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655745"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655744"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span id="pconDataRec"><span class="annot"><span class="annottext">pconDataRec :: forall (struct :: [S -&gt; Type]) (s :: S).
All @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
PRec struct s -&gt; Term s (PDataRec struct)
</span><a href="Plutarch.Repr.Data.html#pconDataRec"><span class="hs-identifier hs-var hs-var">pconDataRec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span id="local-6989586621679656423"><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) struct
</span><a href="#local-6989586621679656423"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="#local-6989586621679656424"><span class="hs-identifier hs-type">collapesdData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655745"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621679656424"><span class="annot"><span class="annottext">collapesdData :: [Term s PData]
</span><a href="#local-6989586621679656424"><span class="hs-identifier hs-var hs-var">collapesdData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
-&gt; CollapseTo
     @(S -&gt; Type) @[S -&gt; Type] (NP @(S -&gt; Type)) (Term s PData)
forall (xs :: [S -&gt; Type]) a.
SListIN @(S -&gt; Type) @[S -&gt; Type] (NP @(S -&gt; Type)) xs =&gt;
NP @(S -&gt; Type) (K @(S -&gt; Type) a) xs
-&gt; CollapseTo @(S -&gt; Type) @[S -&gt; Type] (NP @(S -&gt; Type)) a
forall k l (h :: (k -&gt; Type) -&gt; l -&gt; Type) (xs :: l) a.
(HCollapse @k @l h, SListIN @k @l h xs) =&gt;
h (K @k a) xs -&gt; CollapseTo @k @l h a
</span><span class="hs-identifier hs-var">SOP.hcollapse</span></span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
 -&gt; CollapseTo
      @(S -&gt; Type) @[S -&gt; Type] (NP @(S -&gt; Type)) (Term s PData))
-&gt; NP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
-&gt; CollapseTo
     @(S -&gt; Type) @[S -&gt; Type] (NP @(S -&gt; Type)) (Term s PData)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy @((S -&gt; Type) -&gt; Constraint) PInnermostIsDataDataRepr
-&gt; (forall (a :: S -&gt; Type).
    PInnermostIsDataDataRepr a =&gt;
    Term s a -&gt; K @(S -&gt; Type) (Term s PData) a)
-&gt; NP @(S -&gt; Type) (Term s) struct
-&gt; NP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
forall {k} {l} (h :: (k -&gt; Type) -&gt; l -&gt; Type)
       (c :: k -&gt; Constraint) (xs :: l)
       (proxy :: (k -&gt; Constraint) -&gt; Type) (f :: k -&gt; Type)
       (f' :: k -&gt; Type).
(AllN @k @l (Prod @k @l h) c xs, HAp @k @l h) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a) -&gt; h f xs -&gt; h f' xs
</span><span class="hs-identifier hs-var">SOP.hcmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
forall (t :: (S -&gt; Type) -&gt; Constraint).
Proxy @((S -&gt; Type) -&gt; Constraint) t
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PData -&gt; K @(S -&gt; Type) (Term s PData) a
forall k a (b :: k). a -&gt; K @k a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">(Term s PData -&gt; K @(S -&gt; Type) (Term s PData) a)
-&gt; (Term s a -&gt; Term s PData)
-&gt; Term s a
-&gt; K @(S -&gt; Type) (Term s PData) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s PData
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) struct
</span><a href="#local-6989586621679656423"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621679656428"><span class="annot"><span class="annottext">builtinList :: Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656428"><span class="hs-identifier hs-var hs-var">builtinList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term s PData
 -&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData))
-&gt; Term s (PBuiltinList PData)
-&gt; [Term s PData]
-&gt; Term s (PBuiltinList PData)
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679656430"><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656430"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656431"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656431"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; (PBuiltinList PData :--&gt; PBuiltinList PData))
forall (s :: S) (a :: S -&gt; Type).
Term s (a :--&gt; (PBuiltinList a :--&gt; PBuiltinList a))
</span><a href="Plutarch.Builtin.Data.html#pconsBuiltin"><span class="hs-identifier hs-var">pconsBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; (PBuiltinList PData :--&gt; PBuiltinList PData))
-&gt; Term s PData
-&gt; Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656430"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656431"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsHaskell (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
PLiftable a =&gt;
AsHaskell a -&gt; Term s a
</span><a href="Plutarch.Internal.Lift.html#pconstant"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term s PData]
</span><a href="#local-6989586621679656424"><span class="hs-identifier hs-var">collapesdData</span></a></span><span>
</span><span id="line-245"></span><span>   </span><span class="hs-keyword">in</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PDataRec struct)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656428"><span class="hs-identifier hs-var">builtinList</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Plutarch.Repr.Data.html#pconDataStruct"><span class="hs-identifier hs-type">pconDataStruct</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655729"><span class="annot"><a href="#local-6989586621679655729"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655730"><span class="annot"><a href="#local-6989586621679655730"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SListI2</span></span><span> </span><span class="annot"><a href="#local-6989586621679655729"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655729"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655729"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655730"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655730"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655729"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span id="pconDataStruct"><span class="annot"><span class="annottext">pconDataStruct :: forall (struct :: [[S -&gt; Type]]) (s :: S).
(SListI2 @(S -&gt; Type) struct,
 All2 @(S -&gt; Type) PInnermostIsDataDataRepr struct) =&gt;
PStruct struct s -&gt; Term s (PDataStruct struct)
</span><a href="Plutarch.Repr.Data.html#pconDataStruct"><span class="hs-identifier hs-var hs-var">pconDataStruct</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span id="local-6989586621679656455"><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) struct
</span><a href="#local-6989586621679656455"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-255"></span><span>    </span><span id="local-6989586621679656456"><span class="annot"><span class="annottext">collapesdData :: CollapseTo
  @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) (Term s PData)
</span><a href="#local-6989586621679656456"><span class="hs-identifier hs-var hs-var">collapesdData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
-&gt; CollapseTo
     @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) (Term s PData)
forall (xs :: [[S -&gt; Type]]) a.
SListIN @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) xs =&gt;
SOP @(S -&gt; Type) (K @(S -&gt; Type) a) xs
-&gt; CollapseTo @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) a
forall k l (h :: (k -&gt; Type) -&gt; l -&gt; Type) (xs :: l) a.
(HCollapse @k @l h, SListIN @k @l h xs) =&gt;
h (K @k a) xs -&gt; CollapseTo @k @l h a
</span><span class="hs-identifier hs-var">SOP.hcollapse</span></span><span> </span><span class="annot"><span class="annottext">(SOP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
 -&gt; CollapseTo
      @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) (Term s PData))
-&gt; SOP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
-&gt; CollapseTo
     @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) (Term s PData)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy @((S -&gt; Type) -&gt; Constraint) PInnermostIsDataDataRepr
-&gt; (forall (a :: S -&gt; Type).
    PInnermostIsDataDataRepr a =&gt;
    Term s a -&gt; K @(S -&gt; Type) (Term s PData) a)
-&gt; SOP @(S -&gt; Type) (Term s) struct
-&gt; SOP @(S -&gt; Type) (K @(S -&gt; Type) (Term s PData)) struct
forall {k} {l} (h :: (k -&gt; Type) -&gt; l -&gt; Type)
       (c :: k -&gt; Constraint) (xs :: l)
       (proxy :: (k -&gt; Constraint) -&gt; Type) (f :: k -&gt; Type)
       (f' :: k -&gt; Type).
(AllN @k @l (Prod @k @l h) c xs, HAp @k @l h) =&gt;
proxy c
-&gt; (forall (a :: k). c a =&gt; f a -&gt; f' a) -&gt; h f xs -&gt; h f' xs
</span><span class="hs-identifier hs-var">SOP.hcmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
forall (t :: (S -&gt; Type) -&gt; Constraint).
Proxy @((S -&gt; Type) -&gt; Constraint) t
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PData -&gt; K @(S -&gt; Type) (Term s PData) a
forall k a (b :: k). a -&gt; K @k a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="annot"><span class="annottext">(Term s PData -&gt; K @(S -&gt; Type) (Term s PData) a)
-&gt; (Term s a -&gt; Term s PData)
-&gt; Term s a
-&gt; K @(S -&gt; Type) (Term s PData) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s PData
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) struct
</span><a href="#local-6989586621679656455"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679656458"><span class="annot"><span class="annottext">builtinList :: Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656458"><span class="hs-identifier hs-var hs-var">builtinList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term s PData
 -&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData))
-&gt; Term s (PBuiltinList PData)
-&gt; [Term s PData]
-&gt; Term s (PBuiltinList PData)
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679656459"><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656459"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679656460"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656460"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; (PBuiltinList PData :--&gt; PBuiltinList PData))
forall (s :: S) (a :: S -&gt; Type).
Term s (a :--&gt; (PBuiltinList a :--&gt; PBuiltinList a))
</span><a href="Plutarch.Builtin.Data.html#pconsBuiltin"><span class="hs-identifier hs-var">pconsBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; (PBuiltinList PData :--&gt; PBuiltinList PData))
-&gt; Term s PData
-&gt; Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656459"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656460"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsHaskell (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
PLiftable a =&gt;
AsHaskell a -&gt; Term s a
</span><a href="Plutarch.Internal.Lift.html#pconstant"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term s PData]
CollapseTo
  @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) (Term s PData)
</span><a href="#local-6989586621679656456"><span class="hs-identifier hs-var">collapesdData</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621679656461"><span class="annot"><span class="annottext">idx :: Term s PInteger
</span><a href="#local-6989586621679656461"><span class="hs-identifier hs-var hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AsHaskell PInteger -&gt; Term s PInteger
forall (a :: S -&gt; Type) (s :: S).
PLiftable a =&gt;
AsHaskell a -&gt; Term s a
</span><a href="Plutarch.Internal.Lift.html#pconstant"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="annot"><span class="annottext">(AsHaskell PInteger -&gt; Term s PInteger)
-&gt; AsHaskell PInteger -&gt; Term s PInteger
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Real.html#toInteger"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Integer) -&gt; Int -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) struct -&gt; Int
forall k l (h :: (k -&gt; Type) -&gt; l -&gt; Type) (f :: k -&gt; Type)
       (xs :: l).
HIndex @k @l h =&gt;
h f xs -&gt; Int
forall (f :: (S -&gt; Type) -&gt; Type) (xs :: [[S -&gt; Type]]).
SOP @(S -&gt; Type) f xs -&gt; Int
</span><span class="hs-identifier hs-var">SOP.hindex</span></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) struct
</span><a href="#local-6989586621679656455"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-258"></span><span>   </span><span class="hs-keyword">in</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="annottext">Term s (PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
-&gt; Term s (PDataStruct struct)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
 -&gt; Term s (PDataStruct struct))
-&gt; Term s (PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
-&gt; Term s (PDataStruct struct)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PInteger
   :--&gt; (PBuiltinList PData
         :--&gt; PAsData (PBuiltinPair PInteger (PBuiltinList PData))))
forall (s :: S).
Term
  s
  (PInteger
   :--&gt; (PBuiltinList PData
         :--&gt; PAsData (PBuiltinPair PInteger (PBuiltinList PData))))
</span><a href="Plutarch.Builtin.Data.html#pconstrBuiltin"><span class="hs-identifier hs-var">pconstrBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PInteger
   :--&gt; (PBuiltinList PData
         :--&gt; PAsData (PBuiltinPair PInteger (PBuiltinList PData))))
-&gt; Term s PInteger
-&gt; Term
     s
     (PBuiltinList PData
      :--&gt; PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PInteger
</span><a href="#local-6989586621679656461"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList PData
   :--&gt; PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
-&gt; Term s (PBuiltinList PData)
-&gt; Term s (PAsData (PBuiltinPair PInteger (PBuiltinList PData)))
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23%24"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656458"><span class="hs-identifier hs-var">builtinList</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">newtype</span><span> </span><span id="PHB"><span class="annot"><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-var">PHB</span></a></span></span><span> </span><span id="local-6989586621679655950"><span class="annot"><a href="#local-6989586621679655950"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679655951"><span class="annot"><a href="#local-6989586621679655951"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span id="local-6989586621679655952"><span class="annot"><a href="#local-6989586621679655952"><span class="hs-identifier hs-type">struct'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PHB"><span class="annot"><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-var">PHB</span></a></span></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AunPHB%3APHB"><span class="annot"><span class="annottext">forall (s :: S) (struct :: [S -&gt; Type]) (struct' :: [S -&gt; Type]).
PHB s struct struct'
-&gt; Integer
-&gt; (PRec struct' s -&gt; PRec struct s)
-&gt; (PRec struct s, Integer)
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPHB%3APHB"><span class="hs-identifier hs-var hs-var">unPHB</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-263"></span><span>      </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655952"><span class="hs-identifier hs-type">struct'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655950"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655951"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655950"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655951"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655950"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-keyword">newtype</span><span> </span><span id="H"><span class="annot"><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-var">H</span></a></span></span><span> </span><span id="local-6989586621679655957"><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679655958"><span class="annot"><a href="#local-6989586621679655958"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="H"><span class="annot"><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-var">H</span></a></span></span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AunH%3AH"><span class="annot"><span class="annottext">forall (s :: S) (struct :: [S -&gt; Type]).
H s struct
-&gt; forall (r :: S -&gt; Type).
   Integer
   -&gt; Term s (PBuiltinList PData)
   -&gt; (Integer, Term s (PBuiltinList PData))
   -&gt; (PRec struct s -&gt; Term s r)
   -&gt; Term s r
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunH%3AH"><span class="hs-identifier hs-var hs-var">unH</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679655960"><span class="annot"><a href="#local-6989586621679655960"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-271"></span><span>      </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-273"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-274"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655958"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655960"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-275"></span><span>      </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655957"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655960"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="Plutarch.Repr.Data.html#pmatchDataRec"><span class="hs-identifier hs-type">pmatchDataRec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655748"><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679655750"><span class="annot"><a href="#local-6989586621679655750"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679655749"><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-280"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655750"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655750"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-284"></span><span id="pmatchDataRec"><span class="annot"><span class="annottext">pmatchDataRec :: forall (struct :: [S -&gt; Type]) (b :: S -&gt; Type) (s :: S).
All @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
Term s (PDataRec struct) -&gt; (PRec struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Repr.Data.html#pmatchDataRec"><span class="hs-identifier hs-var hs-var">pmatchDataRec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; Term s (PBuiltinList PData)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679656484"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656484"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679656485"><span class="annot"><span class="annottext">PRec struct s -&gt; Term s b
</span><a href="#local-6989586621679656485"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InternalConfig -&gt; Term s b) -&gt; Term s b
forall (s :: S) (a :: S -&gt; Type).
(InternalConfig -&gt; Term s a) -&gt; Term s a
</span><a href="Plutarch.Internal.Term.html#pgetInternalConfig"><span class="hs-identifier hs-var">pgetInternalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((InternalConfig -&gt; Term s b) -&gt; Term s b)
-&gt; (InternalConfig -&gt; Term s b) -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656486"><span class="annot"><span class="annottext">InternalConfig
</span><a href="#local-6989586621679656486"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermCont @b s (Term s b) -&gt; Term s b
forall (a :: S -&gt; Type) (s :: S).
TermCont @a s (Term s a) -&gt; Term s a
</span><a href="Plutarch.Internal.TermCont.html#unTermCont"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @b s (Term s b) -&gt; Term s b)
-&gt; TermCont @b s (Term s b) -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="#local-6989586621679656487"><span class="hs-identifier hs-type">placeholderBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679655980"><span class="annot"><a href="#local-6989586621679655980"><span class="hs-identifier hs-type">y</span></a></span></span><span> </span><span id="local-6989586621679655979"><span class="annot"><a href="#local-6989586621679655979"><span class="hs-identifier hs-type">ys</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-type">PHB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655979"><span class="hs-identifier hs-type">ys</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-type">PHB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679655980"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679655979"><span class="hs-identifier hs-type">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span id="local-6989586621679656487"><span class="annot"><span class="annottext">placeholderBuilder :: forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
PHB s struct ys -&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656487"><span class="hs-identifier hs-var hs-var">placeholderBuilder</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-type">PHB</span></a></span><span> </span><span id="local-6989586621679656490"><span class="annot"><span class="annottext">Integer -&gt; (PRec ys s -&gt; PRec struct s) -&gt; (PRec struct s, Integer)
</span><a href="#local-6989586621679656490"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Integer
 -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; PRec struct s)
 -&gt; (PRec struct s, Integer))
-&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
forall (s :: S) (struct :: [S -&gt; Type]) (struct' :: [S -&gt; Type]).
(Integer
 -&gt; (PRec struct' s -&gt; PRec struct s) -&gt; (PRec struct s, Integer))
-&gt; PHB s struct struct'
</span><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-var">PHB</span></a></span><span> </span><span class="annot"><span class="annottext">((Integer
  -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; PRec struct s)
  -&gt; (PRec struct s, Integer))
 -&gt; PHB s struct ((':) @(S -&gt; Type) y ys))
-&gt; (Integer
    -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; PRec struct s)
    -&gt; (PRec struct s, Integer))
-&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656491"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656491"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679656492"><span class="annot"><span class="annottext">PRec ((':) @(S -&gt; Type) y ys) s -&gt; PRec struct s
</span><a href="#local-6989586621679656492"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><span class="annottext">Integer -&gt; (PRec ys s -&gt; PRec struct s) -&gt; (PRec struct s, Integer)
</span><a href="#local-6989586621679656490"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656491"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span id="local-6989586621679656494"><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656494"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PRec ((':) @(S -&gt; Type) y ys) s -&gt; PRec struct s
</span><a href="#local-6989586621679656492"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
 -&gt; PRec ((':) @(S -&gt; Type) y ys) s)
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Term s y
forall (s :: S) (a :: S -&gt; Type). Integer -&gt; Term s a
</span><a href="Plutarch.Internal.Term.html#pplaceholder"><span class="hs-identifier hs-var">pplaceholder</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656491"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Term s y
-&gt; NP @(S -&gt; Type) (Term s) ys
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656494"><span class="hs-identifier hs-var">prev</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><a href="#local-6989586621679656495"><span class="hs-identifier hs-type">placeholder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>    </span><span id="local-6989586621679656495"><span class="annot"><span class="annottext">placeholder :: (PRec struct s, Integer)
</span><a href="#local-6989586621679656495"><span class="hs-identifier hs-var hs-var">placeholder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PHB s struct struct
-&gt; Integer
-&gt; (PRec struct s -&gt; PRec struct s)
-&gt; (PRec struct s, Integer)
forall (s :: S) (struct :: [S -&gt; Type]) (struct' :: [S -&gt; Type]).
PHB s struct struct'
-&gt; Integer
-&gt; (PRec struct' s -&gt; PRec struct s)
-&gt; (PRec struct s, Integer)
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPHB%3APHB"><span class="hs-identifier hs-var">unPHB</span></a></span><span> </span><span class="annot"><span class="annottext">(PHB s struct struct
 -&gt; Integer
 -&gt; (PRec struct s -&gt; PRec struct s)
 -&gt; (PRec struct s, Integer))
-&gt; PHB s struct struct
-&gt; Integer
-&gt; (PRec struct s -&gt; PRec struct s)
-&gt; (PRec struct s, Integer)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PHB s struct ('[] @(S -&gt; Type))
-&gt; (forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
    SListI @(S -&gt; Type) ys =&gt;
    PHB s struct ys -&gt; PHB s struct ((':) @(S -&gt; Type) y ys))
-&gt; PHB s struct struct
forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    SListI @k ys =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><span class="hs-identifier hs-var">SOP.para_SList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Integer
 -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; PRec struct s)
 -&gt; (PRec struct s, Integer))
-&gt; PHB s struct ('[] @(S -&gt; Type))
forall (s :: S) (struct :: [S -&gt; Type]) (struct' :: [S -&gt; Type]).
(Integer
 -&gt; (PRec struct' s -&gt; PRec struct s) -&gt; (PRec struct s, Integer))
-&gt; PHB s struct struct'
</span><a href="Plutarch.Repr.Data.html#PHB"><span class="hs-identifier hs-var">PHB</span></a></span><span> </span><span class="annot"><span class="annottext">((Integer
  -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; PRec struct s)
  -&gt; (PRec struct s, Integer))
 -&gt; PHB s struct ('[] @(S -&gt; Type)))
-&gt; (Integer
    -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; PRec struct s)
    -&gt; (PRec struct s, Integer))
-&gt; PHB s struct ('[] @(S -&gt; Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656497"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656497"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679656498"><span class="annot"><span class="annottext">PRec ('[] @(S -&gt; Type)) s -&gt; PRec struct s
</span><a href="#local-6989586621679656498"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PRec ('[] @(S -&gt; Type)) s -&gt; PRec struct s
</span><a href="#local-6989586621679656498"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ('[] @(S -&gt; Type))
-&gt; PRec ('[] @(S -&gt; Type)) s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ('[] @(S -&gt; Type))
forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656497"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#-"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PHB s struct ys -&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
SListI @(S -&gt; Type) ys =&gt;
PHB s struct ys -&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
PHB s struct ys -&gt; PHB s struct ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656487"><span class="hs-identifier hs-var">placeholderBuilder</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; PRec struct s
forall a. a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621679656501"><span class="annot"><span class="annottext">placeholderApplied :: Term s b
</span><a href="#local-6989586621679656501"><span class="hs-identifier hs-var hs-var">placeholderApplied</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InternalConfig -&gt; Term s b -&gt; Term s b
forall (s :: S) (a :: S -&gt; Type).
InternalConfig -&gt; Term s a -&gt; Term s a
</span><a href="Plutarch.Internal.Term.html#pwithInternalConfig"><span class="hs-identifier hs-var">pwithInternalConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; InternalConfig
</span><a href="Plutarch.Internal.Term.html#InternalConfig"><span class="hs-identifier hs-var">InternalConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term s b -&gt; Term s b) -&gt; Term s b -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; Term s b
</span><a href="#local-6989586621679656485"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PRec struct s, Integer) -&gt; PRec struct s
forall a b. (a, b) -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec struct s, Integer)
</span><a href="#local-6989586621679656495"><span class="hs-identifier hs-var">placeholder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621679656504"><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621679656504"><span class="hs-identifier hs-var">usedFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">InternalConfig -&gt; Bool
</span><a href="Plutarch.Internal.Term.html#%24sel%3AinternalConfig%27dataRecPMatchOptimization%3AInternalConfig"><span class="hs-identifier hs-var">internalConfig'dataRecPMatchOptimization</span></a></span><span> </span><span class="annot"><span class="annottext">InternalConfig
</span><a href="#local-6989586621679656486"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-297"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Term s b -&gt; TermCont @b s [Integer]
forall {r :: S -&gt; Type} (s :: S) (a :: S -&gt; Type).
Term s a -&gt; TermCont @r s [Integer]
</span><a href="Plutarch.Internal.TermCont.html#pfindAllPlaceholders"><span class="hs-identifier hs-var">pfindAllPlaceholders</span></a></span><span> </span><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679656501"><span class="hs-identifier hs-var">placeholderApplied</span></a></span><span>
</span><span id="line-298"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Integer] -&gt; TermCont @b s [Integer]
forall a. a -&gt; TermCont @b s a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Integer
Item [Integer]
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PRec struct s, Integer) -&gt; Integer
forall a b. (a, b) -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec struct s, Integer)
</span><a href="#local-6989586621679656495"><span class="hs-identifier hs-var">placeholder</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">-- Technically, we don't need @running@ here since we are pretty sure there's nothing using field</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">-- that is not found in @usedFields@--because one can only @evalTerm@ closed terms and using bound field</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">-- means free variable. I added it regardlessly.</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-comment">-- Also, this can be easily tweaked to have different performance characteristics</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- (i.e. CPU/MEM optimized or Size optimized).</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-comment">-- Currently, to balance off both, we hoist &quot;dropToCurrent&quot; function. However, it could be made to</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-comment">-- cost even less on CPU/MEM by not hoisting it. It is likely not a good trade off if there's a</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-comment">-- whole bunch of record deconstruction.</span><span>
</span><span id="line-310"></span><span>    </span><span class="annot"><a href="#local-6989586621679656507"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679656010"><span class="annot"><a href="#local-6989586621679656010"><span class="hs-identifier hs-type">y</span></a></span></span><span> </span><span id="local-6989586621679656009"><span class="annot"><a href="#local-6989586621679656009"><span class="hs-identifier hs-type">ys</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-type">H</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656009"><span class="hs-identifier hs-type">ys</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-type">H</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656010"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679656009"><span class="hs-identifier hs-type">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>    </span><span id="local-6989586621679656507"><span class="annot"><span class="annottext">go :: forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
H s ys -&gt; H s ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656507"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-type">H</span></a></span><span> </span><span id="local-6989586621679656508"><span class="annot"><span class="annottext">forall (r :: S -&gt; Type).
Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (Integer, Term s (PBuiltinList PData))
-&gt; (PRec ys s -&gt; Term s r)
-&gt; Term s r
</span><a href="#local-6989586621679656508"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-312"></span><span>      </span><span class="annot"><span class="annottext">(forall (r :: S -&gt; Type).
 Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (Integer, Term s (PBuiltinList PData))
 -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r)
 -&gt; Term s r)
-&gt; H s ((':) @(S -&gt; Type) y ys)
forall (s :: S) (struct :: [S -&gt; Type]).
(forall (r :: S -&gt; Type).
 Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (Integer, Term s (PBuiltinList PData))
 -&gt; (PRec struct s -&gt; Term s r)
 -&gt; Term s r)
-&gt; H s struct
</span><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-var">H</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (r :: S -&gt; Type).
  Integer
  -&gt; Term s (PBuiltinList PData)
  -&gt; (Integer, Term s (PBuiltinList PData))
  -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r)
  -&gt; Term s r)
 -&gt; H s ((':) @(S -&gt; Type) y ys))
-&gt; (forall (r :: S -&gt; Type).
    Integer
    -&gt; Term s (PBuiltinList PData)
    -&gt; (Integer, Term s (PBuiltinList PData))
    -&gt; (PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r)
    -&gt; Term s r)
-&gt; H s ((':) @(S -&gt; Type) y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656537"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679656538"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656538"><span class="hs-identifier hs-var">running</span></a></span></span><span> </span><span id="local-6989586621679656539"><span class="annot"><span class="annottext">lastBind :: (Integer, Term s (PBuiltinList PData))
</span><a href="#local-6989586621679656539"><span class="hs-identifier hs-var">lastBind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621679656540"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656540"><span class="hs-identifier hs-var">lastBindIdx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679656541"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656541"><span class="hs-identifier hs-var">lastBindT</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679656542"><span class="annot"><span class="annottext">PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r
</span><a href="#local-6989586621679656542"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-313"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; [Integer] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: Type -&gt; Type) a.
(Foldable t, Eq a) =&gt;
a -&gt; t a -&gt; Bool
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621679656504"><span class="hs-identifier hs-var">usedFields</span></a></span><span>
</span><span id="line-314"></span><span>          </span><span class="hs-keyword">then</span><span>
</span><span id="line-315"></span><span>            </span><span class="hs-keyword">let</span><span>
</span><span id="line-316"></span><span>              </span><span class="hs-comment">-- See if this is last field being used.</span><span>
</span><span id="line-317"></span><span>              </span><span id="local-6989586621679656544"><span class="annot"><span class="annottext">lastBind :: Bool
</span><a href="#local-6989586621679656544"><span class="hs-identifier hs-var hs-var">lastBind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Bool) -&gt; [Integer] -&gt; Bool
forall (t :: Type -&gt; Type) a.
Foldable t =&gt;
(a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Integer]
</span><a href="#local-6989586621679656504"><span class="hs-identifier hs-var">usedFields</span></a></span><span>
</span><span id="line-318"></span><span>              </span><span id="local-6989586621679656547"><span class="annot"><span class="annottext">dropAmount :: Int
</span><a href="#local-6989586621679656547"><span class="hs-identifier hs-var hs-var">dropAmount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Int) -&gt; Integer -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#-"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656540"><span class="hs-identifier hs-var">lastBindIdx</span></a></span><span>
</span><span id="line-319"></span><span>              </span><span class="annot"><a href="#local-6989586621679656548"><span class="hs-identifier hs-type">dropToCurrent'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679656027"><span class="annot"><a href="#local-6989586621679656027"><span class="hs-identifier hs-type">s'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656027"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656027"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>              </span><span id="local-6989586621679656548"><span class="annot"><span class="annottext">dropToCurrent' :: forall (s' :: S).
Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)
</span><a href="#local-6989586621679656548"><span class="hs-identifier hs-var hs-var">dropToCurrent'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
 -&gt; (Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
 -&gt; Term s' (PBuiltinList PData)
 -&gt; Term s' (PBuiltinList PData))
-&gt; (Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
-&gt; [Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)]
-&gt; Term s' (PBuiltinList PData)
-&gt; Term s' (PBuiltinList PData)
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
-&gt; (Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
-&gt; Term s' (PBuiltinList PData)
-&gt; Term s' (PBuiltinList PData)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">(.)</span></a></span><span> </span><span class="annot"><span class="annottext">Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)
forall a. a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">([Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)]
 -&gt; Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
-&gt; [Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)]
-&gt; Term s' (PBuiltinList PData)
-&gt; Term s' (PBuiltinList PData)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; (Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData))
-&gt; [Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)]
forall a. Int -&gt; a -&gt; [a]
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#replicate"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679656547"><span class="hs-identifier hs-var">dropAmount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s' (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a :--&gt; PBuiltinList a)
forall (list :: (S -&gt; Type) -&gt; S -&gt; Type) (a :: S -&gt; Type)
       (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="Plutarch.Internal.ListLike.html#ptail"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="hs-operator">#</span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span>              </span><span class="hs-comment">-- If this is last term, or amount of @ptail@ we need is less than 3, we don't hoist.</span><span>
</span><span id="line-323"></span><span>              </span><span id="local-6989586621679656553"><span class="annot"><span class="annottext">currentTerm :: Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656553"><span class="hs-identifier hs-var hs-var">currentTerm</span></a></span></span><span>
</span><span id="line-324"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679656544"><span class="hs-identifier hs-var">lastBind</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679656547"><span class="hs-identifier hs-var">dropAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s' :: S).
Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)
</span><a href="#local-6989586621679656548"><span class="hs-identifier hs-var">dropToCurrent'</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656541"><span class="hs-identifier hs-var">lastBindT</span></a></span><span>
</span><span id="line-325"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="Plutarch.Internal.Term.html#phoistAcyclic"><span class="hs-identifier hs-var">phoistAcyclic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData))
-&gt; Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall a (b :: S -&gt; Type) (s :: S) (c :: S -&gt; Type).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: S -&gt; Type).
HasCallStack =&gt;
(Term s c -&gt; Term s (PBuiltinList PData))
-&gt; Term s (c :--&gt; PBuiltinList PData)
</span><a href="Plutarch.Internal.PLam.html#plam"><span class="hs-identifier hs-var">plam</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s' :: S).
Term s' (PBuiltinList PData) -&gt; Term s' (PBuiltinList PData)
</span><a href="#local-6989586621679656548"><span class="hs-identifier hs-var">dropToCurrent'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656541"><span class="hs-identifier hs-var">lastBindT</span></a></span><span>
</span><span id="line-326"></span><span>             </span><span class="hs-keyword">in</span><span>
</span><span id="line-327"></span><span>              </span><span class="hs-comment">-- If this is the last field, we don't need to plet.</span><span>
</span><span id="line-328"></span><span>              </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679656544"><span class="hs-identifier hs-var">lastBind</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679656560"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656560"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679656561"><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s r
</span><a href="#local-6989586621679656561"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s r
</span><a href="#local-6989586621679656561"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656560"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
-&gt; (Term s (PBuiltinList PData) -&gt; Term s r) -&gt; Term s r
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s a -&gt; (Term s a -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#plet"><span class="hs-identifier hs-var">plet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656553"><span class="hs-identifier hs-var">currentTerm</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList PData) -&gt; Term s r) -&gt; Term s r)
-&gt; (Term s (PBuiltinList PData) -&gt; Term s r) -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656562"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656562"><span class="hs-identifier hs-var">newBind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-329"></span><span>                </span><span class="annot"><span class="annottext">Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (Integer, Term s (PBuiltinList PData))
-&gt; (PRec ys s -&gt; Term s r)
-&gt; Term s r
forall (r :: S -&gt; Type).
Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (Integer, Term s (PBuiltinList PData))
-&gt; (PRec ys s -&gt; Term s r)
-&gt; Term s r
</span><a href="#local-6989586621679656508"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-330"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a :--&gt; PBuiltinList a)
forall (list :: (S -&gt; Type) -&gt; S -&gt; Type) (a :: S -&gt; Type)
       (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="Plutarch.Internal.ListLike.html#ptail"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656538"><span class="hs-identifier hs-var">running</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656562"><span class="hs-identifier hs-var">newBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>                  </span><span class="annot"><span class="annottext">((PRec ys s -&gt; Term s r) -&gt; Term s r)
-&gt; (PRec ys s -&gt; Term s r) -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span id="local-6989586621679656563"><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656563"><span class="hs-identifier hs-var">rest'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r
</span><a href="#local-6989586621679656542"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
 -&gt; PRec ((':) @(S -&gt; Type) y ys) s)
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData -&gt; Term s y
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PData)
forall (a :: S -&gt; Type) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a :--&gt; a)
forall (list :: (S -&gt; Type) -&gt; S -&gt; Type) (a :: S -&gt; Type)
       (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="Plutarch.Internal.ListLike.html#phead"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s PData
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656562"><span class="hs-identifier hs-var">newBind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s y
-&gt; NP @(S -&gt; Type) (Term s) ys
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656563"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-334"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (Integer, Term s (PBuiltinList PData))
-&gt; (PRec ys s -&gt; Term s r)
-&gt; Term s r
forall (r :: S -&gt; Type).
Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (Integer, Term s (PBuiltinList PData))
-&gt; (PRec ys s -&gt; Term s r)
-&gt; Term s r
</span><a href="#local-6989586621679656508"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656537"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
forall (a :: S -&gt; Type) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a :--&gt; PBuiltinList a)
forall (list :: (S -&gt; Type) -&gt; S -&gt; Type) (a :: S -&gt; Type)
       (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; list a)
</span><a href="Plutarch.Internal.ListLike.html#ptail"><span class="hs-identifier hs-var">ptail</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656538"><span class="hs-identifier hs-var">running</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>            </span><span class="annot"><span class="annottext">(Integer, Term s (PBuiltinList PData))
</span><a href="#local-6989586621679656539"><span class="hs-identifier hs-var">lastBind</span></a></span><span>
</span><span id="line-338"></span><span>            </span><span class="annot"><span class="annottext">((PRec ys s -&gt; Term s r) -&gt; Term s r)
-&gt; (PRec ys s -&gt; Term s r) -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span id="local-6989586621679656564"><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656564"><span class="hs-identifier hs-var">rest'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r
</span><a href="#local-6989586621679656542"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">(NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
 -&gt; PRec ((':) @(S -&gt; Type) y ys) s)
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
-&gt; PRec ((':) @(S -&gt; Type) y ys) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData -&gt; Term s y
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PData)
forall (a :: S -&gt; Type) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a :--&gt; a)
forall (list :: (S -&gt; Type) -&gt; S -&gt; Type) (a :: S -&gt; Type)
       (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a :--&gt; a)
</span><a href="Plutarch.Internal.ListLike.html#phead"><span class="hs-identifier hs-var">phead</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData :--&gt; PData)
-&gt; Term s (PBuiltinList PData) -&gt; Term s PData
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656538"><span class="hs-identifier hs-var">running</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s y
-&gt; NP @(S -&gt; Type) (Term s) ys
-&gt; NP @(S -&gt; Type) (Term s) ((':) @(S -&gt; Type) y ys)
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ys
</span><a href="#local-6989586621679656564"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621679656050"><span class="annot"><a href="#local-6989586621679656565"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655748"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656050"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655749"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656050"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679656565"><span class="annot"><span class="annottext">record :: forall (r :: S -&gt; Type).
Term s (PBuiltinList PData)
-&gt; (PRec struct s -&gt; Term s r) -&gt; Term s r
</span><a href="#local-6989586621679656565"><span class="hs-identifier hs-var hs-var">record</span></a></span></span><span> </span><span id="local-6989586621679656568"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656568"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">H s struct
-&gt; forall (r :: S -&gt; Type).
   Integer
   -&gt; Term s (PBuiltinList PData)
   -&gt; (Integer, Term s (PBuiltinList PData))
   -&gt; (PRec struct s -&gt; Term s r)
   -&gt; Term s r
forall (s :: S) (struct :: [S -&gt; Type]).
H s struct
-&gt; forall (r :: S -&gt; Type).
   Integer
   -&gt; Term s (PBuiltinList PData)
   -&gt; (Integer, Term s (PBuiltinList PData))
   -&gt; (PRec struct s -&gt; Term s r)
   -&gt; Term s r
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunH%3AH"><span class="hs-identifier hs-var">unH</span></a></span><span> </span><span class="annot"><span class="annottext">(H s struct
 -&gt; forall (r :: S -&gt; Type).
    Integer
    -&gt; Term s (PBuiltinList PData)
    -&gt; (Integer, Term s (PBuiltinList PData))
    -&gt; (PRec struct s -&gt; Term s r)
    -&gt; Term s r)
-&gt; H s struct
-&gt; forall (r :: S -&gt; Type).
   Integer
   -&gt; Term s (PBuiltinList PData)
   -&gt; (Integer, Term s (PBuiltinList PData))
   -&gt; (PRec struct s -&gt; Term s r)
   -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">H s ('[] @(S -&gt; Type))
-&gt; (forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
    SListI @(S -&gt; Type) ys =&gt;
    H s ys -&gt; H s ((':) @(S -&gt; Type) y ys))
-&gt; H s struct
forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    SListI @k ys =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><span class="hs-identifier hs-var">SOP.para_SList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall (r :: S -&gt; Type).
 Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (Integer, Term s (PBuiltinList PData))
 -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; Term s r)
 -&gt; Term s r)
-&gt; H s ('[] @(S -&gt; Type))
forall (s :: S) (struct :: [S -&gt; Type]).
(forall (r :: S -&gt; Type).
 Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (Integer, Term s (PBuiltinList PData))
 -&gt; (PRec struct s -&gt; Term s r)
 -&gt; Term s r)
-&gt; H s struct
</span><a href="Plutarch.Repr.Data.html#H"><span class="hs-identifier hs-var">H</span></a></span><span> </span><span class="annot"><span class="annottext">((forall (r :: S -&gt; Type).
  Integer
  -&gt; Term s (PBuiltinList PData)
  -&gt; (Integer, Term s (PBuiltinList PData))
  -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; Term s r)
  -&gt; Term s r)
 -&gt; H s ('[] @(S -&gt; Type)))
-&gt; (forall (r :: S -&gt; Type).
    Integer
    -&gt; Term s (PBuiltinList PData)
    -&gt; (Integer, Term s (PBuiltinList PData))
    -&gt; (PRec ('[] @(S -&gt; Type)) s -&gt; Term s r)
    -&gt; Term s r)
-&gt; H s ('[] @(S -&gt; Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(Integer, Term s (PBuiltinList PData))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679656569"><span class="annot"><span class="annottext">PRec ('[] @(S -&gt; Type)) s -&gt; Term s r
</span><a href="#local-6989586621679656569"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PRec ('[] @(S -&gt; Type)) s -&gt; Term s r
</span><a href="#local-6989586621679656569"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(PRec ('[] @(S -&gt; Type)) s -&gt; Term s r)
-&gt; PRec ('[] @(S -&gt; Type)) s -&gt; Term s r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ('[] @(S -&gt; Type))
-&gt; PRec ('[] @(S -&gt; Type)) s
forall (struct :: [S -&gt; Type]) (s :: S).
NP @(S -&gt; Type) (Term s) struct -&gt; PRec struct s
</span><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-var">PRec</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) ('[] @(S -&gt; Type))
forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">H s ys -&gt; H s ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
SListI @(S -&gt; Type) ys =&gt;
H s ys -&gt; H s ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
H s ys -&gt; H s ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656507"><span class="hs-identifier hs-var">go</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656568"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656568"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><span class="annottext">Term s b -&gt; TermCont @b s (Term s b)
forall a. a -&gt; TermCont @b s a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s b -&gt; TermCont @b s (Term s b))
-&gt; Term s b -&gt; TermCont @b s (Term s b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
-&gt; (PRec struct s -&gt; Term s b) -&gt; Term s b
forall (r :: S -&gt; Type).
Term s (PBuiltinList PData)
-&gt; (PRec struct s -&gt; Term s r) -&gt; Term s r
</span><a href="#local-6989586621679656565"><span class="hs-identifier hs-var">record</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656484"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">PRec struct s -&gt; Term s b
</span><a href="#local-6989586621679656485"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="hs-keyword">newtype</span><span> </span><span id="StructureHandler"><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-var">StructureHandler</span></a></span></span><span> </span><span id="local-6989586621679656055"><span class="annot"><a href="#local-6989586621679656055"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679656056"><span class="annot"><a href="#local-6989586621679656056"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679656057"><span class="annot"><a href="#local-6989586621679656057"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StructureHandler"><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-var">StructureHandler</span></a></span></span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AunSBR%3AStructureHandler"><span class="annot"><span class="annottext">forall (s :: S) (r :: S -&gt; Type) (struct :: [[S -&gt; Type]]).
StructureHandler s r struct
-&gt; Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (PStruct struct s -&gt; Term s r)
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s r)) struct
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunSBR%3AStructureHandler"><span class="hs-identifier hs-var hs-var">unSBR</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-347"></span><span>      </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656055"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656057"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656055"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656055"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656056"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">K</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656055"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656056"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679656057"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- This is probably general enough to be used for non-Data encoded types</span><span>
</span><span id="line-354"></span><span class="annot"><a href="Plutarch.Repr.Data.html#pmatchDataStruct"><span class="hs-identifier hs-type">pmatchDataStruct</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679655733"><span class="annot"><a href="#local-6989586621679655733"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679655735"><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679655734"><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">All2</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655733"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataStruct"><span class="hs-identifier hs-type">PDataStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655733"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655733"><span class="hs-identifier hs-type">struct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-360"></span><span id="pmatchDataStruct"><span class="annot"><span class="annottext">pmatchDataStruct :: forall (struct :: [[S -&gt; Type]]) (b :: S -&gt; Type) (s :: S).
All2 @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
Term s (PDataStruct struct)
-&gt; (PStruct struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Repr.Data.html#pmatchDataStruct"><span class="hs-identifier hs-var hs-var">pmatchDataStruct</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PDataStruct struct) -&gt; Term s PData
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679656585"><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656585"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679656586"><span class="annot"><span class="annottext">PStruct struct s -&gt; Term s b
</span><a href="#local-6989586621679656586"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermCont @b s (Term s b) -&gt; Term s b
forall (a :: S -&gt; Type) (s :: S).
TermCont @a s (Term s a) -&gt; Term s a
</span><a href="Plutarch.Internal.TermCont.html#unTermCont"><span class="hs-identifier hs-var">unTermCont</span></a></span><span> </span><span class="annot"><span class="annottext">(TermCont @b s (Term s b) -&gt; Term s b)
-&gt; TermCont @b s (Term s b) -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><a href="#local-6989586621679656587"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679656065"><span class="annot"><a href="#local-6989586621679656065"><span class="hs-identifier hs-type">y</span></a></span></span><span> </span><span id="local-6989586621679656066"><span class="annot"><a href="#local-6989586621679656066"><span class="hs-identifier hs-type">ys</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656065"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-type">StructureHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656066"><span class="hs-identifier hs-type">ys</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-type">StructureHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656065"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679656066"><span class="hs-identifier hs-type">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621679656587"><span class="annot"><span class="annottext">go :: forall (y :: [S -&gt; Type]) (ys :: [[S -&gt; Type]]).
All @(S -&gt; Type) PInnermostIsDataDataRepr y =&gt;
StructureHandler s b ys
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
</span><a href="#local-6989586621679656587"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-type">StructureHandler</span></a></span><span> </span><span id="local-6989586621679656592"><span class="annot"><span class="annottext">Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (PStruct ys s -&gt; Term s b)
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) ys
</span><a href="#local-6989586621679656592"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b)
 -&gt; NP
      @[S -&gt; Type]
      (K @[S -&gt; Type] (Integer, Term s b))
      ((':) @[S -&gt; Type] y ys))
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
forall (s :: S) (r :: S -&gt; Type) (struct :: [[S -&gt; Type]]).
(Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (PStruct struct s -&gt; Term s r)
 -&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s r)) struct)
-&gt; StructureHandler s r struct
</span><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-var">StructureHandler</span></a></span><span> </span><span class="annot"><span class="annottext">((Integer
  -&gt; Term s (PBuiltinList PData)
  -&gt; (PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b)
  -&gt; NP
       @[S -&gt; Type]
       (K @[S -&gt; Type] (Integer, Term s b))
       ((':) @[S -&gt; Type] y ys))
 -&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys))
-&gt; (Integer
    -&gt; Term s (PBuiltinList PData)
    -&gt; (PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b)
    -&gt; NP
         @[S -&gt; Type]
         (K @[S -&gt; Type] (Integer, Term s b))
         ((':) @[S -&gt; Type] y ys))
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679656593"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656593"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679656594"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656594"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span id="local-6989586621679656595"><span class="annot"><span class="annottext">PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b
</span><a href="#local-6989586621679656595"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><a href="#local-6989586621679656596"><span class="hs-identifier hs-type">dataRecAsBuiltinList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656065"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>        </span><span id="local-6989586621679656596"><span class="annot"><span class="annottext">dataRecAsBuiltinList :: Term s (PBuiltinList PData) -&gt; Term s (PDataRec y)
</span><a href="#local-6989586621679656596"><span class="hs-identifier hs-var hs-var">dataRecAsBuiltinList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PDataRec y)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>        </span><span id="local-6989586621679656597"><span class="annot"><span class="annottext">handler :: Term s b
</span><a href="#local-6989586621679656597"><span class="hs-identifier hs-var hs-var">handler</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (struct :: [S -&gt; Type]) (b :: S -&gt; Type) (s :: S).
All @(S -&gt; Type) PInnermostIsDataDataRepr struct =&gt;
Term s (PDataRec struct) -&gt; (PRec struct s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Repr.Data.html#pmatchDataRec"><span class="hs-identifier hs-var">pmatchDataRec</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679656065"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PDataRec y)
</span><a href="#local-6989586621679656596"><span class="hs-identifier hs-var">dataRecAsBuiltinList</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656594"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PRec y s -&gt; Term s b) -&gt; Term s b)
-&gt; (PRec y s -&gt; Term s b) -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PRec"><span class="hs-identifier hs-type">PRec</span></a></span><span> </span><span id="local-6989586621679656598"><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) y
</span><a href="#local-6989586621679656598"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b
</span><a href="#local-6989586621679656595"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">(PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s
forall (struct :: [[S -&gt; Type]]) (s :: S).
SOP @(S -&gt; Type) (Term s) struct -&gt; PStruct struct s
</span><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-var">PStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
 -&gt; PStruct ((':) @[S -&gt; Type] y ys) s)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><span class="hs-identifier hs-var">SOP</span></span><span> </span><span class="annot"><span class="annottext">(NS
   @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
 -&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys))
-&gt; NS
     @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) y
-&gt; NS
     @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NS @k a ((':) @k x xs)
</span><span class="hs-identifier hs-var">Z</span></span><span> </span><span class="annot"><span class="annottext">NP @(S -&gt; Type) (Term s) y
</span><a href="#local-6989586621679656598"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-369"></span><span>        </span><span id="local-6989586621679656599"><span class="annot"><span class="annottext">restHandlers :: NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) ys
</span><a href="#local-6989586621679656599"><span class="hs-identifier hs-var hs-var">restHandlers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (PStruct ys s -&gt; Term s b)
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) ys
</span><a href="#local-6989586621679656592"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656593"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656594"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-type">PStruct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SOP</span></span><span> </span><span id="local-6989586621679656600"><span class="annot"><span class="annottext">NS @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ys
</span><a href="#local-6989586621679656600"><span class="hs-identifier hs-var">sop</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b
</span><a href="#local-6989586621679656595"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">(PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s -&gt; Term s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s
forall (struct :: [[S -&gt; Type]]) (s :: S).
SOP @(S -&gt; Type) (Term s) struct -&gt; PStruct struct s
</span><a href="Plutarch.Repr.Internal.html#PStruct"><span class="hs-identifier hs-var">PStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
 -&gt; PStruct ((':) @[S -&gt; Type] y ys) s)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
-&gt; PStruct ((':) @[S -&gt; Type] y ys) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><span class="hs-identifier hs-var">SOP</span></span><span> </span><span class="annot"><span class="annottext">(NS
   @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
 -&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys))
-&gt; NS
     @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
-&gt; SOP @(S -&gt; Type) (Term s) ((':) @[S -&gt; Type] y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ys
-&gt; NS
     @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ((':) @[S -&gt; Type] y ys)
forall {k} (a :: k -&gt; Type) (xs :: [k]) (x :: k).
NS @k a xs -&gt; NS @k a ((':) @k x xs)
</span><span class="hs-identifier hs-var">SOP.S</span></span><span> </span><span class="annot"><span class="annottext">NS @[S -&gt; Type] (NP @(S -&gt; Type) (Term s)) ys
</span><a href="#local-6989586621679656600"><span class="hs-identifier hs-var">sop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>       </span><span class="hs-keyword">in</span><span>
</span><span id="line-371"></span><span>        </span><span class="annot"><span class="annottext">(Integer, Term s b) -&gt; K @[S -&gt; Type] (Integer, Term s b) y
forall k a (b :: k). a -&gt; K @k a b
</span><span class="hs-identifier hs-var">K</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679656593"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679656597"><span class="hs-identifier hs-var">handler</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">K @[S -&gt; Type] (Integer, Term s b) y
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) ys
-&gt; NP
     @[S -&gt; Type]
     (K @[S -&gt; Type] (Integer, Term s b))
     ((':) @[S -&gt; Type] y ys)
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) ys
</span><a href="#local-6989586621679656599"><span class="hs-identifier hs-var">restHandlers</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-comment">-- This builds &quot;handlers&quot;--that is each cases of SOP data</span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-comment">-- By building this we can figure out which cases share same computation, hence which branches to group</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><a href="#local-6989586621679656602"><span class="hs-identifier hs-type">handlers'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-type">StructureHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655733"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621679656602"><span class="annot"><span class="annottext">handlers' :: StructureHandler s b struct
</span><a href="#local-6989586621679656602"><span class="hs-identifier hs-var hs-var">handlers'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy
  @([S -&gt; Type] -&gt; Constraint)
  (All @(S -&gt; Type) PInnermostIsDataDataRepr)
-&gt; StructureHandler s b ('[] @[S -&gt; Type])
-&gt; (forall (y :: [S -&gt; Type]) (ys :: [[S -&gt; Type]]).
    (All @(S -&gt; Type) PInnermostIsDataDataRepr y,
     All @[S -&gt; Type] (All @(S -&gt; Type) PInnermostIsDataDataRepr) ys) =&gt;
    StructureHandler s b ys
    -&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys))
-&gt; StructureHandler s b struct
forall k (c :: k -&gt; Constraint) (xs :: [k])
       (proxy :: (k -&gt; Constraint) -&gt; Type) (r :: [k] -&gt; Type).
All @k c xs =&gt;
proxy c
-&gt; r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    (c y, All @k c ys) =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
forall (proxy :: ([S -&gt; Type] -&gt; Constraint) -&gt; Type)
       (r :: [[S -&gt; Type]] -&gt; Type).
proxy (All @(S -&gt; Type) PInnermostIsDataDataRepr)
-&gt; r ('[] @[S -&gt; Type])
-&gt; (forall (y :: [S -&gt; Type]) (ys :: [[S -&gt; Type]]).
    (All @(S -&gt; Type) PInnermostIsDataDataRepr y,
     All @[S -&gt; Type] (All @(S -&gt; Type) PInnermostIsDataDataRepr) ys) =&gt;
    r ys -&gt; r ((':) @[S -&gt; Type] y ys))
-&gt; r struct
</span><span class="hs-identifier hs-var">SOP.cpara_SList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
forall (t :: [S -&gt; Type] -&gt; Constraint).
Proxy @([S -&gt; Type] -&gt; Constraint) t
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (PStruct ('[] @[S -&gt; Type]) s -&gt; Term s b)
 -&gt; NP
      @[S -&gt; Type]
      (K @[S -&gt; Type] (Integer, Term s b))
      ('[] @[S -&gt; Type]))
-&gt; StructureHandler s b ('[] @[S -&gt; Type])
forall (s :: S) (r :: S -&gt; Type) (struct :: [[S -&gt; Type]]).
(Integer
 -&gt; Term s (PBuiltinList PData)
 -&gt; (PStruct struct s -&gt; Term s r)
 -&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s r)) struct)
-&gt; StructureHandler s r struct
</span><a href="Plutarch.Repr.Data.html#StructureHandler"><span class="hs-identifier hs-var">StructureHandler</span></a></span><span> </span><span class="annot"><span class="annottext">((Integer
  -&gt; Term s (PBuiltinList PData)
  -&gt; (PStruct ('[] @[S -&gt; Type]) s -&gt; Term s b)
  -&gt; NP
       @[S -&gt; Type]
       (K @[S -&gt; Type] (Integer, Term s b))
       ('[] @[S -&gt; Type]))
 -&gt; StructureHandler s b ('[] @[S -&gt; Type]))
-&gt; (Integer
    -&gt; Term s (PBuiltinList PData)
    -&gt; (PStruct ('[] @[S -&gt; Type]) s -&gt; Term s b)
    -&gt; NP
         @[S -&gt; Type]
         (K @[S -&gt; Type] (Integer, Term s b))
         ('[] @[S -&gt; Type]))
-&gt; StructureHandler s b ('[] @[S -&gt; Type])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PStruct ('[] @[S -&gt; Type]) s -&gt; Term s b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP
  @[S -&gt; Type]
  (K @[S -&gt; Type] (Integer, Term s b))
  ('[] @[S -&gt; Type])
forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StructureHandler s b ys
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
forall (y :: [S -&gt; Type]) (ys :: [[S -&gt; Type]]).
(All @(S -&gt; Type) PInnermostIsDataDataRepr y,
 All @[S -&gt; Type] (All @(S -&gt; Type) PInnermostIsDataDataRepr) ys) =&gt;
StructureHandler s b ys
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
forall (y :: [S -&gt; Type]) (ys :: [[S -&gt; Type]]).
All @(S -&gt; Type) PInnermostIsDataDataRepr y =&gt;
StructureHandler s b ys
-&gt; StructureHandler s b ((':) @[S -&gt; Type] y ys)
</span><a href="#local-6989586621679656587"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><a href="#local-6989586621679656607"><span class="hs-identifier hs-type">handlers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-bignum-1.3/src/GHC.Num.Integer.html#Integer"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655734"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679655735"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621679656607"><span class="annot"><span class="annottext">handlers :: Term s (PBuiltinList PData) -&gt; [(Integer, Term s b)]
</span><a href="#local-6989586621679656607"><span class="hs-identifier hs-var hs-var">handlers</span></a></span></span><span> </span><span id="local-6989586621679656608"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656608"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) struct
-&gt; CollapseTo
     @[S -&gt; Type] @[[S -&gt; Type]] (NP @[S -&gt; Type]) (Integer, Term s b)
forall (xs :: [[S -&gt; Type]]) a.
SListIN @[S -&gt; Type] @[[S -&gt; Type]] (NP @[S -&gt; Type]) xs =&gt;
NP @[S -&gt; Type] (K @[S -&gt; Type] a) xs
-&gt; CollapseTo @[S -&gt; Type] @[[S -&gt; Type]] (NP @[S -&gt; Type]) a
forall k l (h :: (k -&gt; Type) -&gt; l -&gt; Type) (xs :: l) a.
(HCollapse @k @l h, SListIN @k @l h xs) =&gt;
h (K @k a) xs -&gt; CollapseTo @k @l h a
</span><span class="hs-identifier hs-var">SOP.hcollapse</span></span><span> </span><span class="annot"><span class="annottext">(NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) struct
 -&gt; CollapseTo
      @[S -&gt; Type] @[[S -&gt; Type]] (NP @[S -&gt; Type]) (Integer, Term s b))
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) struct
-&gt; CollapseTo
     @[S -&gt; Type] @[[S -&gt; Type]] (NP @[S -&gt; Type]) (Integer, Term s b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">StructureHandler s b struct
-&gt; Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (PStruct struct s -&gt; Term s b)
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s b)) struct
forall (s :: S) (r :: S -&gt; Type) (struct :: [[S -&gt; Type]]).
StructureHandler s r struct
-&gt; Integer
-&gt; Term s (PBuiltinList PData)
-&gt; (PStruct struct s -&gt; Term s r)
-&gt; NP @[S -&gt; Type] (K @[S -&gt; Type] (Integer, Term s r)) struct
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunSBR%3AStructureHandler"><span class="hs-identifier hs-var">unSBR</span></a></span><span> </span><span class="annot"><span class="annottext">StructureHandler s b struct
</span><a href="#local-6989586621679656602"><span class="hs-identifier hs-var">handlers'</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656608"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PStruct struct s -&gt; Term s b
</span><a href="#local-6989586621679656586"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; [(Integer, Term s b)]
</span><a href="#local-6989586621679656607"><span class="hs-identifier hs-var">handlers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair PInteger (PBuiltinList PData)
   :--&gt; PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (PBuiltinPair a b :--&gt; b)
</span><a href="Plutarch.Builtin.Data.html#psndBuiltin"><span class="hs-identifier hs-var">psndBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair PInteger (PBuiltinList PData)
   :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
-&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23%24"><span class="hs-operator hs-var">#$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
forall (s :: S).
Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
</span><a href="Plutarch.Builtin.Data.html#pasConstr"><span class="hs-identifier hs-var">pasConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
-&gt; Term s PData
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656585"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679656609"><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679656609"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s b -&gt; TermCont @b s (Term s b)
forall a. a -&gt; TermCont @b s a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Term s b
</span><a href="#local-6989586621679656609"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><span class="annottext">[(Integer, Term s b)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-384"></span><span>      </span><span id="local-6989586621679656610"><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData))
</span><a href="#local-6989586621679656610"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData))
-&gt; TermCont
     @b s (Term s (PBuiltinPair PInteger (PBuiltinList PData)))
forall {r :: S -&gt; Type} (s :: S) (a :: S -&gt; Type).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Plutarch.TermCont.html#pletC"><span class="hs-identifier hs-var">pletC</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinPair PInteger (PBuiltinList PData))
 -&gt; TermCont
      @b s (Term s (PBuiltinPair PInteger (PBuiltinList PData))))
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
-&gt; TermCont
     @b s (Term s (PBuiltinPair PInteger (PBuiltinList PData)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
forall (s :: S).
Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
</span><a href="Plutarch.Builtin.Data.html#pasConstr"><span class="hs-identifier hs-var">pasConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PData :--&gt; PBuiltinPair PInteger (PBuiltinList PData))
-&gt; Term s PData
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679656585"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-385"></span><span>      </span><span id="local-6989586621679656611"><span class="annot"><span class="annottext">Term s PInteger
</span><a href="#local-6989586621679656611"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s PInteger -&gt; TermCont @b s (Term s PInteger)
forall {r :: S -&gt; Type} (s :: S) (a :: S -&gt; Type).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Plutarch.TermCont.html#pletC"><span class="hs-identifier hs-var">pletC</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s PInteger -&gt; TermCont @b s (Term s PInteger))
-&gt; Term s PInteger -&gt; TermCont @b s (Term s PInteger)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData) :--&gt; PInteger)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (PBuiltinPair a b :--&gt; a)
</span><a href="Plutarch.Builtin.Data.html#pfstBuiltin"><span class="hs-identifier hs-var">pfstBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData) :--&gt; PInteger)
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
-&gt; Term s PInteger
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData))
</span><a href="#local-6989586621679656610"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-386"></span><span>      </span><span id="local-6989586621679656612"><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656612"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
-&gt; TermCont @b s (Term s (PBuiltinList PData))
forall {r :: S -&gt; Type} (s :: S) (a :: S -&gt; Type).
Term s a -&gt; TermCont @r s (Term s a)
</span><a href="Plutarch.TermCont.html#pletC"><span class="hs-identifier hs-var">pletC</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList PData)
 -&gt; TermCont @b s (Term s (PBuiltinList PData)))
-&gt; Term s (PBuiltinList PData)
-&gt; TermCont @b s (Term s (PBuiltinList PData))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair PInteger (PBuiltinList PData)
   :--&gt; PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (PBuiltinPair a b :--&gt; b)
</span><a href="Plutarch.Builtin.Data.html#psndBuiltin"><span class="hs-identifier hs-var">psndBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair PInteger (PBuiltinList PData)
   :--&gt; PBuiltinList PData)
-&gt; Term s (PBuiltinPair PInteger (PBuiltinList PData))
-&gt; Term s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair PInteger (PBuiltinList PData))
</span><a href="#local-6989586621679656610"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span>      </span><span class="annot"><span class="annottext">Term s b -&gt; TermCont @b s (Term s b)
forall a. a -&gt; TermCont @b s a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s b -&gt; TermCont @b s (Term s b))
-&gt; Term s b -&gt; TermCont @b s (Term s b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(Integer, Term s b)] -&gt; Term s PInteger -&gt; Term s b
forall (s :: S) (r :: S -&gt; Type).
[(Integer, Term s r)] -&gt; Term s PInteger -&gt; Term s r
</span><a href="Plutarch.Repr.Internal.html#groupHandlers"><span class="hs-identifier hs-var">groupHandlers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; [(Integer, Term s b)]
</span><a href="#local-6989586621679656607"><span class="hs-identifier hs-var">handlers</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData)
</span><a href="#local-6989586621679656612"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s PInteger
</span><a href="#local-6989586621679656611"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Lift.html#PLiftable"><span class="hs-identifier hs-type">PLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656089"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PlutusRepr"><span class="hs-identifier hs-type">PlutusRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656089"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="EachDataLiftable"><span class="annot"><a href="Plutarch.Repr.Data.html#EachDataLiftable"><span class="hs-identifier hs-var">EachDataLiftable</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679656089"><span class="annot"><a href="#local-6989586621679656089"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679656615"><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Lift.html#PLiftable"><span class="hs-identifier hs-type">PLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656615"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PlutusRepr"><span class="hs-identifier hs-type">PlutusRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656615"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#EachDataLiftable"><span class="hs-identifier hs-type">EachDataLiftable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656615"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656092"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#AsHaskell"><span class="hs-identifier hs-type">AsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656093"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PLiftable"><span class="hs-identifier hs-type">PLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656093"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PlutusRepr"><span class="hs-identifier hs-type">PlutusRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656093"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="ToAsHaskell"><span class="annot"><a href="Plutarch.Repr.Data.html#ToAsHaskell"><span class="hs-identifier hs-var">ToAsHaskell</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679656092"><span class="annot"><a href="#local-6989586621679656092"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679656093"><span class="annot"><a href="#local-6989586621679656093"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679656629"><span id="local-6989586621679656630"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656629"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#AsHaskell"><span class="hs-identifier hs-type">AsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656630"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PLiftable"><span class="hs-identifier hs-type">PLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656630"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PlutusRepr"><span class="hs-identifier hs-type">PlutusRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656630"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#ToAsHaskell"><span class="hs-identifier hs-type">ToAsHaskell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656629"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656630"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-keyword">newtype</span><span> </span><span id="PDataRecPLiftableHelper"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-var">PDataRecPLiftableHelper</span></a></span></span><span> </span><span id="local-6989586621679656097"><span class="annot"><a href="#local-6989586621679656097"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PDataRecPLiftableHelper"><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-var">PDataRecPLiftableHelper</span></a></span></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AunPDataRecPLiftableHelper%3APDataRecPLiftableHelper"><span class="annot"><span class="annottext">forall (struct :: [S -&gt; Type]).
PDataRecPLiftableHelper struct
-&gt; [Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell struct))
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataRecPLiftableHelper%3APDataRecPLiftableHelper"><span class="hs-identifier hs-var hs-var">unPDataRecPLiftableHelper</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#LiftError"><span class="hs-identifier hs-type">LiftError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NP</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecAsHaskell"><span class="hs-identifier hs-type">RecAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656097"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="annot"><span class="hs-comment">-- | @since WIP</span></span><span>
</span><span id="line-403"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679656109"><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.Term.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679656110"><span class="annot"><a href="#local-6989586621679656110"><span class="hs-identifier hs-type">hstruct</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SListI</span></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#EachDataLiftable"><span class="hs-identifier hs-type">EachDataLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">All</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PInnermostIsDataDataRepr"><span class="hs-identifier hs-type">PInnermostIsDataDataRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679656110"><span class="hs-identifier hs-type">hstruct</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecAsHaskell"><span class="hs-identifier hs-type">RecAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.AllZip</span></span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#ToAsHaskell"><span class="hs-identifier hs-type">ToAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656110"><span class="hs-identifier hs-type">hstruct</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Lift.html#PLiftable"><span class="hs-identifier hs-type">PLiftable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="AsHaskell"><span class="annot"><a href="Plutarch.Internal.Lift.html#AsHaskell"><span class="hs-identifier hs-var">AsHaskell</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecAsHaskell"><span class="hs-identifier hs-type">RecAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PlutusRepr"><span class="annot"><a href="Plutarch.Internal.Lift.html#PlutusRepr"><span class="hs-identifier hs-var">PlutusRepr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRec"><span class="hs-identifier hs-type">PDataRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">]</span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Lift.html#haskToRepr"><span class="hs-identifier hs-type">haskToRepr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Repr.Internal.html#RecAsHaskell"><span class="hs-identifier hs-type">RecAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">]</span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621679656696"><span class="annot"><span class="annottext">haskToRepr :: SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
-&gt; [Data]
</span><a href="Plutarch.Internal.Lift.html#haskToRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">haskToRepr</span></a></span></span><span> </span><span id="local-6989586621679656697"><span class="annot"><span class="annottext">SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
</span><a href="#local-6989586621679656697"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-418"></span><span>      </span><span class="annot"><a href="#local-6989586621679656698"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679656131"><span class="annot"><a href="#local-6989586621679656131"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679656132"><span class="annot"><a href="#local-6989586621679656132"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#ToAsHaskell"><span class="hs-identifier hs-type">ToAsHaskell</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656132"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span class="annot"><a href="#local-6989586621679656131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.K</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679656132"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-419"></span><span>      </span><span id="local-6989586621679656698"><span class="annot"><span class="annottext">g :: forall a (b :: S -&gt; Type).
ToAsHaskell a b =&gt;
I a -&gt; K @(S -&gt; Type) Data b
</span><a href="#local-6989586621679656698"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span id="local-6989586621679656708"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679656708"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlutusRepr b -&gt; K @(S -&gt; Type) (PlutusRepr b) b
forall k a (b :: k). a -&gt; K @k a b
</span><span class="hs-identifier hs-var">SOP.K</span></span><span> </span><span class="annot"><span class="annottext">(PlutusRepr b -&gt; K @(S -&gt; Type) (PlutusRepr b) b)
-&gt; PlutusRepr b -&gt; K @(S -&gt; Type) (PlutusRepr b) b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type). PLiftable a =&gt; AsHaskell a -&gt; PlutusRepr a
</span><a href="Plutarch.Internal.Lift.html#haskToRepr"><span class="hs-identifier hs-var">haskToRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679656132"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">a
AsHaskell b
</span><a href="#local-6989586621679656708"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span>      </span><span class="annot"><a href="#local-6989586621679656709"><span class="hs-identifier hs-type">ds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SOP.K</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-422"></span><span>      </span><span id="local-6989586621679656709"><span class="annot"><span class="annottext">ds :: SOP
  @(S -&gt; Type)
  (K @(S -&gt; Type) Data)
  ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
</span><a href="#local-6989586621679656709"><span class="hs-identifier hs-var hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy @(Type -&gt; (S -&gt; Type) -&gt; Constraint) ToAsHaskell
-&gt; (forall a (b :: S -&gt; Type).
    ToAsHaskell a b =&gt;
    I a -&gt; K @(S -&gt; Type) Data b)
-&gt; SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
-&gt; SOP
     @(S -&gt; Type)
     (K @(S -&gt; Type) Data)
     ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
forall k1 l1 k2 l2 (h1 :: (k1 -&gt; Type) -&gt; l1 -&gt; Type)
       (h2 :: (k2 -&gt; Type) -&gt; l2 -&gt; Type) (c :: k1 -&gt; k2 -&gt; Constraint)
       (xs :: l1) (ys :: l2) (proxy :: (k1 -&gt; k2 -&gt; Constraint) -&gt; Type)
       (f :: k1 -&gt; Type) (g :: k2 -&gt; Type).
(HTrans @k1 @l1 @k2 @l2 h1 h2,
 AllZipN @k1 @l1 @k1 @k2 @l1 @l2 (Prod @k1 @l1 h1) c xs ys) =&gt;
proxy c
-&gt; (forall (x :: k1) (y :: k2). c x y =&gt; f x -&gt; g y)
-&gt; h1 f xs
-&gt; h2 g ys
forall (c :: Type -&gt; (S -&gt; Type) -&gt; Constraint) (xs :: [[Type]])
       (ys :: [[S -&gt; Type]])
       (proxy :: (Type -&gt; (S -&gt; Type) -&gt; Constraint) -&gt; Type)
       (f :: Type -&gt; Type) (g :: (S -&gt; Type) -&gt; Type).
AllZipN
  @Type
  @[[Type]]
  @Type
  @(S -&gt; Type)
  @[[Type]]
  @[[S -&gt; Type]]
  (Prod @Type @[[Type]] (SOP @Type))
  c
  xs
  ys =&gt;
proxy c
-&gt; (forall x (y :: S -&gt; Type). c x y =&gt; f x -&gt; g y)
-&gt; SOP @Type f xs
-&gt; SOP @(S -&gt; Type) g ys
</span><span class="hs-identifier hs-var">SOP.htrans</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
forall (t :: Type -&gt; (S -&gt; Type) -&gt; Constraint).
Proxy @(Type -&gt; (S -&gt; Type) -&gt; Constraint) t
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Repr.Data.html#ToAsHaskell"><span class="hs-identifier hs-type">ToAsHaskell</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">I x -&gt; K @(S -&gt; Type) Data y
forall a (b :: S -&gt; Type).
ToAsHaskell a b =&gt;
I a -&gt; K @(S -&gt; Type) Data b
</span><a href="#local-6989586621679656698"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
</span><a href="#local-6989586621679656697"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-423"></span><span>     </span><span class="hs-keyword">in</span><span>
</span><span id="line-424"></span><span>      </span><span class="annot"><span class="annottext">SOP
  @(S -&gt; Type)
  (K @(S -&gt; Type) Data)
  ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
-&gt; CollapseTo @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) Data
forall (xs :: [[S -&gt; Type]]) a.
SListIN @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) xs =&gt;
SOP @(S -&gt; Type) (K @(S -&gt; Type) a) xs
-&gt; CollapseTo @(S -&gt; Type) @[[S -&gt; Type]] (SOP @(S -&gt; Type)) a
forall k l (h :: (k -&gt; Type) -&gt; l -&gt; Type) (xs :: l) a.
(HCollapse @k @l h, SListIN @k @l h xs) =&gt;
h (K @k a) xs -&gt; CollapseTo @k @l h a
</span><span class="hs-identifier hs-var">SOP.hcollapse</span></span><span> </span><span class="annot"><span class="annottext">SOP
  @(S -&gt; Type)
  (K @(S -&gt; Type) Data)
  ((':) @[S -&gt; Type] struct ('[] @[S -&gt; Type]))
</span><a href="#local-6989586621679656709"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-425"></span><span>  </span><span id="local-6989586621679656718"><span class="annot"><span class="annottext">reprToPlut :: forall (s :: S).
PlutusRepr (PDataRec struct) -&gt; PLifted s (PDataRec struct)
</span><a href="#local-6989586621679656718"><span class="hs-identifier hs-var hs-var hs-var hs-var">reprToPlut</span></a></span></span><span> </span><span id="local-6989586621679656720"><span class="annot"><span class="annottext">PlutusRepr (PDataRec struct)
</span><a href="#local-6989586621679656720"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (PDataRec struct) -&gt; PLifted s (PDataRec struct)
forall (s :: S) (a :: S -&gt; Type). Term s a -&gt; PLifted s a
</span><a href="Plutarch.Internal.Lift.html#mkPLifted"><span class="hs-identifier hs-var">mkPLifted</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PDataRec struct) -&gt; PLifted s (PDataRec struct))
-&gt; Term s (PDataRec struct) -&gt; PLifted s (PDataRec struct)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PData) -&gt; Term s (PDataRec struct)
forall (b :: S -&gt; Type) (a :: S -&gt; Type) (s :: S).
Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.Term.html#punsafeCoerce"><span class="hs-identifier hs-var">punsafeCoerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList PData) -&gt; Term s (PDataRec struct))
-&gt; Term s (PBuiltinList PData) -&gt; Term s (PDataRec struct)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type) (s :: S).
PLiftable a =&gt;
AsHaskell a -&gt; Term s a
</span><a href="Plutarch.Internal.Lift.html#pconstant"><span class="hs-identifier hs-var">pconstant</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PlutusRepr (PDataRec struct)
AsHaskell (PBuiltinList PData)
</span><a href="#local-6989586621679656720"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-426"></span><span>  </span><span id="local-6989586621679656727"><span class="annot"><span class="annottext">plutToRepr :: (forall (s :: S). PLifted s (PDataRec struct))
-&gt; Either LiftError (PlutusRepr (PDataRec struct))
</span><a href="#local-6989586621679656727"><span class="hs-identifier hs-var hs-var hs-var hs-var">plutToRepr</span></a></span></span><span> </span><span id="local-6989586621679656729"><span class="annot"><span class="annottext">forall (s :: S). PLifted s (PDataRec struct)
</span><a href="#local-6989586621679656729"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type).
PLiftable a =&gt;
(forall (s :: S). PLifted s a) -&gt; Either LiftError (PlutusRepr a)
</span><a href="Plutarch.Internal.Lift.html#plutToRepr"><span class="hs-identifier hs-var">plutToRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Builtin.Data.html#PBuiltinList"><span class="hs-identifier hs-type">PBuiltinList</span></a></span><span> </span><span class="annot"><a href="Plutarch.Builtin.Data.html#PData"><span class="hs-identifier hs-type">PData</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). PLifted s (PBuiltinList PData))
 -&gt; Either LiftError (PlutusRepr (PBuiltinList PData)))
-&gt; (forall (s :: S). PLifted s (PBuiltinList PData))
-&gt; Either LiftError (PlutusRepr (PBuiltinList PData))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted s (PDataRec struct) -&gt; PLifted s (PBuiltinList PData)
forall (s :: S) (a :: S -&gt; Type) (b :: S -&gt; Type).
PLifted s a -&gt; PLifted s b
</span><a href="Plutarch.Internal.Lift.html#punsafeCoercePLifted"><span class="hs-identifier hs-var">punsafeCoercePLifted</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted s (PDataRec struct)
forall (s :: S). PLifted s (PDataRec struct)
</span><a href="#local-6989586621679656729"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-427"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.Lift.html#reprToHask"><span class="hs-identifier hs-type">reprToHask</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">PLA.Data</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.Lift.html#LiftError"><span class="hs-identifier hs-type">LiftError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SOP</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SOP.I</span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679656110"><span class="hs-identifier hs-type">hstruct</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>  </span><span id="local-6989586621679656735"><span class="annot"><span class="annottext">reprToHask :: [Data]
-&gt; Either
     LiftError (SOP @Type I ((':) @[Type] hstruct ('[] @[Type])))
</span><a href="Plutarch.Internal.Lift.html#reprToHask"><span class="hs-identifier hs-var hs-var hs-var hs-var">reprToHask</span></a></span></span><span> </span><span id="local-6989586621679656736"><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679656736"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-429"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><a href="#local-6989586621679656737"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679656153"><span class="annot"><a href="#local-6989586621679656153"><span class="hs-identifier hs-type">y</span></a></span></span><span> </span><span id="local-6989586621679656154"><span class="annot"><a href="#local-6989586621679656154"><span class="hs-identifier hs-type">ys</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#EachDataLiftable"><span class="hs-identifier hs-type">EachDataLiftable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656153"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-type">PDataRecPLiftableHelper</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656154"><span class="hs-identifier hs-type">ys</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-type">PDataRecPLiftableHelper</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679656153"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679656154"><span class="hs-identifier hs-type">ys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>      </span><span id="local-6989586621679656737"><span class="annot"><span class="annottext">go :: forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
EachDataLiftable y =&gt;
PDataRecPLiftableHelper ys
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656737"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-type">PDataRecPLiftableHelper</span></a></span><span> </span><span id="local-6989586621679656751"><span class="annot"><span class="annottext">[Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell ys))
</span><a href="#local-6989586621679656751"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Data]
 -&gt; Either
      LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys))))
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
forall (struct :: [S -&gt; Type]).
([Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell struct)))
-&gt; PDataRecPLiftableHelper struct
</span><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-var">PDataRecPLiftableHelper</span></a></span><span> </span><span class="annot"><span class="annottext">(([Data]
  -&gt; Either
       LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys))))
 -&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys))
-&gt; ([Data]
    -&gt; Either
         LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys))))
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiftError
-&gt; Either
     LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys)))
forall a b. a -&gt; Either a b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(LiftError
 -&gt; Either
      LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys))))
-&gt; LiftError
-&gt; Either
     LiftError (NP @Type I (RecAsHaskell ((':) @(S -&gt; Type) y ys)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; LiftError
</span><a href="Plutarch.Internal.Lift.html#OtherLiftError"><span class="hs-identifier hs-var">OtherLiftError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Not enough fields are provided&quot;</span></span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679656753"><span class="annot"><span class="annottext">Data
</span><a href="#local-6989586621679656753"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><a href="../../../ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679656754"><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679656754"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-434"></span><span>          </span><span id="local-6989586621679656755"><span class="annot"><span class="annottext">AsHaskell y
</span><a href="#local-6989586621679656755"><span class="hs-identifier hs-var">curr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (a :: S -&gt; Type).
PLiftable a =&gt;
PlutusRepr a -&gt; Either LiftError (AsHaskell a)
</span><a href="Plutarch.Internal.Lift.html#reprToHask"><span class="hs-identifier hs-var">reprToHask</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679656153"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="annot"><span class="annottext">Data
PlutusRepr y
</span><a href="#local-6989586621679656753"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-435"></span><span>          </span><span id="local-6989586621679656756"><span class="annot"><span class="annottext">NP @Type I (RecAsHaskell ys)
</span><a href="#local-6989586621679656756"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell ys))
</span><a href="#local-6989586621679656751"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679656754"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>          </span><span class="annot"><span class="annottext">NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys))
-&gt; Either
     LiftError (NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys)))
forall a. a -&gt; Either LiftError a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys))
 -&gt; Either
      LiftError
      (NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys))))
-&gt; NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys))
-&gt; Either
     LiftError (NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AsHaskell y -&gt; I (AsHaskell y)
forall a. a -&gt; I a
</span><span class="hs-identifier hs-var">SOP.I</span></span><span> </span><span class="annot"><span class="annottext">AsHaskell y
</span><a href="#local-6989586621679656755"><span class="hs-identifier hs-var">curr</span></a></span><span> </span><span class="annot"><span class="annottext">I (AsHaskell y)
-&gt; NP @Type I (RecAsHaskell ys)
-&gt; NP @Type I ((':) @Type (AsHaskell y) (RecAsHaskell ys))
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><span class="hs-operator hs-var">:*</span></span><span> </span><span class="annot"><span class="annottext">NP @Type I (RecAsHaskell ys)
</span><a href="#local-6989586621679656756"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span>      </span><span class="annot"><a href="#local-6989586621679656757"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-type">PDataRecPLiftableHelper</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679656109"><span class="hs-identifier hs-type">struct</span></a></span><span>
</span><span id="line-440"></span><span>      </span><span id="local-6989586621679656757"><span class="annot"><span class="annottext">y :: PDataRecPLiftableHelper struct
</span><a href="#local-6989586621679656757"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy @((S -&gt; Type) -&gt; Constraint) EachDataLiftable
-&gt; PDataRecPLiftableHelper ('[] @(S -&gt; Type))
-&gt; (forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
    (EachDataLiftable y, All @(S -&gt; Type) EachDataLiftable ys) =&gt;
    PDataRecPLiftableHelper ys
    -&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys))
-&gt; PDataRecPLiftableHelper struct
forall k (c :: k -&gt; Constraint) (xs :: [k])
       (proxy :: (k -&gt; Constraint) -&gt; Type) (r :: [k] -&gt; Type).
All @k c xs =&gt;
proxy c
-&gt; r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    (c y, All @k c ys) =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
forall (proxy :: ((S -&gt; Type) -&gt; Constraint) -&gt; Type)
       (r :: [S -&gt; Type] -&gt; Type).
proxy EachDataLiftable
-&gt; r ('[] @(S -&gt; Type))
-&gt; (forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
    (EachDataLiftable y, All @(S -&gt; Type) EachDataLiftable ys) =&gt;
    r ys -&gt; r ((':) @(S -&gt; Type) y ys))
-&gt; r struct
</span><span class="hs-identifier hs-var">SOP.cpara_SList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
forall (t :: (S -&gt; Type) -&gt; Constraint).
Proxy @((S -&gt; Type) -&gt; Constraint) t
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Repr.Data.html#EachDataLiftable"><span class="hs-identifier hs-type">EachDataLiftable</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Data]
 -&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))))
-&gt; PDataRecPLiftableHelper ('[] @(S -&gt; Type))
forall (struct :: [S -&gt; Type]).
([Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell struct)))
-&gt; PDataRecPLiftableHelper struct
</span><a href="Plutarch.Repr.Data.html#PDataRecPLiftableHelper"><span class="hs-identifier hs-var">PDataRecPLiftableHelper</span></a></span><span> </span><span class="annot"><span class="annottext">(([Data]
  -&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))))
 -&gt; PDataRecPLiftableHelper ('[] @(S -&gt; Type)))
-&gt; ([Data]
    -&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))))
-&gt; PDataRecPLiftableHelper ('[] @(S -&gt; Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
-&gt; [Data]
-&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
forall a b. a -&gt; b -&gt; a
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
 -&gt; [Data]
 -&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))))
-&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
-&gt; [Data]
-&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))
-&gt; Either LiftError (NP @Type I (RecAsHaskell ('[] @(S -&gt; Type))))
forall a b. b -&gt; Either a b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">NP @Type I ('[] @Type)
NP @Type I (RecAsHaskell ('[] @(S -&gt; Type)))
forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><span class="hs-identifier hs-var">Nil</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PDataRecPLiftableHelper ys
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
(EachDataLiftable y, All @(S -&gt; Type) EachDataLiftable ys) =&gt;
PDataRecPLiftableHelper ys
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
forall (y :: S -&gt; Type) (ys :: [S -&gt; Type]).
EachDataLiftable y =&gt;
PDataRecPLiftableHelper ys
-&gt; PDataRecPLiftableHelper ((':) @(S -&gt; Type) y ys)
</span><a href="#local-6989586621679656737"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-441"></span><span>     </span><span class="hs-keyword">in</span><span>
</span><span id="line-442"></span><span>      </span><span class="annot"><span class="annottext">NS
  @[Type]
  (NP @Type I)
  ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
-&gt; SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><span class="hs-identifier hs-var">SOP.SOP</span></span><span> </span><span class="annot"><span class="annottext">(NS
   @[Type]
   (NP @Type I)
   ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
 -&gt; SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type])))
-&gt; (NP @Type I (RecAsHaskell struct)
    -&gt; NS
         @[Type]
         (NP @Type I)
         ((':) @[Type] (RecAsHaskell struct) ('[] @[Type])))
-&gt; NP @Type I (RecAsHaskell struct)
-&gt; SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NP @Type I (RecAsHaskell struct)
-&gt; NS
     @[Type]
     (NP @Type I)
     ((':) @[Type] (RecAsHaskell struct) ('[] @[Type]))
forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NS @k a ((':) @k x xs)
</span><span class="hs-identifier hs-var">SOP.Z</span></span><span> </span><span class="annot"><span class="annottext">(NP @Type I (RecAsHaskell struct)
 -&gt; SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type])))
-&gt; Either LiftError (NP @Type I (RecAsHaskell struct))
-&gt; Either
     LiftError
     (SOP @Type I ((':) @[Type] (RecAsHaskell struct) ('[] @[Type])))
forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PDataRecPLiftableHelper struct
-&gt; [Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell struct))
forall (struct :: [S -&gt; Type]).
PDataRecPLiftableHelper struct
-&gt; [Data] -&gt; Either LiftError (NP @Type I (RecAsHaskell struct))
</span><a href="Plutarch.Repr.Data.html#%24sel%3AunPDataRecPLiftableHelper%3APDataRecPLiftableHelper"><span class="hs-identifier hs-var">unPDataRecPLiftableHelper</span></a></span><span> </span><span class="annot"><span class="annottext">PDataRecPLiftableHelper struct
</span><a href="#local-6989586621679656757"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679656736"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-443"></span></pre></body></html>