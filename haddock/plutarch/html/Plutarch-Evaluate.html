<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Plutarch.Evaluate</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">plutarch-1.9.0</span><ul class="links" id="page-menu"><li><a href="src/Plutarch.Evaluate.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">Plutarch.Evaluate</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:evalScript">evalScript</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:evalScriptHuge">evalScriptHuge</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:evalScript-39-">evalScript'</a> :: ExBudget -&gt; <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:evalScriptUnlimited">evalScriptUnlimited</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><span class="keyword">type</span> <a href="#t:EvalError">EvalError</a> = CekEvaluationException NamedDeBruijn DefaultUni DefaultFun</li><li class="src short"><a href="#v:evalTerm">evalTerm</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> (<a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a), ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>])</li><li class="src short"><a href="#v:evalTerm-39-">evalTerm'</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a</li><li class="src short"><a href="#v:unsafeEvalTerm">unsafeEvalTerm</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a</li><li class="src short"><a href="#v:applyArguments">applyArguments</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; [Data] -&gt; <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:evalScript" class="def">evalScript</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Plutarch.Internal.Evaluate.html#evalScript" class="link">Source</a> <a href="#v:evalScript" class="selflink">#</a></p><div class="doc"><p>Evaluate a script with a big budget, returning the trace log and term result.</p></div></div><div class="top"><p class="src"><a id="v:evalScriptHuge" class="def">evalScriptHuge</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Plutarch.Internal.Evaluate.html#evalScriptHuge" class="link">Source</a> <a href="#v:evalScriptHuge" class="selflink">#</a></p><div class="doc"><p>Evaluate a script with a huge budget, returning the trace log and term result.</p></div></div><div class="top"><p class="src"><a id="v:evalScript-39-" class="def">evalScript'</a> :: ExBudget -&gt; <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Plutarch.Internal.Evaluate.html#evalScript%27" class="link">Source</a> <a href="#v:evalScript-39-" class="selflink">#</a></p><div class="doc"><p>Evaluate a script with a specific budget, returning the trace log and term result.</p></div></div><div class="top"><p class="src"><a id="v:evalScriptUnlimited" class="def">evalScriptUnlimited</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a>, ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Plutarch.Internal.Evaluate.html#evalScriptUnlimited" class="link">Source</a> <a href="#v:evalScriptUnlimited" class="selflink">#</a></p><div class="doc"><p>Evaluate a script without budget limit</p><p>@since WIP</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:EvalError" class="def">EvalError</a> = CekEvaluationException NamedDeBruijn DefaultUni DefaultFun <a href="src/Plutarch.Internal.Evaluate.html#EvalError" class="link">Source</a> <a href="#t:EvalError" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:evalTerm" class="def">evalTerm</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a> (<a href="../../ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="Plutarch-Evaluate.html#t:EvalError" title="Plutarch.Evaluate">EvalError</a> (<a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a), ExBudget, [<a href="../../ghc-9.6.6/html/libraries/text-2.0.2/Data-Text.html#t:Text" title="Data.Text">Text</a>]) <a href="src/Plutarch.Evaluate.html#evalTerm" class="link">Source</a> <a href="#v:evalTerm" class="selflink">#</a></p><div class="doc"><p>Compile and evaluate term.</p></div></div><div class="top"><p class="src"><a id="v:evalTerm-39-" class="def">evalTerm'</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a <a href="src/Plutarch.Evaluate.html#evalTerm%27" class="link">Source</a> <a href="#v:evalTerm-39-" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Plutarch-Evaluate.html#v:evalTerm" title="Plutarch.Evaluate">evalTerm</a></code> but without error handling</p></div></div><div class="top"><p class="src"><a id="v:unsafeEvalTerm" class="def">unsafeEvalTerm</a> :: <a href="Plutarch-Internal-Term.html#t:Config" title="Plutarch.Internal.Term">Config</a> -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a -&gt; <a href="Plutarch-Internal-Term.html#t:ClosedTerm" title="Plutarch.Internal.Term">ClosedTerm</a> a <a href="src/Plutarch.Evaluate.html#unsafeEvalTerm" class="link">Source</a> <a href="#v:unsafeEvalTerm" class="selflink">#</a></p><div class="doc"><p>Compile and evaluate a ClosedTerm
Useful for pre-evaluating terms so that they can be used as constants in
an onchain script. Consider the following:
 _________________________________________________________________________
     term :: Term _ PInteger
     term = unsafeEvalTerm NoTracing foo</p><p>foo :: Term s PInteger
     foo = (pconstant 1 #+ pconstant 5) #* pconstant 3</p><p>bar :: Term s (PInteger :--&gt; PInteger)
     bar = plam x -&gt;
       x + foo</p><p>bar2 :: Term s (PInteger :--&gt; PInteger)
     bar2 = plam x -&gt;
       x + term</p><p>PI.compile PI.NoTracing bar
    Right (Script {unScript = Program {_progAnn = (), _progVer = Version {_versionMajor = 1, _versionMinor = 0, _versionPatch = 0}, _progTerm = LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Builtin () AddInteger) (Var () (DeBruijn {dbnIndex = 1}))) (Apply () (Apply () (Builtin () MultiplyInteger) (Apply () (Apply () (Builtin () AddInteger) (Constant () (Some (ValueOf DefaultUniInteger 1)))) (Constant () (Some (ValueOf DefaultUniInteger 5))))) (Constant () (Some (ValueOf DefaultUniInteger 3)))))}})
    PI.compile PI.NoTracing bar2
    Right (Script {unScript = Program {_progAnn = (), _progVer = Version {_versionMajor = 1, _versionMinor = 0, _versionPatch = 0}, _progTerm = LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Builtin () AddInteger) (Var () (DeBruijn {dbnIndex = 1}))) (Constant () (Some (ValueOf DefaultUniInteger 18))))}})
 _________________________________________________________________________</p><p>In bar, foo is an unevaluated term and thus must be evaluated. In bar2, foo has been
pre-evaluated with <code><a href="Plutarch-Evaluate.html#v:unsafeEvalTerm" title="Plutarch.Evaluate">unsafeEvalTerm</a></code> and thus appears as a constant.</p><p>Error if the compilation or evaluation fails.</p></div></div><div class="top"><p class="src"><a id="v:applyArguments" class="def">applyArguments</a> :: <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> -&gt; [Data] -&gt; <a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a> <a href="src/Plutarch.Evaluate.html#applyArguments" class="link">Source</a> <a href="#v:applyArguments" class="selflink">#</a></p><div class="doc"><p>Given a compiled <code><a href="Plutarch-Script.html#t:Script" title="Plutarch.Script">Script</a></code> representing a function that takes arguments, and
a list of those <code>Data</code>-encoded arguments, produce a new script with those
arguments applied.</p><p><em>Since: 1.8.1</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>